(function (name, definition, context) {if (typeof context['module'] !== 'undefined' && context['module']['exports']) {context['module']['exports'] = definition.apply(context);}else if (typeof context['define'] !== 'undefined' && context['define'] === 'function' && context['define']['amd']) {define(name, [], definition);}else {context[name] = definition();}})('ydn', function () {var l,r=this;function u(a){return void 0!==a}function aa(a){a=a.split(".");for(var b=r,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function v(a){return"array"==ca(a)}function w(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function da(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ea(a){return"function"==ca(a)}function z(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var fa="closure_uid_"+(1E9*Math.random()>>>0),ga=0;
function ha(a,b,c){return a.call.apply(a.bind,arguments)}function ia(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ja(a,b,c){ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return ja.apply(null,arguments)}
function ka(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var la=Date.now||function(){return+new Date};function ma(a,b){var c=a.split("."),d=r;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&u(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}
function C(a,b){function c(){}c.prototype=b.prototype;a.s=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.uc=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function na(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function oa(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function pa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,pa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}C(pa,Error);pa.prototype.name="CustomError";var qa;function ra(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function sa(a){return/^[\s\xa0]*$/.test(a)}var ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Aa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Ba,"&#0;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/"/g,Aa=/'/g,Ba=/\x00/g,va=/[\x00&<>"']/;
function Ca(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Da={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ea={"'":"\\'"};
function Fa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,g;if(!(g=Da[d])){if(!(31<e&&127>e))if(d in Ea)d=Ea[d];else if(d in Da)d=Ea[d]=Da[d];else{e=d;g=d.charCodeAt(0);if(31<g&&127>g)e=d;else{if(256>g){if(e="\\x",16>g||256<g)e+="0"}else e="\\u",4096>g&&(e+="0");e+=g.toString(16).toUpperCase()}d=Ea[d]=e}g=d}b[f]=g}b.push('"');return b.join("")}function Ga(a,b){return a<b?-1:a>b?1:0};function Ha(a,b){b.unshift(a);pa.call(this,ra.apply(null,b));b.shift()}C(Ha,pa);Ha.prototype.name="AssertionError";function Ia(a,b){throw new Ha("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ja=Array.prototype,Ka=Ja.indexOf?function(a,b,c){return Ja.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},La=Ja.forEach?function(a,b,c){Ja.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ma=Ja.map?function(a,b,c){return Ja.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Na=Ja.some?function(a,b,c){return Ja.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Oa=Ja.every?function(a,b,c){return Ja.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Pa(a,b){var c=Qa(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}
function Qa(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ra(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ta(a,b,c,d){Ja.splice.apply(a,Ua(arguments,1))}function Ua(a,b,c){return 2>=arguments.length?Ja.slice.call(a,b):Ja.slice.call(a,b,c)}
function Va(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Wa,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Xa(a,b){return a>b?1:a<b?-1:0}function Wa(a,b){return a===b}function Ya(a,b){var c;c=Za||Xa;for(var d=0,e=a.length,f;d<e;){var g=d+e>>1,h;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}c=f?d:~d;0>c&&Ta(a,-(c+1),0,b)};var $a;a:{var ab=r.navigator;if(ab){var bb=ab.userAgent;if(bb){$a=bb;break a}}$a=""}function cb(a){return-1!=$a.indexOf(a)};function db(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function eb(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var fb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<fb.length;f++)c=fb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function ib(a){var b=arguments.length;if(1==b&&v(arguments[0]))return ib.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function jb(a){r.setTimeout(function(){throw a;},0)}var kb;
function lb(){var a=r.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ja(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!cb("Trident")&&!cb("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(u(c.next)){c=c.next;var a=c.vb;c.vb=null;a()}};return function(a){d.next={vb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){r.setTimeout(a,0)}};function mb(a,b){ob||pb();qb||(ob(),qb=!0);rb.push(new sb(a,b))}var ob;function pb(){if(r.Promise&&r.Promise.resolve){var a=r.Promise.resolve();ob=function(){a.then(tb)}}else ob=function(){var a=tb;!ea(r.setImmediate)||r.Window&&r.Window.prototype.setImmediate==r.setImmediate?(kb||(kb=lb()),kb(a)):r.setImmediate(a)}}var qb=!1,rb=[];[].push(function(){qb=!1;rb=[]});function tb(){for(;rb.length;){var a=rb;rb=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.a.call(c.b)}catch(d){jb(d)}}}qb=!1}
function sb(a,b){this.a=a;this.b=b};function ub(a,b){this.b=vb;this.f=void 0;this.a=this.c=null;this.d=this.e=!1;try{var c=this;a.call(b,function(a){wb(c,xb,a)},function(a){if(!(a instanceof yb))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}wb(c,zb,a)})}catch(d){wb(this,zb,d)}}var vb=0,xb=2,zb=3;ub.prototype.then=function(a,b,c){return Ab(this,ea(a)?a:null,ea(b)?b:null,c)};na(ub);function Bb(a){a.b==vb&&mb(function(){var a=new yb(void 0);Cb(this,a)},a)}
function Cb(a,b){if(a.b==vb)if(a.c){var c=a.c;if(c.a){for(var d=0,e=-1,f=0,g;g=c.a[f];f++)if(g=g.ra)if(d++,g==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.b==vb&&1==d?Cb(c,b):(d=c.a.splice(e,1)[0],Db(c,d,zb,b)))}}else wb(a,zb,b)}function Eb(a,b){a.a&&a.a.length||a.b!=xb&&a.b!=zb||Fb(a);a.a||(a.a=[]);a.a.push(b)}
function Ab(a,b,c,d){var e={ra:null,Fb:null,Gb:null};e.ra=new ub(function(a,g){e.Fb=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){g(m)}}:a;e.Gb=c?function(b){try{var e=c.call(d,b);!u(e)&&b instanceof yb?g(b):a(e)}catch(m){g(m)}}:g});e.ra.c=a;Eb(a,e);return e.ra}ub.prototype.g=function(a){this.b=vb;wb(this,xb,a)};ub.prototype.i=function(a){this.b=vb;wb(this,zb,a)};
function wb(a,b,c){if(a.b==vb){if(a==c)b=zb,c=new TypeError("Promise cannot resolve to itself");else{if(oa(c)){a.b=1;c.then(a.g,a.i,a);return}if(z(c))try{var d=c.then;if(ea(d)){Gb(a,c,d);return}}catch(e){b=zb,c=e}}a.f=c;a.b=b;Fb(a);b!=zb||c instanceof yb||Hb(a,c)}}function Gb(a,b,c){function d(b){f||(f=!0,a.i(b))}function e(b){f||(f=!0,a.g(b))}a.b=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function Fb(a){a.e||(a.e=!0,mb(a.j,a))}
ub.prototype.j=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;b++)Db(this,a[b],this.b,this.f)}this.e=!1};function Db(a,b,c,d){if(c==xb)b.Fb(d);else{if(b.ra)for(;a&&a.d;a=a.c)a.d=!1;b.Gb(d)}}function Hb(a,b){a.d=!0;mb(function(){a.d&&Kb.call(null,b)})}var Kb=jb;function yb(a){pa.call(this,a)}C(yb,pa);yb.prototype.name="cancel";/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function D(a,b){this.i=[];this.M=b||null;this.b=this.c=!1;this.e=void 0;this.W=this.A=this.j=!1;this.g=0;this.d=null;this.t=0}l=D.prototype;l.Ea=function(a,b){this.j=!1;Lb(this,a,b)};function Lb(a,b,c){a.c=!0;a.e=c;a.b=!b;a.Ya()}function Mb(a){if(a.c){if(!a.W)throw new Nb;a.W=!1}}l.callback=function(a){Mb(this);Lb(this,!0,a)};l.m=function(a){Mb(this);Lb(this,!1,a)};l.D=function(a,b){return Ob(this,a,null,b)};l.sb=function(a,b){return Ob(this,null,a,b)};l.ha=function(a,b){return Ob(this,a,a,b)};
function Ob(a,b,c,d){a.i.push([b,c,d]);a.c&&a.Ya();return a}l.then=function(a,b,c){var d,e,f=new ub(function(a,b){d=a;e=b});Ob(this,d,function(a){e(a)});return f.then(a,b,c)};na(D);function Pb(a,b){b instanceof D?a.D(ja(b.ua,b)):a.D(function(){return b})}D.prototype.ua=function(a){var b=new D;Ob(this,b.callback,b.m,b);a&&(b.d=this,this.t++);return b};function Qb(a){return Na(a.i,function(a){return ea(a[1])})}
D.prototype.Ya=function(){this.g&&this.c&&Qb(this)&&(Rb(this.g),this.g=0);this.d&&(this.d.t--,delete this.d);for(var a=this.e,b=!1,c=!1;this.i.length&&!this.j;){var d=this.i.shift(),e=d[0],f=d[1],d=d[2];if(e=this.b?f:e)try{var g=e.call(d||this.M,a);u(g)&&(this.b=this.b&&(g==a||g instanceof Error),this.e=a=g);oa(a)&&(this.j=c=!0)}catch(h){a=h,this.b=!0,Qb(this)||(b=!0)}}this.e=a;c&&(c=ja(this.Ea,this,!0),g=ja(this.Ea,this,!1),a instanceof D?(Ob(a,c,g),a.A=!0):a.then(c,g));b&&(a=new Sb(a),Tb[a.Ja]=
a,this.g=a.Ja)};function Nb(){pa.call(this)}C(Nb,pa);Nb.prototype.message="Deferred has already fired";Nb.prototype.name="AlreadyCalledError";function Sb(a){this.Ja=r.setTimeout(ja(this.b,this),0);this.a=a}Sb.prototype.b=function(){delete Tb[this.Ja];throw this.a;};var Tb={};function Rb(a){var b=Tb[a];b&&(r.clearTimeout(b.Ja),delete Tb[a])};function E(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}C(E,pa);function Ub(a){pa.call(this,a);this.name="ydn.error.TypeError"}C(Ub,pa);function Vb(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}C(Vb,pa);function Wb(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}C(Wb,pa);function Xb(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}C(Xb,pa);
function Yb(a){Error.captureStackTrace?Error.captureStackTrace(this,Yb):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}C(Yb,Error);Yb.prototype.name="ydn.error.InternalError";var Zb="StopIteration"in r?r.StopIteration:Error("StopIteration");function $b(){}$b.prototype.next=function(){throw Zb;};$b.prototype.Sa=function(){return this};function ac(a){if(a instanceof $b)return a;if("function"==typeof a.Sa)return a.Sa(!1);if(w(a)){var b=0,c=new $b;c.next=function(){for(;;){if(b>=a.length)throw Zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function bc(a,b){if(w(a))try{La(a,b,void 0)}catch(c){if(c!==Zb)throw c;}else{a=ac(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==Zb)throw d;}}};function cc(a,b){this.b={};this.a=[];this.d=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)dc(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof cc)e=a.sa(),d=a.ab();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)dc(this,e[c],d[c])}}l=cc.prototype;l.yb=function(){return this.c};l.ab=function(){ec(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
l.sa=function(){ec(this);return this.a.concat()};l.clear=function(){this.b={};this.d=this.c=this.a.length=0};function ec(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}l.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.b,a)?this.b[a]:b};
function dc(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.c++,a.a.push(b),a.d++);a.b[b]=c}l.forEach=function(a,b){for(var c=this.sa(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};l.clone=function(){return new cc(this)};l.Sa=function(a){ec(this);var b=0,c=this.a,d=this.b,e=this.d,f=this,g=new $b;g.next=function(){for(;;){if(e!=f.d)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Zb;var g=c[b++];return a?g:d[g]}};return g};var fc=cb("Opera")||cb("OPR"),gc=cb("Trident")||cb("MSIE"),hc=cb("Gecko")&&-1==$a.toLowerCase().indexOf("webkit")&&!(cb("Trident")||cb("MSIE")),ic=-1!=$a.toLowerCase().indexOf("webkit");ic&&cb("Mobile");cb("Macintosh");cb("Windows");cb("Linux");var jc=r.navigator||null;jc&&(jc.appVersion||"").indexOf("X11");cb("Android");!cb("iPhone")||cb("iPod")||cb("iPad");cb("iPad");function kc(){var a=r.document;return a?a.documentMode:void 0}
var lc=function(){var a="",b;if(fc&&r.opera)return a=r.opera.version,ea(a)?a():a;hc?b=/rv\:([^\);]+)(\)|;)/:gc?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:ic&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec($a))?a[1]:"");return gc&&(b=kc(),b>parseFloat(a))?String(b):a}(),mc={};
function nc(a){var b;if(!(b=mc[a])){b=0;for(var c=ta(String(lc)).split("."),d=ta(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=k.exec(g)||["","",""],p=m.exec(h)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=Ga(0==n[1].length?0:parseInt(n[1],10),0==p[1].length?0:parseInt(p[1],10))||Ga(0==n[2].length,0==p[2].length)||Ga(n[2],p[2])}while(0==b)}b=mc[a]=0<=b}return b}
var oc=r.document,pc=oc&&gc?kc()||("CSS1Compat"==oc.compatMode?parseInt(lc,10):5):void 0;function qc(a){var b;b||(b=rc(a||arguments.callee.caller,[]));return b}
function rc(a,b){var c=[];if(0<=Ka(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(sc(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=sc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(rc(a.caller,
b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")}function sc(a){if(tc[a])return tc[a];a=String(a);if(!tc[a]){var b=/function ([^\(]+)/.exec(a);tc[a]=b?b[1]:"[Anonymous]"}return tc[a]}var tc={};function uc(a,b,c,d,e){"number"==typeof e||vc++;this.f=d||la();this.e=a;this.d=b;this.c=c;delete this.b;delete this.a}uc.prototype.b=null;uc.prototype.a=null;var vc=0;function wc(a){this.e=a;this.a=this.d=this.b=this.c=null}function xc(a,b){this.name=a;this.value=b}xc.prototype.toString=function(){return this.name};var yc=new xc("SHOUT",1200),zc=new xc("SEVERE",1E3),Ac=new xc("WARNING",900),Bc=new xc("INFO",800),Cc=new xc("CONFIG",700),Dc=new xc("FINE",500),Ec=new xc("FINER",400),Fc=new xc("FINEST",300),Gc=[new xc("OFF",Infinity),yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,new xc("ALL",0)],Hc=null;wc.prototype.getName=function(){return this.e};
function Ic(a){if(a.b)return a.b;if(a.c)return Ic(a.c);Ia("Root logger has no level set.");return null}wc.prototype.log=function(a,b,c){if(a.value>=Ic(this).value)for(ea(b)&&(b=b()),a=this.f(a,b,c,wc.prototype.log),b="log:"+a.d,r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b)),r.msWriteProfilerMark&&r.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.c}};
wc.prototype.f=function(a,b,c,d){var e=new uc(a,String(b),this.e);if(c){var f;f=d||arguments.callee.caller;e.b=c;var g;try{var h;var k=aa("window.location.href");if(x(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var m,n,p=!1;try{m=c.lineNumber||c.vc||"Not available"}catch(q){m="Not available",p=!0}try{n=c.fileName||c.filename||c.sourceURL||r.$googDebugFname||k}catch(t){n="Not available",p=!0}h=!p&&c.lineNumber&&c.fileName&&c.stack&&c.message&&
c.name?c:{message:c.message||"Not available",name:c.name||"UnknownError",lineNumber:m,fileName:n,stack:c.stack||"Not available"}}g="Message: "+ua(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+ua(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ua(qc(f)+"-> ")}catch(A){g="Exception trying to expose exception! You win, we lose. "+A}e.a=g}return e};var Jc={},Kc=null;
function Lc(){Kc||(Kc=new wc(""),Jc[""]=Kc,Kc.b=Cc)}function Mc(){Lc();return Kc}function F(a){Lc();var b;if(!(b=Jc[a])){b=new wc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=F(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;Jc[a]=b}return b};function Nc(a,b,c){a&&a.log(b,c,void 0)}function Oc(a,b){a&&a.log(zc,b,void 0)}function G(a,b){a&&a.log(Ac,b,void 0)}function Pc(a,b){a&&a.log(Dc,b,void 0)};function J(a,b){a&&a.log(Fc,b,void 0)}function L(a,b){a&&a.log(Ec,b,void 0)};function Qc(a,b){D.call(this,0,b);this.f=[]}C(Qc,D);Qc.prototype.na=function(a,b){this.f.push([a,b]);return this};function Rc(a,b){for(var c=0;c<a.f.length;c++)a.f[c][0].call(a.f[c][1],b)}Qc.prototype.callback=function(a){this.f.length=0;Qc.s.callback.call(this,a)};Qc.prototype.m=function(a){this.f.length=0;Qc.s.m.call(this,a)};Qc.prototype.xa=function(){return this};var Sc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Tc=Sc.READ_ONLY,M=Sc.READ_WRITE,Uc=Sc.VERSION_CHANGE,Vc=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.moz_indexedDB||r.msIndexedDB;D.prototype.done=D.prototype.D;D.prototype.fail=D.prototype.sb;D.prototype.always=D.prototype.ha;Qc.prototype.then=Qc.prototype.then;function Wc(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}function Xc(a,b,c){if(a)if(-1==b.indexOf("."))a[b]=c;else{b=b.split(".");for(var d=b.pop(),e;e=b.shift();)z(a[e])||(a[e]={}),a=a[e];a[d]=c}}var Yc={};
function Zc(a){a=[a];for(var b=new $c,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(Yc);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),ad(b,e);else if(e instanceof Date)c+=2,b.write(c),ad(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===Yc)b.write(0);else return"";c=0}return b.trim().toString()}function bd(a){for(var b=[],c=b,d=[],e,f,g=new cd(a);null!=dd(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)dd(g);else break}while(1);1===a?c.push(ed(g)):2===a?c.push(new Date(ed(g))):3===a?c.push(fd(g)):0===a&&(c=d.pop())}return b[0]}
function ad(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function ed(a){var b=dd(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=dd(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(dd(a)|0):dd(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function fd(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=dd(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function cd(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function dd(a){return a.a=a.index<a.c?parseInt(a.b[++a.index]+a.b[++a.index],16):null}function $c(){this.a=[];this.b=void 0}
$c.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};$c.prototype.trim=function(){for(var a=this.a.length;"00"===this.a[--a];);this.a.length=++a;return this};$c.prototype.toString=function(){return this.a.length?this.a.join(""):""};function gd(a,b){var c=Zc(a),d=Zc(b);return c>d?1:c==d?0:-1};function hd(a,b,c){Qc.call(this,0,c);this.l=a;this.f=[];this.r=[];this.da=[];this.a=null;this.oa="";this.F=0}C(hd,Qc);l=hd.prototype;l.oa="";l.logger=F("ydn.db.Request");function id(a,b,c){a.a=b;a.oa=c;L(a.logger,a+" BEGIN");if(b){for(c=0;c<a.r.length;c++)a.r[c][0].call(a.r[c][1],b);a.r.length=0}}function jd(a){var b=new hd(a.l);a.F++;id(b,a.a,a.oa+"C"+a.F);return b}function kd(a){L(a.logger,a+" END");a.a=null}l.Vb=function(){return!!this.a};
l.abort=function(){L(this.logger,this+" aborting "+this.a);if(this.a)if(ea(this.a.abort))this.a.abort();else if(ea(this.a.executeSql))this.a.executeSql("ABORT",[],function(){},function(){return!0});else throw new Vb;else throw new ld(this+" No active transaction");};function N(a,b,c){var d=a.da.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){N(a,b,c)}):c?a.m(b):a.callback(b)}function md(a,b,c){a.da.push([b,c])}function O(a,b,c){a.a?b.call(c,a.a):a.r.push([b,c])}
l.callback=function(a){L(this.logger,this+" SUCCESS");hd.s.callback.call(this,a)};l.m=function(a){L(this.logger,this+" ERROR");hd.s.m.call(this,a)};l.state=function(){return this.c?this.b?"rejected":"resolved":"pending"};function P(a){var b="";a.oa&&(b=a.a?"*":"",b="["+a.oa+b+"]");return a.l+b}function nd(a,b){var c=new hd(a);N(c,b);return c}l.toString=function(){return"Request:"+P(this)};
l.Ya=function(){this.g&&this.c&&Qb(this)&&(Rb(this.g),this.g=0);this.d&&(this.d.t--,delete this.d);for(var a=this.e,b=!1;this.i.length&&!this.j;){var c=this.i.shift(),d=c[0],e=c[1],c=c[2];if(d=this.b?e:d)d=d.call(c||this.M,a),u(d)&&(this.b=this.b&&(d==a||d instanceof Error),this.e=a=d),oa(a)&&(this.j=b=!0)}this.e=a;b&&(b=ja(this.Ea,this,!0),d=ja(this.Ea,this,!1),a instanceof D?(Ob(a,b,d),a.A=!0):a.then(b,d))};
l.toJSON=function(){var a=(this.oa||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.l?this.l.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var od=Vc&&Vc.cmp?ja(Vc.cmp,Vc):gd,pd=[];function qd(){0!=rd&&(sd[this[fa]||(this[fa]=++ga)]=this);this.da=this.da;this.na=this.na}var rd=0,sd={};qd.prototype.da=!1;qd.prototype.Wa=function(){if(!this.da&&(this.da=!0,this.U(),0!=rd)){var a=this[fa]||(this[fa]=++ga);delete sd[a]}};qd.prototype.U=function(){if(this.na)for(;this.na.length;)this.na.shift()()};function td(a,b){this.type=a;this.b=this.target=b;this.Kb=!0}td.prototype.Wa=function(){};td.prototype.preventDefault=function(){this.Kb=!1};function ud(a,b){td.call(this,a,b)}C(ud,td);ud.prototype.h=function(){return this.a};function vd(a,b,c,d,e){td.call(this,a,b);this.version=c;this.Sb=d;this.Eb=e}C(vd,ud);l=vd.prototype;l.name="ReadyEvent";l.version=NaN;l.Sb=NaN;l.Eb=null;l.rc=function(){return this.version};l.Xb=function(){return this.Sb};l.Wb=function(){return this.Eb};function wd(a,b,c){td.call(this,c||"error",a);this.error=b}C(wd,ud);wd.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};
wd.prototype.name="ErrorEvent";wd.prototype.error=null;wd.prototype.c=function(){return this.error};function xd(a,b){wd.call(this,a,b,"fail")}C(xd,wd);xd.prototype.name="FailEvent";function yd(a,b,c,d,e){td.call(this,a,b);this.a=c;this.key=d;this.value=e}C(yd,ud);yd.prototype.name="RecordEvent";yd.prototype.c=function(){return this.key};yd.prototype.w=function(){return this.value};function zd(a,b,c,d,e){td.call(this,a,b);this.a=c;this.keys=d;this.B=e}C(zd,ud);zd.prototype.name="StoreEvent";
zd.prototype.sa=function(){return this.keys};zd.prototype.ab=function(){return this.B};function Ad(a,b,c){var d;if(z(a))d=a.store,b=a.id,null!=a.parent&&(c=new Ad(a.parent));else if(u(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new Ad(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!u(b))throw Error("Invalid key value: "+a);this.a=d;this.id=b;this.parent=c||null}l=Ad.prototype;l.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
l.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};l.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};l.h=function(){return this.a};l.jc=function(){return this.id};function Bd(a){return v(a.id)?a.id.join("^|"):a.id instanceof Date?+a.id:a.id}l.kc=function(){return this.parent};function Cd(a){return null!=a?y(a)||x(a)||a instanceof Date||v(a)&&Oa(a,Cd):!1}
function Dd(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function Q(a,b,c,d){a>b&&(b=a=void 0);null===a&&(a=void 0);null===b&&(b=void 0);this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d}Q.prototype.lower=void 0;Q.prototype.upper=void 0;Q.prototype.toJSON=function(){return Ed(this)};function Fd(a){return Gd(a)}Q.only=function(a){return new Q(a,a,!1,!1)};Q.bound=function(a,b,c,d){return new Q(a,b,c,d)};Q.upperBound=function(a,b){return new Q(void 0,a,void 0,!!b)};Q.lowerBound=function(a,b){return new Q(a,void 0,!!b,void 0)};
function Id(a){var b;if(v(a))b=Sa(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(y(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return Q.only(a);return Q.bound(a,b,!1,!0)}function Ed(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}
function Gd(a){return null!=a?null!=a.upper&&null!=a.lower?Jd.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Jd.upperBound(a.upper,a.upperOpen):null!=a.lower?Jd.lowerBound(a.lower,a.lowerOpen):null:null}function Kd(a){if(a instanceof Q)return"";if(null!=a){if(z(a)){for(var b in a){var c;if(c=a.hasOwnProperty(b))c=!(0<=Ka(["lower","upper","lowerOpen","upperOpen"],b));if(c)return'invalid attribute "'+b+'" in key range object'}return""}return"key range must be an object"}return""}
Q.prototype.Y=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return Q.bound(b,c,d,e)};function Ld(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function Md(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==od(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Nd(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Nd(c.upper,b)))}else d.push(a+" = ?"),e.push(Nd(c.lower,b))}
function Od(a,b,c,d){var e,f,g,h;if("starts"==a||"^"==a)return Id(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new E("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(u(c))throw new E("invalid op2: "+c);return Q.bound(f,e,h,g)}var Jd=r.IDBKeyRange||r.webkitIDBKeyRange||Q;function Pd(a,b,c,d,e,f){u(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new E("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);v(a)&&Object.freeze&&Object.freeze(a);!u(a)&&u(e)&&(a=e);this.keyPath=a;this.f=w(this.keyPath);this.b=e;this.type=Qd(b);if(u(b)){if(!u(this.type))throw new E("type invalid in index: "+this.b);if(v(this.keyPath))throw new E('composite key for store "'+this.b+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.g=x(this.type)?
this.type:Rd;this.d=x(e)?e:v(a)?this.keyPath.join(","):a;this.c=Fa(this.d);this.a=this.f?null:this.keyPath.split(".");this.e=f||null}var Rd="TEXT";function Nd(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:Zc(a)}function Sd(a,b){return"DATE"==b?new Date(a):u(b)?a:bd(a)}var Td=["BLOB","DATE","INTEGER","NUMERIC",Rd];function Qd(a){if(x(a))return a=Ka(Td,a),Td[a]}l=Pd.prototype;l.getName=function(){return this.b};
l.toJSON=function(){return{name:this.b,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};l.clone=function(){var a=v(this.keyPath)?Sa(this.keyPath):this.keyPath;return new Pd(a,this.type,this.unique,this.multiEntry,this.b,this.e)};function Ud(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Va(a,b)?null:"expect: "+a+", but: "+b:Vd(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
l.hint=function(a){if(!a)return this;var b=v(this.keyPath)?Sa(this.keyPath):this.keyPath,c=this.type;u(a.type)||"TEXT"!=c||(c=void 0);return new Pd(b,c,this.unique,this.multiEntry,a.b)};l.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.a&&1<this.a.length&&(a+="Compound");return a+"Index:"+this.b};function Wd(a,b,c,d,e,f,g,h){if(!x(a))throw new E("store name must be a string");this.c=a;this.keyPath=u(b)?b:null;this.i=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.i)throw new E("keyPath must be a string or array");if(null!=c&&!da(c))throw new E('invalid autoIncrement value in store "'+a+'"');this.b=!!c;var k;if(null!=d){k=Qd(d);if(!u(k))throw new E('type "'+d+'" for primary key in store "'+this.c+'" is invalid.');if(this.i)throw new E('composite key for store "'+this.c+'" must not specified type');
}this.type=null!=k?k:this.b?"INTEGER":void 0;this.f=x(this.keyPath)?this.keyPath.split("."):[];this.a=e||[];this.Z=!!f;this.ga=!!g;this.l=x(this.type)?this.type:Rd;this.e=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.d=Fa(this.e);if(this.j=!!h){if(this.keyPath)throw new E('encrypted store "'+this.c+'" must not use inline key');if(this.b)throw new E('encrypted store "'+this.c+'" must not use key generator');}this.g=[]}l=Wd.prototype;l.Z=!1;l.ga=!1;
l.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.c,keyPath:this.keyPath,autoIncrement:this.b,type:this.type,indexes:a}};
function Xd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ka(b,c))throw new E('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ka(f,g))throw new E("Unknown field: "+g+" in "+R(e));e=new Pd(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
u(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Wd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function Yd(a,b,c,d,e,f,g){a=Zd(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.K;a.n&&(b+=" WHERE "+a.n);a.group&&(b+=" GROUP BY "+a.group);a.L&&(b+=" ORDER BY "+a.L);return b}
function Zd(a,b,c,d,e,f,g){var h={select:"",K:"",n:"",group:"",L:""},k=a.e,m=a.d,n=null;d!==k&&x(d)&&(n=$d(a,d));var p=!!n,q=d||k,t=Fa(q),A=p?n.type:a.type,B=p&&n.multiEntry;h.K=ae(a);6===c?h.select="COUNT("+m+")":3===c||1===c||2===c?(h.select=m,null!=d&&d!=k&&(h.select+=", "+t)):h.select="*";d=g?"DISTINCT ":"";k=[];B?(B=Fa("ydn.db.me:"+a.getName()+":"+n.getName()),h.select=6===c?"COUNT("+d+B+"."+t+")":3===c||1===c||2===c?"DISTINCT "+ae(a)+"."+m+", "+B+"."+t+" AS "+q:"DISTINCT "+ae(a)+".*, "+B+"."+
t+" AS "+q,h.K=B+" INNER JOIN "+ae(a)+" USING ("+m+")",null!=e&&(Md(B+"."+t,A,e,k,b),0<k.length&&(h.n=h.n?h.n+(" AND "+k.join(" AND ")):k.join(" AND ")))):null!=e&&(Md(t,A,e,k,b),0<k.length&&(h.n=h.n?h.n+(" AND "+k.join(" AND ")):k.join(" AND ")));p&&!n.unique&&g&&(h.group=t);a=f?"DESC":"ASC";h.L=t+" "+a;p&&(h.L+=", "+m+" "+a);return h}
function be(a,b,c,d,e,f,g,h,k){var m,n,p,q;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,q=e.upperOpen,f?null!=n?(e=od(h,n),-1==e?(n=h,q=k):0==e&&(q=k||q)):(n=h,q=k):null!=m?(e=od(h,m),1==e?(m=h,p=k):0==e&&(p=k||p)):(m=h,p=k)):f?(n=h,q=k):(m=h,p=k);e=new Q(m,n,!!p,!!q);d=d?$d(a,d):null;b=Zd(a,c,b,d?d.d:a.e,e,f,g);b="SELECT "+b.select+" FROM "+b.K+(b.n?" WHERE "+b.n:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.L;d&&(b+=", "+a.d+(f?"DESC":"ASC"));return b}
function ce(a,b,c,d,e,f,g,h,k,m){var n=$d(a,d),p=n.d;d=n.c;var q=a.d,t=k?" <":" >",t=g?t+" ":t+"= ";g=Nd(f,n.type);h=Nd(h,a.type);n="";e?(a=Zd(a,c,b,p,e,k,m),a.n+=" AND ",n=d+t+"?",c.push(g)):(e=k?Q.upperBound(f,!0):Q.lowerBound(f,!0),a=Zd(a,c,b,p,e,k,m),n=a.n,a.n="");a.n+="("+n+" OR ("+d+" = ? AND "+q+t+"?))";c.push(g);c.push(h);return"SELECT "+a.select+" FROM "+a.K+" WHERE "+a.n+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.L}l.clone=function(){return Xd(this.toJSON())};
l.index=function(a){return this.a[a]||null};function $d(a,b){return Pa(a.a,function(a){return a.getName()==b})}function de(a,b){for(var c=0;c<a.a.length;c++)if(!Ud(a.a[c].keyPath,b))return a.a[c];return null}function ee(a,b){return b===a.keyPath?!0:Na(a.a,function(a){return a.getName()==b})}function ae(a){return Fa(a.c)}
function fe(a,b){if(!b)return a;var c=a.b,d=v(a.keyPath)?Sa(a.keyPath):a.keyPath,e=a.type,f=Ma(a.a,function(a){return a.clone()});u(b.type)||"TEXT"!=e||(e=void 0);v(b.keyPath)&&x(d)&&d==b.keyPath.join(",")&&(d=Sa(b.keyPath));for(var g=0,h=b.a.length;g<h;g++)if(b.a[g].f)for(var k=b.a[g].getName(),m=f.length-1;0<=m;m--)if(0<=k.indexOf(f[m].getName())){f[m]=b.a[g].clone();break}for(g=0;g<f.length;g++)(h=$d(b,f[g].getName()))&&(f[g]=f[g].hint(h));return new Wd(b.c,d,c,e,f)}l.getName=function(){return this.c};
function ge(a){return!!a.keyPath}function he(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.i){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(Wc(b,a.keyPath[d]));return c}if(a.keyPath)return eb(b,a.f)}}function ie(a,b,c){for(var d=0;d<a.f.length;d++){var e=a.f[d];if(d==a.f.length-1){b[e]=c;break}u(b[e])||(b[e]={});b=b[e]}}
function je(a,b,c){var d=[],e=[];c=u(c)?c:he(a,b);u(c)&&(e.push(a.d),d.push(Nd(c,a.type)));for(var f=0;f<a.a.length;f++){var g=a.a[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var h;h=g;var k=b;if(null!=k)if(w(h.keyPath)){for(var m=[],n=0,p=h.keyPath.length;n<p;n++){var q=Wc(k,h.keyPath[n]);m[n]=q}h=m}else h=Wc(k,h.keyPath);else h=void 0;null!=h&&(d.push(Nd(h,g.type)),e.push(g.c))}}a.ga?a.ga&&!a.keyPath&&0==a.a.length&&(x(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(R(b)),
e.push("_default_")):(d.push(R(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{xb:e,Lb:a,B:d,key:c}}
function ke(a,b){if(!b)return"missing store: "+a.c;if(a.c!=b.c)return"store name, expect: "+a.c+", but: "+b.c;var c=Ud(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(u(a.b)&&u(b.b)&&a.b!=b.b)return"autoIncrement, expect:  "+a.b+", but: "+b.b;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(u(a.type)&&u(b.type)&&(w(a.type)?!Va(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=$d(b,a.a[c].getName()),
e;e=a.a[c];if(d)if(e.b!=d.b)e="name, expect: "+e.b+", but: "+d.b;else{var f=Ud(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:u(e.type)&&u(d.type)&&(w(e.type)?!Va(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.b;if(0<e.length)return'index "'+
a.a[c].getName()+'" '+e}return""}function le(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.e){var f=d.e(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||v(f)){for(g=0;g<d.a.length-1;g++)z(e[d.a[g]])||(e[d.a[g]]={});e[d.a[d.a.length-1]]=f}}}}function me(a,b){a.g.push(b)}function ne(a,b,c,d,e){for(var f=0;f<a.g.length;f++)d!==f&&a.g[f].call(e,b,c)}l.toString=function(){return"Store:"+this.c+"["+this.a.length+"index]"};F("ydn");function oe(a){return!x(a)||sa(a)?{}:JSON.parse(a)}function pe(a){var b;try{b=R(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function R(a){return JSON.stringify(a,void 0,void 0)};function qe(a,b,c){if(!a||sa(a))throw new E("store_name must be provided for primary full text index");if(!b||sa(b))throw new E("index_name must be provided for primary full text index");this.a=a;this.b=b;this.c=c||1}qe.prototype.h=function(){return this.a};function re(a,b,c,d){this.name=a;this.b=b;this.c=c||"";if(-1==["","en","fr"].indexOf(this.c))throw new E('Unsupported lang "'+c+" for full text search index "+a);this.d=d||null;this.a=null}re.prototype.getName=function(){return this.name};re.prototype.count=function(){return this.b.length};re.prototype.index=function(a){return this.b[a]};function se(a,b,c){return Pa(a.b,function(a){return a.h()==b&&a.b==c})}
function te(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ka(b,c))throw new E("Unknown field: "+c+" in "+R(a));if(!v(a.sources))throw new E("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ka(b,c))throw new E("Unknown field: "+c+" in "+pe(a));return new qe(a.storeName,a.keyPath,a.weight)});return new re(a.name,
b,a.lang)};function ue(a,b){var c,d,e=b;if(z(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ka(c,f))throw new E("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!v(g))throw new E("stores must be array");for(f=0;f<g.length;f++){var h=Xd(g[f]);if(-1!=Qa(e,function(a){return a.name==h.getName()}))throw new E('duplicate store name "'+h.getName()+'".');e.push(h)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(u(c)){if(!y(c)||0>c)throw new E("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(u(b)&&(!v(b)||0<b.length&&!(b[0]instanceof Wd)))throw new E("stores");this.version=c;this.b=!u(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=te(d.fullTextCatalogs[f]),c[f]=e,S(this,e.getName())||(g=[new Pd("k",Rd),new Pd("v",Rd)],e=new Wd(e.getName(),"id",!1,void 0,g,!1,!1,!1),this.stores.push(e));this.c=c}
ue.prototype.toJSON=function(){var a=Ma(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;u(this.version)&&(b.version=this.version);return b};ue.prototype.b=!1;ue.prototype.a=function(){return!1};function ve(a){return Ma(a.stores,function(a){return a.getName()})}ue.prototype.count=function(){return this.stores.length};function S(a,b){return Pa(a.stores,function(a){return a.getName()==b})}function we(a,b){return Na(a.stores,function(a){return a.getName()==b})}
function xe(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=S(b,a.stores[e].getName());if(f){c&&(f=fe(f,a.stores[e]));if(d)for(var g=f,h=a.stores[e],k=0;k<h.a.length;k++){var m=h.a[k];ee(g,m.getName())||"BLOB"!=m.type||(m=new Pd(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),g.a.push(m))}f=ke(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""}function ye(a,b){return Pa(a.c,function(a){return a.getName()==b})};function ze(a,b){ue.call(this,a,b)}C(ze,ue);ze.prototype.a=function(){return!0};function Ae(a,b){a.stores.push(b)};function Be(a){Error.captureStackTrace?Error.captureStackTrace(this,Be):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}C(Be,Error);function Ce(a){Error.captureStackTrace?Error.captureStackTrace(this,Ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}C(Be,Error);Ce.prototype.name="ydn.error.NotSupportedException";
function De(a){Error.captureStackTrace?Error.captureStackTrace(this,De):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}C(De,Error);function Ee(a){Error.captureStackTrace?Error.captureStackTrace(this,Ee):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}C(Ee,Error);Ee.prototype.name="ydn.InternalError";
function Fe(a){Error.captureStackTrace?Error.captureStackTrace(this,Fe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}C(Fe,Error);Fe.prototype.name="ydn.error.ConstraintError";function Ge(a){Error.captureStackTrace?Error.captureStackTrace(this,Ge):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}C(Be,Error);
function He(a){Error.captureStackTrace?Error.captureStackTrace(this,He):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}C(He,Error);function Vd(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Pa(b,function(b){return Vd(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&Vd(a[0],b);if(w(b))return 1==b.length&&Vd(b[0],a);if(z(a)&&z(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Vd(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Vd(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function Ie(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function T(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ka(d,e))throw new E('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!v(c.mechanisms))throw new E("mechanisms attribute must be an array but "+ca(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=Ka(Je,c.mechanisms[e])))throw new E('Invalid mechanism "'+c.mechanisms[e]+'"');}this.r=c.mechanisms||Je;this.i=c.size;
this.t=u(c.connectionTimeout)?c.connectionTimeout:3E3;this.b=null;this.d=[];this.Ka=!1;var f;if(b instanceof ue)f=b;else if(z(b))for(c.autoSchema||!u(b.stores)?f=new ze(b):f=new ue(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=S(f,b.stores[e].name),b.stores[e].Sync&&G(this.logger,"Synchronization option for "+d.getName()+" ignored.");else f=new ze;this.c=f;for(e=0;e<this.c.count();e++)if((this.c.stores[e]||null).j)throw Error("encryption option must be defined");u(a)&&this.l(a);this.f=null;this.e=
new D}T.prototype.logger=F("ydn.db.con.Storage");T.prototype.A=function(a){if(u(a)){var b=function(b){a(b.toJSON());a=void 0};if(this.b)this.b.X(b);else{var c=this;this.transaction(function(a){c.b.X(b,a)},null,Tc)}}return this.c?this.c.toJSON():null};T.prototype.l=function(a){if(this.b)throw new Xb("Already connected with "+this.g);this.g=a;Ke(this)};T.prototype.getName=function(){return this.g};var Je="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");l=T.prototype;
l.Va=function(){return null};
function Ke(a){function b(b,e){b?(J(a.logger,a+": ready."),a.zb=NaN,d.Oa=function(b){a.H(new wd(a,b))},d.nb=function(b){a.H(new xd(a,b));a.b=null},d.eb=function(b){a.H(b)},setTimeout(function(){Le(a,e);Oe(a)},10),c.callback(e)):(G(a.logger,a+": database connection fail "+e.name),setTimeout(function(){Le(a,new xd(a,e));if(a.d){var b=a.logger;for(b&&b.log(Bc,"Purging "+a.d.length+" transactions request.",void 0);b=a.d.shift();)b.G&&b.G("error",e)}},10),c.m(e))}for(var c=new D,d=null,e=a.r,f=0;f<e.length;f++){var g=
e[f].toLowerCase();if(d=a.Va(g)){d=a.Va(g);break}}null===d?(e=new Fe("No storage mechanism found."),b(!1,new xd(a,e))):Ob(d.lb(a.g,a.c),function(a){this.b=d;b(!0,new vd("ready",this,parseFloat(d.Rb()),parseFloat(a),null))},function(a){G(this.logger,this+": opening fail");b(!1,a)},a)}l.Ba=function(){if(this.b)return this.b.Qb()};l.Na=function(a,b){this.e.ha(a,b)};function Le(a,b){setTimeout(function(){a.c.b&&a.e.c||(b instanceof wd?a.e.m(b.error):a.e.callback(),a.H(b))},4)}
function Pe(a){return!!a.b&&a.b.mb()}l.close=function(){this.b&&(this.b.close(),this.b=null,J(this.logger,this+" closed"))};l.oc=function(){return this.b?this.b.Pb():null};l.zb=NaN;function Oe(a){var b=a.d.shift();b&&(J(a.logger,"pop tx queue["+(a.d.length+1)+"]"),a.transaction(b.Ha,b.cc,b.mode,b.G));a.zb=la()}
function Qe(a,b,c,d,e){J(a.logger,"push tx queue["+a.d.length+"]");a.d.push({Ha:b,cc:c,mode:d,G:e});100<a.d.length&&0==a.d.length%100&&G(a.logger,"Transaction queue stack size is "+a.d.length+". It is too large, possibility due to incorrect usage.")}l.Ka=!1;
l.transaction=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new E("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new E("store name at "+f+" must be string but found "+typeof b[f]);}else throw new E("store names must be an array");else e=null;if(this.b&&this.b.mb()&&!this.Ka){var g=this,h=u(c)?c:Tc;h==Uc&&(this.Ka=!0);this.b.Xa(function(b){a(b);a=null},e,h,function(a,b){ea(d)&&(d(a,b),d=void 0);h==Uc&&(g.Ka=!1);Oe(g)})}else Qe(this,
a,e,c,d)};l.tb=function(a){G(this.logger,"Full text indexer option for "+a.getName()+" ignored.")};l.H=function(){};l.toString=function(){return"Storage:"+this.b};T.prototype.close=T.prototype.close;T.prototype.getType=T.prototype.Ba;T.prototype.getName=T.prototype.getName;T.prototype.getSchema=T.prototype.A;T.prototype.onReady=T.prototype.Na;T.prototype.setName=T.prototype.l;T.prototype.transaction=T.prototype.transaction;T.prototype.db=T.prototype.oc;ma("ydn.db.version","1.1.1");ma("ydn.db.cmp",od);ma("ydn.db.deleteDatabase",function(a,b){for(var c,d=0;d<pd.length;d++){var e=pd[d](a,b);e&&(c=e)}return c||nd("IDBVersionChangeEvent ",null)});
vd.prototype.name=vd.prototype.name;vd.prototype.getVersion=vd.prototype.rc;vd.prototype.getOldVersion=vd.prototype.Xb;vd.prototype.getOldSchema=vd.prototype.Wb;wd.prototype.getError=wd.prototype.c;hd.prototype.abort=hd.prototype.abort;hd.prototype.canAbort=hd.prototype.Vb;Qc.prototype.progress=Qc.prototype.na;Qc.prototype.promise=Qc.prototype.xa;function Re(a){Error.captureStackTrace?Error.captureStackTrace(this,Re):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}C(Re,Error);Re.prototype.name="ConstraintError";Re.prototype.toString=function(){return this.name+": "+this.message};function Se(a){Error.captureStackTrace?Error.captureStackTrace(this,Se):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}C(Se,Error);
Se.prototype.toString=function(){return this.name+": "+this.message};function Te(a){Error.captureStackTrace?Error.captureStackTrace(this,Te):this.stack=Error().stack||"";a&&(this.message=String(a))}C(Te,Error);Te.prototype.name="ydn.db.InternalError";function ld(a){Error.captureStackTrace?Error.captureStackTrace(this,ld):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}C(ld,Error);
function Ue(a){Error.captureStackTrace?Error.captureStackTrace(this,Ue):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}C(Ue,Error);function Ve(a){Error.captureStackTrace?Error.captureStackTrace(this,Ve):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}C(Ve,Error);Ve.prototype.name="NotFoundError";Ve.prototype.toString=function(){return this.name+": "+this.message};
function We(a,b){Error.captureStackTrace?Error.captureStackTrace(this,We):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}C(We,Error);We.prototype.toString=function(){return this.name+": "+this.message};function Xe(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Xe):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}C(Xe,Error);
Xe.prototype.toString=function(){return this.name+": "+this.message};function Ye(a){Error.captureStackTrace?Error.captureStackTrace(this,Ye):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}C(Ye,Error);function Ze(a){Error.captureStackTrace?Error.captureStackTrace(this,Ze):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}C(Ze,Error);function $e(a,b){this.a=b}$e.prototype.logger=F("ydn.db.crud.req.RequestExecuto");$e.prototype.toString=function(){return"RequestExecutor"};function af(a){this.c=a;this.a=null;this.b=0}af.prototype.logger=F("ydn.db.tr.Mutex");af.prototype.J=null;function bf(a){return!!a.a&&!a.d}af.prototype.G=null;af.prototype.toString=function(){return"Mutex:"+("B"+this.c+"T"+this.b)+(this.a?"*":"")};function cf(a,b,c,d,e,f){this.A=a;this.F=b;this.a=this.d=0;this.t=d;this.r=e;this.e=c||df;this.i=f||0}cf.prototype.logger=F("ydn.db.tr.Thread");cf.prototype.type=function(){return this.A.Ba()};cf.prototype.o=function(){return this.A};cf.prototype.C=function(){return"B"+this.F+"T"+this.d};var df="single";function ef(a){if(a)if(ea(a.abort))a.abort();else if(ea(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Vb;else throw new ld("No active transaction");};function ff(a,b,c,d,e,f){cf.call(this,a,b,c,d,e,f);this.c=[];this.f=[];this.g=null;this.b=new af(b);this.j=f||0;this.l=!1}C(ff,cf);l=ff.prototype;l.logger=F("ydn.db.tr.Serial");
function gf(a,b,c){if("multi"==a.e)a:if(a=a.b,!a.J||!a.mode||c!=a.mode&&(a.mode!=M||c!=Tc)||b.length>a.J.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.J.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.e)a:if(a=a.b,a.J&&a.mode&&c==a.mode&&a.J.length==b.length){for(c=0;c<b.length;c++)if(-1==a.J.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.e?!0:!1;return b}function hf(a){var b=0<a.c.length?a.c[0].J:null,c=0<a.c.length?a.c[0].mode:null;return null!=b&&null!=c?gf(a,b,c):!1}
function jf(a,b,c,d,e){J(a.logger,"push tx queue["+a.c.length+"]");a.c.push({Ha:b,J:c,mode:d,G:e})}l.abort=function(){L(this.logger,this+": aborting");ef(this.g)};
l.ca=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new E("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new E("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.M&&!(0<=Ka(this.M,e[f])))throw new E('store name "'+f+e[f]+'" in scope of '+this);}}else throw new E("store names must be an array");var g=u(c)?c:Tc,h=this;if(this.b.a||!Pe(this.o())&&this.l)jf(this,a,b,g,d);else{var k=this.C();d&&this.f.push(d);
if(this.j&&this.d>=this.j)throw new Xb("Exceed maximum number of transactions of "+this.j);this.l=!0;this.o().transaction(function(c){var d=h.b;d.a=c;d.d=!1;d.J=b;d.mode=g;d.b++;d.G=null;k=h.C();Pc(h.logger,k+" BEGIN "+R(b)+" "+g);a(h);for(a=null;hf(h);)c=h.c.shift(),c.G&&h.f.push(c.G),J(h.logger,"pop tx queue"+(h.c.length+1)+" reusing T"+h.d),c.Ha()},e,g,function(a,b){Pc(h.logger,k+" "+a);var c=h.b;c.a?(c.a=null,c.J=null,c.mode=null,ea(c.G)&&c.G(a,b),c.G=null):G(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<h.f.length;c++)(0,h.f[c])(a,b);h.f.length=0;(c=h.c.shift())&&h.ca(c.Ha,c.J,c.mode,c.G);h.a=0})}};l.C=function(){var a=this.b;return"B"+a.c+"T"+a.b};l.request=function(a,b,c,d){function e(a,b){kd(f);d&&d(a,b)}var f=new hd(a);a=c||Tc;var g=this;bf(this.b)&&gf(this,b,a)?(b=this.b.a,this.a++,id(f,b,this.C()+"R"+this.a),this.f.push(e)):g.ca(function(){var a=g.b.a;g.a++;id(f,a,g.C()+"R"+g.a)},b,a,e);return f};
l.R=function(a,b,c,d,e){d=d||Tc;var f=this,g;if(bf(f.b)&&gf(this,c,d)){var h=f.b.a;f.a++;g=f.C()+"R"+f.a;L(f.logger,g+" BEGIN");b(h,g,function(b,c){f.g=h;c?(L(f.logger,g+" ERROR"),a.m(b)):(L(f.logger,g+" SUCCESS"),a.callback(b));f.g=null});L(f.logger,g+" END");b=null}else f.ca(function(){var c=f.b.a;f.a++;g=f.C()+"R"+f.a;L(f.logger,g+" BEGIN");b(c,g,function(b,d){f.g=c;d?(L(f.logger,g+" ERROR"),a.m(b)):(L(f.logger,g+" SUCCESS"),a.callback(b));f.g=null});L(f.logger,g+" END");b=null},c,d,e)};
l.getName=function(){return this.o().getName()};l.toString=function(){return"Serial:"+this.C()+(this.g?"*":"")};function kf(a,b){ff.call(this,a,b)}C(kf,ff);kf.prototype.logger=F("ydn.db.tr.AtomicSerial");kf.prototype.request=function(a,b,c){var d,e,f,g=kf.s.request.call(this,a,b,c,function(a,b){kd(g);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Ze;N(g,c,!0)}});md(g,function(a,b,c){f=b;e=a;d=c});return g};
kf.prototype.R=function(a,b,c,d,e){var f,g,h=new D;Ob(h,function(a){g=!1;f=a},function(a){g=!0;f=a});kf.s.R.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.m(c);else if(!0===g)a.m(f);else if(!1===g)a.callback(f);else{var d=new Ze;a.m(d)}e&&(e(b,c),e=void 0)})};kf.prototype.toString=function(){return"Atomic"+kf.s.toString.call(this)};function lf(a,b,c,d){this.d=a;this.b=b;this.a=c;this.e=d;this.c=null}l=lf.prototype;l.logger=F("ydn.db.tr.DbOperator");l.sc=function(){return this.a.d};l.abort=function(){this.a.abort()};function U(a){if(!a.c){var b;b=a.d;var c=b.Ba();if("indexeddb"==c)b=new mf(0,b.c);else if("websql"==c||"sqlite"==c)b=new nf(0,b.c);else throw new Yb("No executor for "+c);a.c=b}return a.c}l.o=function(){return this.d};
function of(a,b){var c=a.o(),d=b instanceof Wd?b:Xd(b),e=b.name,f=S(c.c,e);if(0==ke(d,f).length)(new D).callback(!1);else if(f=f?"update":"add",c.c instanceof ze)Ae(c.c,d),c.b?(c.b.close(),c.b=null,Ke(c)):(new D).callback(!1);else throw new Fe("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}l.toString=function(){return"TxStorage:"+this.o().getName()};function pf(a,b,c,d){lf.call(this,a,b,c,d)}C(pf,lf);l=pf.prototype;l.logger=F("ydn.db.crud.DbOperator");
l.count=function(a,b,c,d){var e,f,g,h;if(null!=a)if(v(a)){if(u(c)||u(b))throw new E("too many arguments.");f=a;for(var k=0;k<f.length;k++)if(!we(this.b,f[k]))throw new E('store name "'+f[k]+'" at '+k+" not found.");L(this.logger,"countStores: "+R(f));e=this.a.request("count",f);O(e,function(){U(this).Ua(e,f)},this)}else if(x(a)){k=S(this.b,a);if(!k)throw new E('store name "'+a+'" not found.');if(u(d)&&!da(d))throw new E('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,z(c)){var m=Kd(c);if(m)throw new E("invalid key range: "+pe(c)+" "+m);h=Gd(c)}else{if(null!=c)throw new E("invalid key range: "+pe(c)+" of type "+typeof c);h=null}else if(z(b)||null==b)if(z(b)){if(m=Kd(b))throw new E("invalid key range: "+pe(b)+" "+m);h=Gd(b)}else{if(null!=b)throw new E("key range must be  an object but found "+pe(b)+" of type "+typeof b);h=null}else throw new E('invalid second argument for count "'+pe(c)+'" of type '+typeof b);L(this.logger,"countKeyRange: "+a+" "+(g?g:"")+R(h));
e=this.a.request("count",f);ne(k,e,arguments);O(e,function(){U(this).Fa(e,f[0],h,g,!!d)},this)}else throw new E("Invalid store name or store names.");else G(this.logger,"count method requires store name(s)"),k=ve(this.b),e=this.a.request("count",k),md(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),O(e,function(){U(this).Ua(e,f)},this);return e};
l.get=function(a,b){var c=this,d;if(a instanceof Ad){var e=a,f=e.h(),g=S(this.b,f);if(!g){if(this.b.a()){if(Pe(this.o()))return nd("get",void 0);d=new hd("get");this.o().Na(function(){Ob(c.get(a,b),function(a){d.callback(a)},function(a){d.m(a)})});return d}throw new E("Store: "+f+" not found.");}var h=e.id;L(this.logger,"getByKey: "+f+":"+h);d=this.a.request("get:key",[f]);ne(g,d,arguments,void 0,this);O(d,function(){U(this).Za(d,f,h)},this)}else if(x(a)&&u(b)){var k=a,g=S(this.b,k);if(!g){if(this.b.a()){if(Pe(this.o()))return nd("get",
void 0);d=new hd("get");this.o().Na(function(){Ob(c.get(a,b),function(a){d.callback(a)},function(a){d.m(a)})});return d}throw new E('Store name "'+k+'" not found.');}var m=b;L(this.logger,"getById: "+k+":"+m);d=this.a.request("get",[k]);ne(g,d,arguments,void 0,this);O(d,function(){U(this).Za(d,k,m)},this)}else throw new E("get require valid input arguments.");return d};
l.$b=function(a,b,c,d,e){var f=S(this.b,a),g,h,k,m=null;if(z(b)){var n=Kd(b);if(n)throw new E("invalid key range: "+b+" "+n);m=Gd(b)}else if(null!=b)throw new E('expect key range object, but found "'+pe(b)+'" of type '+typeof b);if(u(c))if(y(c))g=c;else throw new E("limit must be a number, but "+c+" is "+typeof c);else g=100;if(u(d))if(y(d))h=d;else throw new E("offset must be a number, but "+d+" is "+typeof d);else h=0;if(u(e))if(da(e))k=e;else throw new E("reverse must be a boolean, but "+e+" is "+
typeof e);L(this.logger,"keysByKeyRange: "+a);var p=this.a.request("keys",[a]);ne(f,p,arguments);O(p,function(){U(this).O(p,2,a,null,m,g,h,k,!1)},this);return p};
l.keys=function(a,b,c,d,e,f,g){var h,k,m=null,n=!1,p=!1,q=a,t=S(this.b,q);if(!x(q))throw new E("store name must be a string, but "+q+" of type "+typeof q+" is not.");if(!this.b.a()){if(!t)throw new E('store name "'+q+'" not found.');if(x(b)&&!$d(t,b))throw new E('index "'+b+'" not found in store "'+q+'".');}if(this.b.a()&&!t)return nd("keys",[]);var A;if(x(b)){var B=b,H=Kd(c);if(H)throw new E("invalid key range: "+c+" "+H);m=Gd(c);if(y(d))h=d;else{if(u(d))throw new E("limit must be a number");h=100}if(y(e))k=
e;else{if(u(e))throw new E("offset must be a number");k=0}if(u(f))if(da(f))n=f;else throw new E("reverse must be a boolean");if(u(g))if(da(g))p=g;else throw new E("unique must be a boolean");L(this.logger,"keysByIndexKeyRange: "+q);A=this.a.request("keys:iter:index",[q]);ne(t,A,arguments);O(A,function(){U(this).O(A,2,q,B,m,h,k,n,p)},this)}else A=this.$b(q,b,c,d,e);return A};
l.B=function(a,b,c,d,e,f,g){var h=this,k;if(x(a)){var m=a,n=S(this.b,m);if(!n){if(this.b.a()){if(Pe(this.o()))return nd("values",[]);k=new hd("values");this.o().Na(function(){Ob(h.B(a,b,c,d,e,f),function(a){k.callback(a)},function(a){k.m(a)})});return k}throw new Ve(m);}if(v(b)){if(u(c)||u(d))throw new E("too many input arguments");var p=b;L(this.logger,"listByIds: "+m+" "+p.length+" ids");k=this.a.request("values:array",[m]);ne(n,k,arguments,void 0,this);O(k,function(){U(this).Bb(k,m,p)},this)}else k=
x(b)?this.ec(m,b,c,d,e,f,g):this.fc(m,b,c,d,e)}else if(v(a))if(a[0]instanceof Ad){for(var n=[],q=a,t=0;t<q.length;t++){var A=q[t].h();if(!we(this.b,A)){if(this.b.a())return n=[],n[q.length-1]=void 0,nd("get",n);throw new E("Store: "+A+" not found.");}0<=Ka(n,A)||n.push(A)}L(this.logger,"listByKeys: "+R(n)+" "+q.length+" keys");k=this.a.request("values:keys",n);O(k,function(){U(this).Cb(k,q)},this)}else throw new E("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");
else throw new E("first argument "+a+" is invalid.");return k};
l.fc=function(a,b,c,d,e){var f=S(this.b,a),g,h,k,m=null;if(z(b)){var n=Kd(b);if(n)throw new E("invalid key range: "+b+" "+n);m=Gd(b)}else if(null!=b)throw new E('expect key range object, but found "'+pe(b)+'" of type '+typeof b);if(u(c))if(y(c))g=c;else throw new E("limit must be a number, but "+c+" is "+typeof c);else g=100;if(u(d))if(y(d))h=d;else throw new E("offset must be a number, but "+d+" is "+typeof d);else h=0;if(u(e))if(da(e))k=e;else throw new E("reverse must be a boolean, but "+e+" is "+
typeof e);L(this.logger,(m?"listByKeyRange: ":"listByStore: ")+a);var p=this.a.request("values",[a]);ne(f,p,arguments);O(p,function(){U(this).O(p,4,a,null,m,g,h,k,!1)},this);return p};
l.ec=function(a,b,c,d,e,f,g){var h=S(this.b,a),k,m,n,p;if(!ee(h,b))throw new E('index "'+b+'" not found in store "'+a+'"');var q=Kd(c);if(q)throw new E("invalid key range: "+c+" "+q);var t=Gd(c);if(u(d))if(y(d))k=d;else throw new E("limit must be a number.");else k=100;if(u(e))if(y(e))m=e;else throw new E("offset must be a number.");else m=0;if(da(f))n=f;else if(u(f))throw new E("reverse must be a boolean, but "+f);if(u(g))if(da(g))p=g;else throw new E("unique must be a boolean");L(this.logger,"listByIndexKeyRange: "+
a+":"+b);var A=this.a.request("values:iter:index",[a]);ne(h,A,arguments);O(A,function(){U(this).O(A,4,a,b,t,k,m,n,p)},this);return A};
l.add=function(a,b,c){var d=x(a)?a:z(a)?a.name:void 0;if(!x(d))throw new E("store name "+d+" must be a string, but "+typeof d);var e=S(this.b,d);if(!e){if(!this.b.a())throw new E('store name "'+d+'" not found.');e=Xd(z(a)?a:{name:d});L(this.logger,"Adding object store: "+d);of(this,e)}else if(this.b.a()&&z(a)&&(a=Xd(a),a=ke(e,a)))throw new Vb(a);var f;if(!e)throw new E('store name "'+d+'" not found.');if(x(e.keyPath)&&u(c))throw new E("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.b&&!u(c))throw new E("out-of-line key must be provided.");if(v(b)){L(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)le(e,b[a]);f=this.a.request("add:array",[d],M);O(f,function(){U(this).V(f,!1,!1,d,b,c)},this);e.Z&&f.D(function(a){a=new zd("created",this.o(),e.getName(),a,b);this.o().H(a)},this)}else if(z(b))a="store: "+d+" key: "+he(e,b,c),L(this.logger,"addObject: "+a),le(e,b),f=this.a.request("add",[d],M),O(f,function(){U(this).V(f,!1,!0,d,[b],[c])},
this),e.Z&&f.D(function(a){a=new yd("created",this.o(),e.getName(),a,b);this.o().H(a)},this);else throw new E("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function qf(a,b){var c=x(b)?b:z(b)?b.name:void 0;if(!x(c))throw new E("store name must be a string");var d=S(a.b,c);if(!d){if(!a.b.a())throw new Ve(c);d=Xd(z(b)?b:{name:c});L(a.logger,"Adding object store: "+c);of(a,d)}else if(a.b.a()&&z(b)){var e=Xd(b);if(e=ke(d,e))throw new Vb(e);}if(!d)throw new Ve(c);return d}l.load=function(a,b,c){var d=c||",",e=qf(this,a).getName();a=this.a.request("load",[e]);var f=this;this.a.R(a,function(a,c,k){U(f).Hb(a,c,k,e,b,d)},[e],M);return a};
function rf(a,b){var c=sf(b);J(a.logger,"query "+b);var d=a.a.request("search",c,Tc);O(d,function(){var a=U(this);tf(b,function(c,g,h,k){var m=jd(d);a.O(m,4,c,g,Gd(h),100,0,!1,!1);m.ha(function(a){var c=null;a instanceof Array||(c=a,a=[]);for(var e=0;e<a.length;e++){var f;f=a[e];var g=f.id,g=x(g)?bd(g):g,h=g[3];(f=1==this.type&&h!=this.value?null:new uf(this,g[0],g[2],g[1],h,f.k,f.loc))&&b.d.push(f)}b.c--;a=0==b.c?!1:b.b[b.b.length-1].g===this.g?!0:null;!0===a?Rc(d,b):!1===a&&d.callback(b.e());if(c)throw c;
},k)})},a);return d}
l.put=function(a,b,c){var d,e=this;if(a instanceof Ad){var f=a,g=f.h(),h=S(this.b,g);if(!h)throw new E('store "'+g+'" not found.');if(h.keyPath){var k=he(h,b);if(null!=k){if(0!=od(k,f.id))throw new E("Inline key must be "+f+" but "+k+" found.");}else ie(h,b,f.id);return this.put(g,b)}return this.put(g,b,f.id)}if(v(a)){if(u(c))throw new E("too many arguments");var m=a;if(!u(b))throw new E("record values required");for(var n=b,f=[],g=0,h=m.length;g<h;g++){k=m[g].h();-1==Ka(f,k)&&f.push(k);var p=S(this.b,
k);if(!p)throw new E('store "'+k+'" not found.');p.keyPath&&ie(p,n[g],m[g].id)}L(this.logger,"putByKeys: to "+R(f)+" "+n.length+" objects");for(g=0;g<n.length;g++)le(p,n[g]);d=this.a.request("put:keys",f,M);ne(p,d,arguments);O(d,function(){U(e).fb(d,n,m)},this)}else if(x(a)||z(a)){var p=qf(this,a),q=p.getName();if(p.keyPath&&u(c))throw new E("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.b&&!u(c))throw new E("out-of-line key must be provided.");if(v(b)){var t=b,A=
c;L(this.logger,"putObjects: "+q+" "+t.length+" objects");for(g=0;g<t.length;g++)le(p,t[g]);d=this.a.request("put:array",[q],M);ne(p,d,arguments);O(d,function(){U(this).V(d,!0,!1,q,t,A)},this);p.Z&&d.D(function(a){a=new zd("updated",this.o(),q,a,t);this.o().H(a)},this)}else if(z(b)){var B=b,H=c;L(this.logger,"putObject: "+q+" "+(u(H)?H:"(without-key)"));if(u(r.Blob)&&B instanceof Blob&&p.ga&&!p.keyPath&&0==p.a.length&&ic)d=new hd("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,
c=e.a.request("put",[q],M);ne(p,c,[q,B,H]);O(c,function(){U(e).V(c,!0,!0,q,[b],[H])},this);Ob(c,function(a){d.callback(a)},function(a){d.m(a)})},f.onerror=function(a){d.m(a)},f.onabort=function(a){d.m(a)},f.readAsDataURL(B);else{le(p,B);d=this.a.request("put",[q],M);var I=[q,B,H];ne(p,d,I);O(d,function(){var a=u(H)?[I[2]]:void 0;U(e).V(d,!0,!0,q,[I[1]],a)},this)}p.Z&&d.D(function(a){a=new yd("updated",this.o(),q,a,B);this.o().H(a)},this)}else throw new E("put record value must be Object or array of Objects");
}else throw new E("the first argument of put must be store name, store schema or array of keys.");return d};
function vf(a,b,c){var d=a.e,e,f;if(x(b)){var g=S(a.b,b);if(g){if(!g.keyPath&&!g.b)throw new E('key required for store "'+b+'"');}else throw new Ve(b);for(var h=0;h<c.length;h++)le(g,c[h]);e=[b]}else{f=b;e=[];for(var h=0,k=f.length;h<k;h++){var m=f[h].h(),g=S(a.b,m);-1==Ka(e,m)&&e.push(m);if(!g)throw new Ve(m);le(g,c[h])}}var n;x(b)?(g=S(a.b,b),n=d.request("put:array",e,M),O(n,function(){U(this).V(n,!0,!1,b,c,void 0)},a)):(n=d.request("put:keys",e,M),O(n,function(){U(this).fb(n,c,f)},a));return n}
function wf(a,b,c){var d=a.e.request("rm:iter",[b],M);O(d,function(){U(this).hb(d,b,c||null)},a);return d}
l.clear=function(a,b,c){if(u(c))throw new E("too many input arguments");var d;if(x(a)){c=S(this.b,a);if(!c)throw new E('store name "'+a+'" not found.');if(z(b)){var e=Gd(b);if(null===e)throw new E("clear method requires a valid non-null KeyRange object.");L(this.logger,"clearByKeyRange: "+a+":"+R(e));d=this.a.request("clear",[a],M);ne(c,d,[a,e]);O(d,function(){U(this).wb(d,a,e)},this)}else{if(u(b))throw new E("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);L(this.logger,"clearByStore: "+a);d=this.a.request("clear",[a],M);O(d,function(){U(this).Ta(d,[a])},this)}}else if(!u(a)||v(a)&&x(a[0])){var f=a||ve(this.b);L(this.logger,"clearByStores: "+R(f));d=this.a.request("clear",f,M);O(d,function(){U(this).Ta(d,f)},this)}else throw new E('first argument "'+a+'" is invalid.');return d};
l.Ra=function(a,b,c){var d;if(x(a)){var e=S(this.b,a);if(!e)throw new E('store name "'+a+'" not found.');if(u(c))if(x(b)){var f=$d(e,b);if(!f)throw new E("index: "+b+" not found in "+a);if(z(c)||null===c){var g=Gd(c);L(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.request("rm:iter:index",[a],M);O(d,function(){U(this).Ib(d,a,f.getName(),g)},this)}else throw new E("key range "+c+' is invalid type "'+typeof c+'".');}else throw new E('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(x(b)||y(b)||w(b)||b instanceof Date){L(this.logger,"removeById: "+a+":"+b);d=this.a.request("rm",[a],M);var h=[a,b];ne(e,d,h);O(d,function(){U(this).gb(d,a,h[1])},this);e.Z&&d.D(function(c){c=1==c?b:void 0;c=new yd("deleted",this.o(),a,c,void 0);this.o().H(c)},this)}else if(z(b))g=Gd(b),L(this.logger,"removeByKeyRange: "+a+":"+R(g)),d=this.a.request("rm:iter",[a],M),ne(e,d,[a,g]),O(d,function(){U(this).hb(d,a,g)},this),e.Z&&d.D(function(b){var c=[];c.length=b;b=new zd("deleted",
this.o(),a,c,void 0);this.o().H(b)},this);else throw new E('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof Ad){var k=a.h(),e=S(this.b,k);d=this.a.request("rm",[k],M);var m=[k,a.id];ne(e,d,m);O(d,function(){U(this).gb(d,k,m[1])},this)}else if(v(a)){c=[];for(var e=0,n=a.length;e<n;e++){if(!(a[e]instanceof Ad))throw new E("key list element at "+e+" of "+n+' must be yn.db.Key, but "'+pe(a[e])+'" ('+ca(a[e])+") is not ydn.db.Key.");var p=a[e].h();-1==Ka(c,p)&&c.push(p)}if(1>
c.length)throw new E('at least one valid key required in key list "'+pe(a)+'"');d=this.a.request("rm:keys",c,M);O(d,function(){U(this).Jb(d,a)},this)}else throw new E('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+pe(a)+'" ('+ca(a)+") found.");return d};l.toString=function(){return"DbOperator:"+this.o().getName()};function xf(a,b,c,d){this.d=a;this.e=b;this.a=Sa(c);this.b=d;this.c=[]}xf.prototype.d=null;function yf(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new Yb("tx committed on ParallelTxExecutor");}xf.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.e+" mode:"+this.b+" scopes:"+R(this.a)};function zf(a,b,c,d,e,f){cf.call(this,a,b,c,d,e,f);this.c=this.b=null}C(zf,cf);l=zf.prototype;l.logger=F("ydn.db.tr.Parallel");l.abort=function(){L(this.logger,this+": aborting");ef(this.c)};
l.Tb=function(a,b){var c;if("multi"==this.e)a:if(c=this.b,!c.a||!c.b||b!=c.b&&(c.b!=M||b!=Tc)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.e)a:if(c=this.b,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.e?!0:!1;return c};
l.ca=function(a,b,c,d){function e(c){k.d++;m=new xf(c,k.d,b,h);g=k.C();Pc(k.logger,g+" BEGIN "+R(b)+" "+h);k.b=m;yf(k.b,a,d)}function f(a,b){Pc(k.logger,g+" "+a);if(m){for(var c=m,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}k.a=0}var g;this.t&&(b=this.t);this.r&&(c=this.r);var h=u(c)?c:Tc,k=this,m;if(this.b&&this.b.d&&this.Tb(b,h))yf(this.b,a,d);else{if(this.i&&this.d>=this.i)throw new Xb("Exceed maximum number of transactions of "+this.i);this.o().transaction(e,b,h,f)}};
l.request=function(a,b,c,d){var e=new hd(a),f=this;this.ca(function(a){f.a++;id(e,a,f.C()+"R"+f.a)},b,c||Tc,function(a,b){kd(e);d&&d(a,b)});return e};l.R=function(a,b,c,d,e){var f=this,g;this.ca(function(c){f.a++;g=f.C()+"R"+f.a;L(f.logger,g+" BEGIN");b(c,g,function(b,d){f.c=c;g=f.C()+"R"+f.a;d?(L(f.logger,g+" ERROR"),a.m(b)):(L(f.logger,g+" SUCCESS"),a.callback(b));f.c=null});b=null;L(f.logger,g+" END")},c,d,e)};l.toString=function(){return"Parallel:"+this.e+":"+this.C()+(this.c?"*":"")};function Af(a,b){zf.call(this,a,b,df)}C(Af,zf);l=Af.prototype;l.logger=F("ydn.db.tr.AtomicParallel");l.Tb=function(){return!1};l.request=function(a,b,c){var d,e,f,g=this,h=Af.s.request.call(this,a,b,c,function(a,b){kd(h);L(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Ze;N(h,c,!0)}});md(h,function(a,b,c){f=b;e=a;d=c});return h};
l.R=function(a,b,c,d,e){var f,g,h=new D;Ob(h,function(a){g=!1;f=a},function(a){g=!0;f=a});Af.s.R.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.m(c);else if(!0===g)a.m(f);else if(!1===g)a.callback(f);else{var d=new Ze;a.m(d)}e&&(e(b,c),e=void 0)})};l.toString=function(){return"Atomic"+Af.s.toString.call(this)};function Bf(a,b,c){T.call(this,a,b,c);this.la=0;a=!0;b=df;c&&(u(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=Cf(this,b,a);this.j=Cf(this,"atomic",!1);this.a=this.ka(c,this.j)}C(Bf,T);l=Bf.prototype;l.la=0;l.Ub=function(a,b,c,d,e,f){a=a||df;var g;"readonly"==d?g=Tc:"readwrite"==d&&(g=M);a=Cf(this,a,b,c,g,e);return this.ka(a,f?null:this.j)};l.ka=function(a,b){return new lf(this,this.c,a,b)};
function Cf(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==df)return new ff(a,a.la++,b,d,e,f);if("atomic"==b)return new kf(a,a.la++);throw new E('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==df)return new zf(a,a.la++,b,d,e,f);if("atomic"==b)return new Af(a,a.la++);throw new E('Invalid requestType "'+b+'"');}
l.bc=function(a,b,c){if(3<arguments.length)throw new E("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.la++;var d=b||ve(this.c),e=Tc;if(c)if("readwrite"==c)e=M;else if("readonly"!=c)throw new E('Invalid transaction mode "'+c+'"');var f=Cf(this,"all",!1,d,e,1),g=this.ka(f,this.j),h=new hd("run"),k=this;f.ca(function(b){J(k.logger,"executing run in transaction on "+f);id(h,b,f.C()+"R0");a(g)},d,e,function(a){kd(h);N(h,f.d,"complete"!==a)});
return h};l.tc=function(){return this.a?this.a.a.d:NaN};function V(a,b,c){Bf.call(this,a,b,c);a=this.c;for(b=0;b<a.c.length;b++){c=a.c[b];var d=S(a,c.getName());if(d){if(!ee(d,"k"))throw new E('full text index store "'+d.getName()+'" must have "keyword" index');if(!ee(d,"v"))throw new E('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new E('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new E('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=S(a,e.h());if(f)this.tb(f,c);else throw new E('full text source store "'+e.h()+'" does not exist for full text index "'+c.getName()+'"');}}}C(V,Bf);l=V.prototype;l.ka=function(a,b){return new pf(this,this.c,a,b)};l.add=function(a,b,c){return this.a.add(a,b,c)};l.count=function(a,b,c,d){return this.a.count(a,b,c,d)};l.get=function(a,b){return this.a.get(a,b)};l.keys=function(a,b,c,d,e,f,g){return this.a.keys(a,b,c,d,e,f,g)};l.B=function(a,b,c,d,e,f){return this.a.B(a,b,c,d,e,f)};
l.load=function(a,b,c){return this.a.load(a,b,c)};l.put=function(a,b,c){return this.a.put(a,b,c)};l.clear=function(a,b,c){return this.a.clear(a,b,c)};l.Ra=function(a,b,c){return this.a.Ra(a,b,c)};l.toString=function(){var a="Storage:"+this.getName();Pe(this)&&(a+=" ["+this.Ba()+"]");return a};Bf.prototype.branch=Bf.prototype.Ub;Bf.prototype.getTxNo=Bf.prototype.tc;lf.prototype.getTxNo=lf.prototype.sc;Bf.prototype.run=Bf.prototype.bc;V.prototype.branch=V.prototype.Ub;V.prototype.add=V.prototype.add;V.prototype.get=V.prototype.get;V.prototype.keys=V.prototype.keys;V.prototype.values=V.prototype.B;V.prototype.put=V.prototype.put;V.prototype.clear=V.prototype.clear;V.prototype.remove=V.prototype.Ra;V.prototype.count=V.prototype.count;pf.prototype.add=pf.prototype.add;pf.prototype.get=pf.prototype.get;pf.prototype.keys=pf.prototype.keys;pf.prototype.values=pf.prototype.B;pf.prototype.put=pf.prototype.put;pf.prototype.clear=pf.prototype.clear;
pf.prototype.remove=pf.prototype.Ra;pf.prototype.count=pf.prototype.count;ma("ydn.db.Key",Ad);Ad.prototype.id=Ad.prototype.jc;Ad.prototype.parent=Ad.prototype.kc;Ad.prototype.storeName=Ad.prototype.h;ma("ydn.db.KeyRange",Q);Q.upperBound=Q.upperBound;Q.lowerBound=Q.lowerBound;Q.bound=Q.bound;Q.only=Q.only;Q.starts=Id;ud.prototype.store_name=ud.prototype.a;ud.prototype.getStoreName=ud.prototype.h;yd.prototype.name=yd.prototype.name;yd.prototype.getKey=yd.prototype.c;yd.prototype.getValue=yd.prototype.w;
zd.prototype.name=zd.prototype.name;zd.prototype.getKeys=zd.prototype.sa;zd.prototype.getValues=zd.prototype.ab;function Df(a,b,c,d,e){if(!(b instanceof Q))if(x(b)&&u(c))b=Od(b,c,d,e);else if(null!=b){if(!(b instanceof Q))if(z(b))b=new Q(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new E("Invalid key range: "+b+" of type "+typeof b);}else b=null;this.a=b;this.$=a}Df.prototype.$="";Df.prototype.Y=function(a){if(this.$!=a.$)return null;a=null!=this.a&&null!=a.a?this.a.Y(a.a):this.a||a.a;return new Df(this.$,a)};function Ef(a,b,c,d){qd.call(this);this.b=c;this.a=c.getName();this.j=void 0;this.f=!1;this.fa=null;this.e=a;this.rb=b;this.xa=0;this.W=this.A=!1;this.M=d||4;this.ua=this.g=this.c=void 0;this.l=function(){throw new Yb;};this.r=function(){throw new Yb;};this.Mb=function(){}}C(Ef,qd);l=Ef.prototype;
l.pb=function(a,b,c,d,e){if(u(b)){a=this.b;var f,g=b;v(b)?(f=de(a,b),g=b.join(", ")):f=$d(a,b);if(!f)throw new E('require index "'+g+'" not found in store "'+a.getName()+'"');this.j=f.getName()}this.f=x(this.j);this.fa=c||null;this.xa=0;this.W=this.A=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.N=d;this.La=e;this.ua=this.g=this.c=void 0};l.N="";l.fa=null;l.unique=!1;l.reverse=!1;l.La=!0;l.logger=F("ydn.db.core.req.AbstractCursor");
function Ff(a,b){a.r(b);Gf(a);a.A=!0}l.P=function(a,b,c){null==a&&(L(this.logger,this+" finished."),this.A=!0);this.c=a;this.g=b;this.ua=c;this.xa++;this.A?(J(this.logger,this+" DONE."),this.l(),Gf(this)):(J(this.logger,this+" new cursor position {"+(this.f?this.c+", "+this.g:this.c)+"}"),this.l(this.c))};l.U=function(){this.e=null};l.toString=function(){return"Cursor:"+this.a+(u(this.j)?":"+this.j:"")+"["+(this.e?"":"~")+this.rb+"]"};
function Gf(a){null!=a.g?a.g=Dd(a.g):a.g=void 0;null!=a.c?a.c=Dd(a.c):a.c=void 0;a.Mb(a.W,a.c,a.g)}l.open=function(a,b,c,d){this.e=a;this.rb=b;this.A=this.W=!1;this.c=c;this.g=d;this.openCursor(this.c,this.g)};function Hf(a){a.W=!0;J(a.logger,a+": exit");Gf(a)}l.yb=function(){return this.xa};l.qc=function(){return this.c};l.p=function(){return this.f?this.g:this.c};l.w=function(){return this.La?this.p():this.ua};l.Qa=function(){};l.qa=function(){};
function If(a,b,c){J(a.logger,a+" restarting");a.A=!1;a.W=!1;a.openCursor(c,b)};function Jf(){};function W(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name must be a string, but "+a+" found.");this.e=a;this.c=b;this.f=g;this.i=!!this.c;if(u(d)&&!da(d))throw new E("reverse value must be a boolean, but "+typeof d+" found");if(u(e)&&!da(e))throw new E("unique value must be a boolean, but "+typeof e+" found");if(u(f)&&!da(f))throw new E("key_only value must be a boolean, but "+typeof f+" found");this.a=u(f)?f:!!x(this.c);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.j=
a;if(d=Kd(c))throw new E("Invalid key range: "+d);this.b=Gd(c);this.d=Kf;this.r=NaN}C(W,Jf);W.prototype.a=!0;function Lf(a,b,c){if(3<arguments.length)throw new E("too many argument");W.call(this,a,void 0,b,c,void 0,!0)}C(Lf,W);function Mf(a,b,c,d,e){if(!x(b))throw new E("index name must be string");W.call(this,a,b,c,d,e,!0)}C(Mf,W);function Nf(a,b,c){if(3<arguments.length)throw new E("too many argument");W.call(this,a,void 0,b,c,void 0,!1)}C(Nf,W);
function Of(a,b,c,d,e){if(!x(b))throw new E("index name must be string");W.call(this,a,b,c,d,e,!1)}C(Of,W);var Kf="init";l=W.prototype;l.logger=F("ydn.db.Iterator");l.h=function(){return this.e};l.gc=function(){return this.c};l.Nb=function(){return this.b?this.b instanceof Jd?this.b:Jd.bound(this.b.lower,this.b.upper,this.b.lowerOpen,this.b.upperOpen):null};l.ic=function(){return this.a};l.Zb=function(){return this.i};
l.clone=function(){var a=new W(this.e,this.c,this.b,this.Q(),this.pa(),this.a,this.f);a.r=this.r;return a};l.unique=function(a){return new W(this.e,this.c,this.b,this.Q(),a,this.a,this.f)};l.toJSON=function(){return{store:this.e,index:this.c,keyRange:this.b?Ed(this.b):null,direction:this.j}};
l.toString=function(){var a=u(this.f)?":"+this.f.join(","):u(this.c)?":"+this.c:"",a=a+Ld(this.b);this.d!=Kf&&(a+=this.d+"{"+this.g,this.i&&(a+=", "+this.l),a+="}");var b=this.i?"Index":"",b=b+(this.a?"Key":"Value");return b+"Iterator:"+this.e+a};l.Ob=function(a,b){var c=new W(this.e,this.c,this.b,this.Q(),this.pa(),this.a,this.f);c.g=a;c.l=b;c.d="rest";return c};l.reverse=function(){return new W(this.e,this.c,this.b,!this.Q(),this.pa(),this.a,this.f)};
l.Q=function(){return"prev"===this.j||"prevunique"===this.j};l.pa=function(){return"nextunique"===this.j||"prevunique"===this.j};l.Yb=function(){return this.d};l.load=function(a){a=a[0];a.pb(this.e,this.f||this.c,this.b,this.j,this.a);this.d="busy";var b=this;a.Mb=function(a,d,e){b.g=d;b.l=e;b.d=a?"rest":"done"};a.openCursor(this.g,this.l);return a};l.hc=function(){return this.g};l.p=function(){return this.l};
l.ib=function(a,b,c){a=a||Kf;"busy"==this.d?G(this.logger,this+": resetting state to "+a+" ignore during iteration"):(this.g=b,this.l=c,this.d=a)};l.stores=function(){return[this.e]};function Pf(a,b,c,d){if("transaction"in a)this.g=a,this.c=this.f=null;else if("objectStore"in a){if(this.g=null,this.f=a.db,this.c=a,!this.c.db.objectStoreNames.contains(b))throw new Be('store "'+b+'" not in transaction.');}else throw new Be("storage instance require.");this.i=b;this.j=c;this.l=d;this.b=[];this.a=0;this.d=!1}Pf.prototype.logger=F("ydn.db.con.IdbCursorStream");Pf.prototype.d=!1;
function Qf(a,b){a.a++;b.onsuccess=function(b){if(b=b.target.result){if(ea(a.l)){var d=b.value;a.l(b.primaryKey,null!=a.j?d[a.j]:d)}else G(a.logger,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.b.length)b["continue"](a.b.shift());else a.a--,0==a.a&&a.S&&a.S()}};b.onerror=function(){G(a.logger,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.a--;0==a.a&&a.S&&a.S()}}function Rf(a,b){0==a.b.length&&0==a.a?b():a.S=b}
function Sf(a){if(!a.d){var b=function(b,c){a.c=null;"complete"!==b&&G(a.logger,c.name+":"+c.message);J(a.logger,a+" transaction "+b)},c=function(b){var c=a.b.shift();J(a.logger,a+" transaction started for "+c);b=b.objectStore(a.i);Qf(a,b.openCursor(c))};if(a.c)J(a.logger,a+" using existing tx."),c(a.c);else if(a.f)J(a.logger,a+" creating tx from IDBDatabase."),a.e=a.f.transaction([a.i],Tc),a.e.oncomplete=function(a){b("complete",a)},a.e.onerror=function(a){b("error",a)},a.e.onabort=function(a){b("abort",
a)};else if(a.g)J(a.logger,a+" creating tx from ydn.db.con.IStorage."),a.d=!0,a.g.transaction(function(b){a.d=!1;c(b)},[a.i],Tc,b);else throw new Ee("no way to create a transaction provided.");}};function Tf(a,b,c){a&&a instanceof T?this.za=a:a&&a.db&&(this.za=null,Uf(this,a));if(!x(b))throw new E("a store name required.");this.c=b;if(u(c)&&!x(c))throw new E("projection index name must be a string.");this.Aa=c;this.ea=null;this.b=[];this.a=[];this.ta=!1}l=Tf.prototype;l.logger=F("ydn.db.Streamer");l.za=null;l.kb=null;l.ea=null;l.dc=function(a){this.kb=a};function Uf(a,b){if(b.db)a.ea=new Pf(b,a.c,a.Aa,ja(a.S,a));else throw new E("Invalid IndexedDB Transaction.");}
function Vf(a){var b=0<a.a.length;if(b&&!a.ta&&ea(a.kb)){var c=function(){Vf(a)},d=a.b.shift(),e=a.a.shift(),b=0<a.a.length,c=a.kb(d,e,b?c:null);b&&!c&&Vf(a)}}l.ta=!1;l.nc=function(a){if(this.ea){this.ta=!0;var b=this;Rf(this.ea,function(){a(b.b,b.a);b.b=[];b.a=[];b.ta=!1})}else a(this.b,this.a),this.b=[],this.a=[]};l.S=function(a,b){this.b.push(a);this.a.push(b);Vf(this)};
l.push=function(a,b){if(this.ta)throw new He("push not allowed after a collection is started");if(2<=arguments.length)this.S(a,b);else{if(!this.ea){if(!this.za)throw new He("Database connection is not setup.");var c=this.za.Ba();if(c)if("indexeddb"===c)this.ea=new Pf(this.za,this.c,this.Aa,ja(this.S,this));else throw new De(c);else throw new He("Database is not connected.");}c=this.ea;c.b.push(a);Sf(c)}};l.h=function(){return this.c};l.toString=function(){return"Streamer:"+this.c+(this.Aa||"")};function Wf(a,b){if(null!=a&&!("push"in a))throw new Be('output receiver object must have "push" method.');this.a=a||null;this.g=b;this.e=0;this.b=!1;this.d=a instanceof Tf&&!!a.Aa}Wf.prototype.logger=F("ydn.db.algo.AbstractSolver");
Wf.prototype.f=function(a,b){this.b=b[0].Q();for(var c=0;c<b.length;c++){if(!(b[c]instanceof W))throw new Ub("item at iterators "+c+" is not an iterator.");if(0<c&&this.b!=b[c].Q())throw new Ub("iterator at "+c+" must "+(this.b?"be reverse":"not be reverse"));}this.a instanceof Tf&&Uf(this.a,a);if(this.d&&(c=b[0].f)&&1<c.length&&c[c.length-1]!=this.a.Aa)throw new He("Output streamer projection field must be same as postfix field in the iterator");for(var d="{",c=0;c<b.length;c++)0<c&&(d+=", "),d+=
b.toString();d+="}";this.b&&(d+=" reverse");Pc(this.logger,this+" begin "+d);return!1};function Xf(a,b,c){var d,e=null!=d;if(!u(d)){d=c[0];for(var e=null!=d,f=1;e&&f<c.length;f++)null!=c[f]&&0==od(c[f],d)||(e=!1)}return e&&(a.e++,a.a&&(a.d?a.a.push(d,void 0):a.a.push(d)),u(a.g)&&a.e>=a.g)?[]:b}Wf.prototype.c=function(){return[]};function Yf(a,b,c,d){lf.call(this,a,b,c,d)}C(Yf,pf);l=Yf.prototype;l.logger=F("ydn.db.core.DbOperator");l.get=function(a,b){if(a instanceof W){var c=a.h(),d=S(this.b,c);if(!d)throw new E('store "'+c+'" not found.');var e=a.c;if(u(e)&&!ee(d,e))throw new E('index "'+e+'" not found in store "'+c+'".');L(this.logger,"getByIterator:"+a);var f=this.a.request("get:iter",[c]);O(f,function(){Zf(this,5,f,a,1)},this);return f}return Yf.s.get.call(this,a,b)};
l.keys=function(a,b,c,d,e,f,g){if(a instanceof W){var h=100;if(y(b)){if(h=b,1>h)throw new E("limit must be a positive value, but "+b);}else if(u(b))throw new E("limit must be a number,  but "+b);if(u(c))throw new E("offset must not be specified");L(this.logger,"keysByIterator:"+a);var k=this.a.request("keys:iter",[a.h()]);O(k,function(){a.i?Zf(this,1,k,a,h):Zf(this,2,k,a,h)},this);return k}return Yf.s.keys.call(this,a,b,c,d,e,f,g)};
l.count=function(a,b,c,d){if(a instanceof W){if(u(b)||u(c))throw new E("too many arguments.");L(this.logger,"countIterator:"+a);var e=this.a.request("count",[a.h()]);O(e,function(){Zf(this,6,e,a)},this);return e}return Yf.s.count.call(this,a,b,c,d)};
l.B=function(a,b,c,d,e,f){if(a instanceof W){var g;if(y(b)){if(g=b,1>g)throw new E("limit must be a positive value, but "+g);}else if(u(b))throw new E("limit must be a number, but "+b);if(u(c))throw new E("offset must not be specified");L(this.logger,"listByIterator:"+a);var h=this.a.request("values:iter",[a.h()]);O(h,function(){a.a?Zf(this,2,h,a,g):Zf(this,4,h,a,g)},this);return h}return Yf.s.B.call(this,a,b,c,d,e,f)};
l.ob=function(a,b,c){if(!v(b))throw new E("iterators argument must be an array, but "+b+" of type "+typeof b+" found");for(var d=0;d<b.length;d++)if(!(b[d]instanceof W))throw new E("Iterator at "+d+" must be cursor range iterator.");c=c||Tc;for(var e=[],d=0;d<b.length;d++)for(var f=b[d].stores(),g=0;g<f.length;g++)0<=Ka(e,f[g])||e.push(f[g]);L(this.logger,this+": scan for "+b.length+" iterators on "+e);var h=this,d=this.a.request("scan",e);this.a.R(d,function(c,d,e){function f(){for(var a=0,e=0;e<
b.length;e++){var n=b[e],p=[U(h).b(c,d,n.h())],n=n.load(p);n.r=g;n.l=ka(t,a);ba[e]=n;I[a]=e;a++}H=b.length}function g(a){for(var b=0;b<ba.length;b++)Hf(ba[b]);Ra(ba);L(h.logger,A+" error");e(a,!0)}function t(c,d){if(B)throw new Ee;Z++;var f=Z===H,g=I[c],k=b[g],m=ba[g],g=m.p(),m=m.w();K[c]=d;Y[c]=k.i?k.a?g:m:k.a?d:m;if(f){var p;a instanceof Wf?p=a.c(K,Y):p=a(K,Y);f=[];k=[];g=[];m=[];if(v(p))for(var q=0;q<p.length;q++)!0===p[q]?g[q]=1:!1===p[q]?m[q]=!0:k[q]=p[q];else if(null===p)f=[];else if(u(p))if(z(p)){f=
["advance","continue","continuePrimary","restart"];for(q in p)if(!(0<=Ka(f,q)))throw new Xb('Unknown attribute "'+q+'" in cursor advancement object');f=p.continuePrimary||[];k=p["continue"]||[];g=p.advance||[];m=p.restart||[]}else throw new Xb("scan callback output");else for(f=[],q=0;q<b.length;q++)u(I[q])&&(g[q]=1);for(q=Z=p=0;q<b.length;q++)null!=f[q]||u(k[q])||null!=m[q]||null!=g[q]||Z++;for(q=0;q<b.length;q++)if(null!=f[q]||u(k[q])||null!=m[q]||null!=g[q]){var t=I[q];if(!u(t))throw new Ge(q+
" is not an iterator.");var t=b[t],Jb=ba[q];if(null==K[q]){var Ne=q+"/"+b.length;if(null!=g[q])throw new He(Jb+" "+Ne+" must not advance "+g[q]+" steps");if(u(k[q]))throw new He(Jb+" "+Ne+" must not continue to key "+k[q]);if(null!=f[q])throw new He(Jb+" "+Ne+" must not continue to primary key "+f[q]);}K[q]=void 0;Y[q]=void 0;if(null!=m[q])If(Jb);else if(u(k[q]))Jb.qa(k[q]);else if(null!=f[q])Jb.Qa(f[q]);else if(null!=g[q])Jb.advance(1);else throw new Ee(t+": has no action");p++}if(0==p){for(p=0;p<
ba.length;p++)Hf(ba[p]);B=!0;Ra(ba);L(h.logger,"success "+A);e(void 0)}}}var A=d+" "+h+" scanning";J(h.logger,A);var B=!1,H,I=[],K=[],Y=[],ba=[],Z=0;a instanceof Wf?a.f(c,b,function(){f()})||f():f()},e,c);return d};
l.open=function(a,b,c,d){if(!(b instanceof W))throw new E("Second argument must be cursor range iterator.");for(var e=b.stores(),f=0;f<e.length;f++)if(!S(this.b,e[f]))throw new E('Store "'+e[f]+'" not found.');c=c||Tc;var g=this,h=this.a.request("open",b.stores(),c);L(this.logger,"open:"+c+" "+b);O(h,function(c){var e=P(h);L(g.logger,e+" iterating "+b);for(var f=b.stores(),p=[],q=0;q<f.length;q++)p[q]=U(g).b(c,e,f[q]);var t=b.load(p);t.r=function(a){N(h,a,!0)};t.l=function(b){null!=b?(b=a.call(d,
t),!0===b?If(t):z(b)?!0===b.restart?If(t,b["continue"],b.continuePrimary):null!=b["continue"]?t.qa(b["continue"]):null!=b.continuePrimary?t.Qa(b.continuePrimary):(Hf(t),N(h,void 0)):null===b?(Hf(t),N(h,void 0)):null!=b?t.qa(b):t.advance(1)):(Hf(t),N(h,void 0))}},this);return h};
l.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new E('Store "'+e+'" not found.');e=this.a.request("map",d);J(this.logger,"map:"+a);this.a.R(e,function(d,e,f){J(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],p=0;p<m.length;p++)n[p]=U(c).b(d,e,m[p]);var q=a.load(n);q.r=function(a){f(a,!1)};q.l=function(c){if(null!=c){var d;a.i?a.a?d=c:d=q.p():a.a?d=c:d=q.w();b(d);q.advance(1)}else f(void 0),b=null}},d,Tc);return e};
l.reduce=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new E('Store "'+f+'" not found.');f=this.a.request("reduce",e);var h=z(c)?oe(R(c)):c;L(this.logger,"reduce:"+a);this.a.R(f,function(c,e,f){for(var g=a.stores(),q=[],t=0;t<g.length;t++)q[t]=U(d).b(c,e,g[t]);var A=a.load(q);A.r=function(a){f(a,!0)};var B=0;A.l=function(c){if(null!=c){var d;a.i?a.a?d=c:d=A.p():a.a?d=c:d=A.w();h=b(h,d,B++);A.advance(1)}else f(h)}},e,Tc);return f};
function $f(a,b,c,d){var e=c.h(),f=c.c||null,g=d||100;L(a.logger,"listIter:"+b+" "+c+(d?" limit="+g:"")+"");var h=a.a.request("values:iter:index",[e]),k="done"==c.d||c.d==Kf?[]:[c.g,c.p()];O(h,function(){U(this).O(h,b,e,f,c.Nb(),g,0,c.Q(),c.pa(),k)},a);h.D(function(){null!=k[0]?c.ib("rest",k[0],k[1]):c.ib()});return h}
function Zf(a,b,c,d,e){var f=[],g=c.a,h=P(c),k=h+" "+b+"ByIterator "+d;0<e&&(k+=" limit "+e);L(a.logger,k);for(var m=U(a),n=[],p=d.stores(),q=0;q<p.length;q++)n[q]=m.b(g,h,p[q]);var t=d.load(n);t.r=function(a){Hf(t);N(c,a,!0)};var A=0,B=!1;t.l=function(d){B||(J(a.logger,k+" starting"),B=!0);null!=d?(t.p(),A++,1==b?f.push(d):2==b?f.push(t.p()):3==b?f.push([d,t.p()]):6!=b&&f.push(t.w()),5==b?(Hf(t),N(c,f[0])):6==b||!u(e)||A<e?t.qa():(L(a.logger,"success:"+k+" yields "+f.length+" records"),Hf(t),N(c,
f))):(L(a.logger,"success:"+k+" yields "+f.length+" records"),Hf(t),N(c,5==b?f[0]:6==b?A:f))}};function ag(a,b,c){V.call(this,a,b,c)}C(ag,V);l=ag.prototype;l.ka=function(a,b){return new Yf(this,this.c,a,b)};l.open=function(a,b,c,d){return this.a.open(a,b,c,d)};l.pc=function(a,b){return this.a.ob(a,b)};l.map=function(a,b){return this.a.map(a,b)};l.reduce=function(a,b,c){return this.a.reduce(a,b,c)};function bg(a){if(!x(a))throw new Be;this.I=a;this.c=M;this.b=[];cg(this,a);this.ya=""}l=bg.prototype;l.I="";l.Ab=NaN;l.Db=NaN;l.jb=!1;l.ya="";
function cg(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.d=c[1].toUpperCase();if("SELECT"==a.d)a.c=Tc;else if("INSERT"==a.d)a.c=M;else if("UPDATE"==a.d)a.c=M;else if("DELETE"==a.d)a.c=M;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.e=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.e=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new Ye("missing closing parentheses"));a.j=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.f=d.substring(c+6).trim(),d=d.substring(0,c)):a.f="";a.b=d.trim().split(",").map(function(a){a=Ca(a,'"');a=Ca(a,"'");return a.trim()})}}}function dg(a){if("*"==a.j)return null;a=a.j.split(",");return a=a.map(function(a){return Ca(a.trim(),'"')})}l.toJSON=function(){return{sql:this.I}};
function eg(a){function b(a){return Qa(c,function(b){return b.$==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.f.length)for(var e=a.f.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var k=h[1].trim(),k=Ca(k,'"'),k=Ca(k,"'");if(0<k.length){var m=h[3].trim();0==m.lastIndexOf('"',0)?m=Ca(m,'"'):0==m.lastIndexOf("'",0)?m=Ca(m,"'"):m=parseFloat(m);h=new Df(k,h[2],m);k=b(k);if(0<=k){if(c[k]=c[k].Y(h),!c[k])return a.ya='where clause "'+g+'" conflict',null}else c.push(h)}else return a.ya=
'Invalid clause "'+g+'"',null}else return a.ya='Invalid clause "'+g+'"',null}return c}l.toString=function(){return"query:"+this.I};function fg(a,b,c,d){Ef.call(this,a,b,c,d);this.d=null}C(fg,Ef);l=fg.prototype;l.logger=F("ydn.db.core.req.IDBCursor");l.Ga=function(a){(a=a.target.result)?this.P(a.key,a.primaryKey,a.value):this.P()};
l.openCursor=function(a,b){function c(a,b,c){p.d=n;p.d.onsuccess=ja(p.Ga,p);p.P(a,p.f?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");J(this.logger,d);var e=this.fa,d=this.e.objectStore(this.a),f=x(this.j)?d.index(this.j):null;if(u(a))var g=f?!u(b):!0,h=e?e.lower:void 0,k=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=Fd(this.reverse?new Q(h,a,m,g):new Q(a,k,g,e));var n;this.La?f?n=null!=this.N?f.openKeyCursor(e,this.N):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.N?d.openCursor(e,this.N):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.N?f.openCursor(e,this.N):null!=e?f.openCursor(e):f.openCursor():n=null!=this.N?d.openCursor(e,this.N):null!=e?d.openCursor(e):d.openCursor();var p=this;n.onerror=function(a){var b=n.error;a.preventDefault();Ff(p,b)};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=Vc.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=
b)if(Vc.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.d=n,p.d.onsuccess=ja(p.Ga,p))};l.bb=function(){return!!this.d};l.update=function(a){var b=this.d.result;if(b){var c=new D;a=b.update(a);a.onsuccess=function(a){c.callback(a.target.result)};a.onerror=function(a){a.preventDefault();c.m(a)};return c}throw new Ue("cursor gone");};
l.clear=function(){var a=this.d.result;if(a){var b=new D,a=a["delete"]();a.onsuccess=function(){b.callback(1)};a.onerror=function(a){a.preventDefault();b.m(a)};return b}throw new Ue("cursor gone");};l.advance=function(a){var b=this.d.result;if(1==a)b["continue"]();else b.advance(a)};
l.Qa=function(a){var b=this.d.result,c=Vc.cmp(a,b.primaryKey);if(c!=(this.reverse?-1:1))throw new Yb('continuing primary key "'+a+'" must '+(this.reverse?"lower":"higher")+' than current primary key "'+b.primaryKey+'"');var d=this;this.d.onsuccess=function(e){if(b=e.target.result)if(c=Vc.cmp(b.primaryKey,a),0==c||1==c&&!d.reverse||-1==c&&d.reverse)d.d.onsuccess=ja(d.Ga,d),d.P(b.key,d.f?b.primaryKey:void 0,b.value);else b["continue"]();else d.d.onsuccess=ja(d.Ga,d),d.P()};b["continue"]()};
l.qa=function(a){var b=this.d.result;if(null!=a)b["continue"](a);else b["continue"]()};l.U=function(){fg.s.U.call(this);this.d=null};l.toString=function(){return"IDB"+fg.s.toString.call(this)};function gg(a,b){this.a=b}C(gg,$e);l=gg.prototype;l.logger=F("ydn.db.crud.req.IndexedDb");l.Ua=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?N(a,d):c(e)};f.onerror=function(b){b.preventDefault();N(a,f.error,!0)}}var d=[];0==b.length?N(a,[]):c(0)};
l.V=function(a,b,c,d,e,f){function g(t){if(null==e[t])if(J(n.logger,"empty object at "+t+" of "+e.length),k++,k==e.length)N(a,h,m);else{var B=t+10;B<e.length&&g(B)}var H,B=e[t];H=f&&null!=f[t]?b?q.put(B,f[t]):q.add(B,f[t]):b?q.put(B):q.add(B);H.onsuccess=function(b){k++;h[t]=b.target.result;k==e.length?N(a,c?h[0]:h,m):(b=t+10,b<e.length&&g(b))};H.onerror=function(b){k++;var f=H.error;J(n.logger,P(a)+p+' request to "'+d+'" cause '+f.name+' for object "'+pe(e[t])+'" at index '+t+" of "+e.length+" objects.");
h[t]=f;m=!0;b.preventDefault();k==e.length?N(a,c?h[0]:h,m):(b=t+10,b<e.length&&g(b))}}var h=[],k=0,m=!1,n=this,p=b?"put":"add",q=a.a.objectStore(d);J(this.logger,P(a)+" "+p+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var t=0;10>t&&t<e.length;t++)g(t);else N(a,[])};
l.fb=function(a,b,c){function d(k){var n=c[k],p=n.h(),q=a.a.objectStore(p),t;t=null===q.keyPath?q.put(b[k],n.id):q.put(b[k]);t.onsuccess=function(c){f++;e[k]=c.target.result;f==b.length?N(a,e,g):(c=k+10,c<b.length&&d(c))};t.onerror=function(c){f++;G(h.logger,"request result "+c.name+' error when put keys to "'+p+'" for object "'+pe(b[k])+'" at index '+k+" of "+b.length+" objects.");e[k]=t.error;g=!0;c.preventDefault();f==b.length?N(a,e,g):(c=k+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,h=this;J(this.logger,
P(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var k=0;10>k&&k<b.length;k++)d(k);else N(a,e,g)};
l.Hb=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",n),d=!1,t;-1==b?(d=!0,t=e.substring(n)):(t=e.substring(n,b),n=b+1);for(var b=t.split(f),K=0;K<p.length;K++){var Y=b[K];q[K]&&(q[K]==Rd?Y=Ca(Y,'"'):"INTEGER"==q[K]?Y=parseInt(Y,10):"NUMERIC"==q[K]&&(Y=parseFloat(Y)));a[p[K]]=Y}var ba=k.put(a);ba.onsuccess=function(a){m.push(a.target.result);d?c(m):g()};ba.onerror=function(a){"DataError"==a.name&&(a=new Se(h+": "+t.substring(0,70)));a.preventDefault();c(ba.error,!0)}}var h=S(this.a,d),
k=a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),q=[];for(a=0;a<p.length;a++){var t=$d(h,p[a]);t?q[a]=t.type:p[a]==h.keyPath&&(q[a]=h.type)}n++;J(this.logger,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
l.gb=function(a,b,c){var d=a.a.objectStore(b);J(this.logger,P(a)+" clearById: "+b+" "+c);var e=d.openCursor(Jd.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){N(a,1)};c.onerror=function(){N(a,c.error,!0)}}else N(a,0)};e.onerror=function(b){b.preventDefault();N(a,e.error,!0)}};
l.Jb=function(a,b){function c(h){h++;if(h>=b.length)0<g.length?N(a,g,!0):N(a,d);else{b[h].h()!=e&&(e=b[h].h(),f=a.a.objectStore(e));var k=f["delete"](b[h].id);k.onsuccess=function(){d++;c(h)};k.onerror=function(a){a.preventDefault();g[h]=k.error;c(h)}}}var d=0,e,f;J(this.logger,P(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
l.hb=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);J(this.logger,P(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,h=d["delete"](c);h.onsuccess=function(){N(a,e)};h.onerror=function(){N(a,h.error,!0)}};e.onerror=function(b){b.preventDefault();N(a,e.error,!0)}};l.wb=function(a,b,c){var d=a.a.objectStore(b);J(this.logger,P(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){N(a,void 0)};e.onerror=function(b){b.preventDefault();N(a,e.error,!0)}};
l.Ib=function(a,b,c,d){var e=a.a.objectStore(b).index(c);J(this.logger,P(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),h=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){h++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?N(a,f,!0):N(a,h)};g.onerror=function(b){b.preventDefault();N(a,g.error,!0)}};
l.Ta=function(a,b){var c=b.length,d=0;J(this.logger,P(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&N(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&N(a,f.error,!0)}}};
l.Za=function(a,b,c){var d=this;J(this.logger,P(a)+b+":"+c);var e=a.a.objectStore(b),f=e.get(c);f.onsuccess=function(b){J(d.logger,P(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&ic&&x(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),k=f.length,m=new Uint8Array(k),n=0;n<k;++n)m[n]=f.charCodeAt(n);
N(a,new Blob([m.buffer],{type:b}))}else N(a,b.target.result)};f.onerror=function(b){b.preventDefault();N(a,f.error,!0)}};
l.Bb=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==h)N(a,e);else{var m=b+10;m<h&&d(m)}var n;n=g.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==h?N(a,e):(c=b+10,c<h&&d(c))};n.onerror=function(b){f++;b.preventDefault();N(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.a.objectStore(b),h=c.length;J(this.logger,P(a)+" "+b+":"+h+" ids");if(0<h)for(b=0;10>b&&b<h;b++)d(b);else N(a,[])};
l.Cb=function(a,b){function c(f){var h=b[f],k=a.a.objectStore(h.h()).get(h.id);k.onsuccess=function(h){e++;d[f]=h.target.result;e==b.length?N(a,d):(h=f+10,h<b.length&&c(h))};k.onerror=function(b){e++;b.preventDefault();N(a,k.error,!0)}}var d=[];d.length=b.length;var e=0;J(this.logger,P(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else N(a,[])};
l.Fa=function(a,b,c,d,e){if(d&&e)throw new Xb("unique count not available in IndexedDB");e=a.a.objectStore(b);b=P(a)+" "+b+(d?":"+d:"")+(c?":"+R(c):"");J(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){N(a,b.target.result)};f.onerror=function(b){b.preventDefault();N(a,f.error,!0)}};
l.O=function(a,b,c,d,e,f,g,h,k,m){var n=[],p=a.a.objectStore(c),q=h?k?"prevunique":"prev":k?"nextunique":"next";c=P(a)+" "+b+" "+c+(d?":"+d:"")+(e?R(e):"");h&&(c+=" reverse");k&&(c+=" unique");if(m&&u(m[0])){k=d?!u(m[1]):!0;var t=m[0],A=e?e.lower:void 0,B=e?e.upper:void 0,H=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=Fd(h?new Q(A,t,H,k):new Q(t,B,k,e));c+=" starting from "+R(m[0]);u(m[1])&&(c+=", "+R(m[1]))}J(this.logger,c);var I;I=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,q):
d?p.index(d).openCursor(e,q):p.openCursor(e,q);var K=!1;I.onsuccess=function(c){if(c=c.target.result){if(!K){if(0<g){K=!0;c.advance(g);return}if(m&&d&&u(m[0]))if(u(m[1])){var e=Vc.cmp(c.key,m[0]),k=h?-1:1;if(0==e){e=Vc.cmp(c.primaryKey,m[1]);if(0==e){K=!0;c["continue"]();return}if(e==k)K=!0;else{c["continue"]();return}}else K=!0}else K=!0;else K=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(k={},d&&(k[d]=c.key),p.keyPath?k[p.keyPath]=c.primaryKey:k._ROWID_=c.primaryKey,n.push(k)):4==b?n.push(c.value):
n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=Dd(c.key),m[1]=Dd(c.primaryKey)),N(a,n)}else m&&(m[0]=void 0,m[1]=void 0),N(a,n)};I.onerror=function(b){b.preventDefault();N(a,I.error,!0)}};function hg(a,b){this.a=b}C(hg,gg);hg.prototype.logger=F("ydn.db.core.req.IndexedDb");hg.prototype.b=function(a,b,c,d){c=S(this.a,c);return new fg(a,b,c,d)};function ig(a,b){this.a=b;this.c=a}ig.prototype.logger=F("ydn.db.sql.req.nosql.Node");ig.prototype.toJSON=function(){return{sql:this.a}};ig.prototype.toString=function(){return"idb.Node:"};
ig.prototype.b=function(a,b){var c=Sa(this.a.b)[0],d=this.a.g,e=this.a.Ab,e=isNaN(e)?100:e,f=this.a.Db,f=isNaN(f)?0:f,g=this.a.i,h=dg(this.a),k=null,m=this.a.jb;if(0==d.length)k=null;else if(1==d.length)k=Gd(d[0].a);else throw new Vb("too many conditions.");null===h||md(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=h.length;if(1==b)return Wc(a,h[0]);for(var c={},d=0;d<b;d++)c[h[d]]=Wc(a,h[d]);return c}));c(d,b)});var d=0<d.length?d[0].$:void 0,n=P(a)+" executing on"+c;d&&(n+=":"+d);n+=" "+
Ld(k);L(this.logger,n);g&&g!=this.c.keyPath?b.O(a,4,c,g,k,e,f,m,!1):u(d)&&d!=this.c.keyPath?b.O(a,4,c,d,k,e,f,m,!1):b.O(a,4,c,null,k,e,f,m,!1)};function jg(a,b){ig.call(this,a,b)}C(jg,ig);
jg.prototype.b=function(a,b){var c,d=Sa(this.a.b)[0],e=this.a.g,f=null;if(0==e.length)f=null;else if(1==e.length)f=Gd(e[0].a);else throw new Vb("too many conditions.");var g=this.a.e,e=0<e.length?e[0].$:void 0,h=P(a)+" executing "+g+" on "+d;e&&(h+=":"+e);h+=" "+Ld(f);L(this.logger,h);if("COUNT"==g)f?b.Fa(a,d,f,e,!1):b.Fa(a,d,null,void 0,!1);else{var k,h=dg(this.a);if(!h||0==h.length)throw new He("field name require for reduce operation: "+g);h=h[0];if("MIN"==g)k=kg(h);else if("MAX"==g)k=lg(h);else if("AVG"==
g)c=0,k=mg(h);else if("SUM"==g)c=0,k=ng(h);else throw new Ce(g);var m;u(e)?m=new Of(d,e,f):m=new Nf(d,f);var d=b.b(a.a,P(a),d,4),n=m.load([d]);n.r=function(b){N(a,b,!0)};var p=0;n.l=function(b){null!=b?(b=m.a?n.p():n.w(),c=k(b,c,p),n.advance(1),p++):N(a,c)}}};function mg(a){return function(b,c,d){u(c)||(c=0);return(c*d+b[a])/(d+1)}}function ng(a){return function(b,c){return c+b[a]}}function kg(a){return function(b,c){var d=b[a];return u(c)?c<d?c:d:d}}
function lg(a){return function(b,c){var d=b[a];return u(c)?c>d?c:d:d}};function mf(a,b){this.a=b}C(mf,hg);mf.prototype.logger=F("ydn.db.sql.req.IndexedDb");
mf.prototype.executeSql=function(a,b,c){if(c){for(var d=0;d<c.length;d++)b.I=b.I.replace("?",c[d]);cg(b,b.I)}b.g=eg(b);if(b.g){c=b.a.length;if(d=/OFFSET\s+(\d+)/i.exec(b.a))b.Db=parseInt(d[1],10),c=b.a.search(/OFFSET/i);if(d=/LIMIT\s+(\d+)/i.exec(b.a))b.Ab=parseInt(d[1],10),d=b.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(b.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(b.jb="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):b.jb=!1,b.i=Ca(Ca(c,'"'),"'")):b.i=void 0;
c=""}else c=b.ya;if(c)throw new Ye(c);c=Sa(b.b);if(1==c.length){d=S(this.a,c[0]);if(!d)throw new Ve(c[0]);var e=dg(b);if(e)for(var f=0;f<e.length;f++)if(!ee(d,e[f]))throw new Ve('Index "'+e[f]+'" not found in '+c[0]);var g;b.e?g=new jg(d,b):g=new ig(d,b);g.b(a,this)}else throw new Ce(b.I);};function og(a,b,c,d){Ef.call(this,a,b,c,d);this.F=null;this.d=this.i=void 0}C(og,Ef);l=og.prototype;l.logger=F("ydn.db.core.req.WebsqlCursor");l.p=function(){return this.d};l.pb=function(a,b,c,d,e){og.s.pb.call(this,a,b,c,d,e);this.F=x(b)?$d(this.b,b):null};l.w=function(){return this.t};function pg(a,b){a.i=void 0;a.d=void 0;a.t=void 0;if(u(b))if(z(b)){var c=Sd(b[a.b.e],a.b.type);a.d=c;if(a.f){var d=$d(a.b,a.j);a.i=Sd(b[a.j],d.type)}else a.i=c;a.t=a.La?c:qg(b,a.b)}else a.t=b}
function rg(a,b,c){$d(a.b,a.j);var d=[],e=a.j,f=a.fa,g=a.i;if(null!=f){var h=f.lower,k=f.upper,m=f.lowerOpen,n=f.upperOpen;a.reverse?k=null!=k&&-1==od(k,g)?k:g:h=null!=h&&1==od(h,g)?h:g;null!=h&&null!=k?f=Q.bound(h,k,!!m,!!n):f=null!=h?Jd.lowerBound(h,!!m):Jd.upperBound(k,!!n)}else f=a.reverse?Jd.upperBound(g):Jd.lowerBound(g);e=Zd(a.b,d,a.M,e,f,a.reverse,a.unique);c=a.reverse?Jd.upperBound(c,!1):Jd.lowerBound(c,!1);c=Zd(a.b,d,a.M,a.b.e,c,a.reverse,a.unique);e.n=e.n?e.n+(" AND "+c.n):c.n;c="SELECT "+
e.select+" FROM "+e.K+(e.n?" WHERE "+e.n:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.L;c+=" LIMIT 1";J(a.logger,a+": continuePrimary:  SQL: "+c+" : "+R(d));a.e.executeSql(c,d,function(c,d){0<d.rows.length?pg(a,d.rows.item(0)):pg(a);b.call(a,a.i,a.d,a.t);b=null},function(c,d){G(a.logger,"get error: "+d.message);Ff(a,d);pg(a);b.call(a,a.d,a.i,a.t);b=null;return!1})}
function sg(a,b,c,d,e,f){var g=!d;d=[];a.f&&null!=f&&null!=c?c=ce(a.b,a.M,d,a.F.getName(),a.fa,c,g,f,a.reverse,a.unique):null!=c?(f=a.F?a.F.getName():null,c=be(a.b,a.M,d,f,a.fa,a.reverse,a.unique,c,g)):(c=Yd(a.b,d,a.M,a.f?a.F.d:a.b.e,a.fa,a.reverse,a.unique),a.f&&(c+=", "+a.b.d+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);J(a.logger,a+": continue:  SQL: "+c+" : "+R(d));a.e.executeSql(c,d,function(c,d){0<d.rows.length?pg(a,d.rows.item(0)):pg(a);b.call(a,a.i,a.d,a.t);b=null},function(c,d){G(a.logger,
"get error: "+d.message);Ff(a,d);pg(a);b.call(a,a.d,a.i,a.t);b=null;return!1})}l.bb=function(){return!!this.e};l.update=function(a){if(!this.bb())throw new Ue;var b=new D,c=this.p();a=je(this.b,a,c);var d="REPLACE INTO "+ae(this.b)+" ("+a.xb.join(", ")+") VALUES ("+a.Lb.join(", ")+")";J(this.logger,this+': update "'+d+'" : '+R(a.B));this.e.executeSql(d,a.B,function(){b.callback(c)},function(a,c){b.m(c);return!1});return b};
l.advance=function(a){var b=this.i,c=this.d,d=!0;null==this.i||this.f&&null==this.d||(--a,d=!1);sg(this,function(a,d,g){var h=null!=b&&null!=a&&0==od(b,a);if(this.f){var k=null!=d&&null!=c&&0==od(d,c);if(h&&k)throw new Yb("current: "+b+";"+c+" next: "+a+";"+d);}else if(h)throw new Yb("current: "+b+" next: "+a);this.P(a,d,g)},this.i,d,a,this.d)};l.qa=function(a){null!=a?sg(this,this.P,a,!0):this.advance(1)};l.openCursor=function(a,b){sg(this,this.P,a,!1,0,b)};
l.clear=function(){if(!this.bb())throw new Ue;var a=new D,b=this.b.e,b="DELETE FROM "+ae(this.b)+" WHERE "+b+" = ?",c=[this.p()];J(this.logger,this+': clear "'+b+'" : '+R(c));this.e.executeSql(b,c,function(b,c){a.callback(c.rowsAffected)},function(b,c){a.m(c);return!1});return a};l.Qa=function(a){var b=od(a,this.d);if(0==b||1==b&&this.reverse||-1==b&&!this.reverse)throw new He(this+" to continuePrimaryKey  from "+this.d+" to "+a+" on "+this.N+" direction is wrong");rg(this,this.P,a)};
l.toString=function(){return"WebSql"+og.s.toString.call(this)};function tg(a,b){this.a=b}C(tg,$e);l=tg.prototype;l.logger=F("ydn.db.crud.req.WebSql");
function qg(a,b){if(b.ga&&!b.keyPath&&0==b.a.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return oe(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),g=0;g<e;++g)f[g]=d.charCodeAt(g);return new Blob([f.buffer],{type:c})}c=a._default_?oe(a._default_):{};null!=b.keyPath&&(d=Sd(a[b.keyPath],b.type),null!=d&&ie(b,c,d));for(d=0;d<b.a.length;d++)if(e=b.index(d),
f=e.d,"_default_"!=f&&!e.f&&!e.multiEntry&&("DATE"==e.type||b.ga)&&(g=Sd(a[f],e.type),u(g)))for(var f=c,h=0;h<e.a.length;h++)h==e.a.length-1?f[e.a[h]]=g:z(f[e.a[h]])||(f[e.a[h]]={});return c}l.Hb=function(){throw new Wb("putData");};
l.V=function(a,b,c,d,e,f){function g(b,d){if(null==e[b])if(J(m.logger,"empty object at "+b+" of "+e.length),p++,p==e.length)L(m.logger,q+" success "+q),N(a,n,t);else{var H=b+2;H<e.length&&g(H,d)}var I;I=u(f)?je(h,e[b],f[b]):je(h,e[b]);H=k+ae(h)+" ("+I.xb.join(", ")+") VALUES ("+I.Lb.join(", ")+");";J(m.logger,P(a)+" SQL: "+H+" PARAMS: "+I.B+" REQ: "+b+" of "+e.length);d.executeSql(H,I.B,function(f,q){function H(b,c){var e="ydn.db.me:"+h.getName()+":"+b.getName(),e=k+Fa(e)+" ("+h.d+", "+b.c+") VALUES (?, ?)",
f=[Nd(Z,h.type),Nd(c,b.type)];J(m.logger,P(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){G(m.logger,"multiEntry index insert error: "+b.message);return!1})}p++;var Z=u(I.key)?I.key:q.insertId;1>q.rowsAffected&&(t=!0,Z=new Re(Z+" no-op"));for(var gb=0,Hd=h.a.length;gb<Hd;gb++){var nb=h.index(gb);if(nb.multiEntry)for(var Ib=Wc(e[b],nb.keyPath),li=(Ib?Ib.length:0)||0,Me=0;Me<li;Me++)H(nb,Ib[Me])}c?N(a,Z):(n[b]=Z,p==e.length?N(a,n,t):(gb=b+2,gb<e.length&&g(gb,f)))},function(d,
f){p++;t=!0;6==f.code?f.name="ConstraintError":G(m.logger,"error: "+f.message+" "+q);if(c)N(a,f,!0);else if(n[b]=f,p==e.length)J(m.logger,"success "+q),N(a,n,t);else{var h=b+2;h<e.length&&g(h,d)}return!1})}b=!b;var h=S(this.a,d),k=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.a;var m=this,n=[],p=0,q=P(a)+" inserting "+e.length+" objects.",t=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)g(b,d);else L(this.logger,"success"),N(a,[])};
l.fb=function(a,b,c){if(0==c.length)N(a,[]);else{for(var d=[],e=0,f=0,g=this,h=function(h,k){var m=[];J(g.logger,"put "+k.length+" objects to "+h);for(var n=ge(S(g.a,h)),p=n?void 0:[],q=0;q<k.length;q++)m.push(b[k[q]]),n||p.push(c[k[q]].id);n=jd(a);Ob(n,function(b){for(var c=0;c<k.length;c++)d[k[c]]=b[c];e++;e==f&&N(a,d)},function(){e++;e==f&&N(a,d,!0)});g.V(n,!1,!1,h,m,p)},k="",m=[],n=[],p=0;p<c.length;p++){var q=c[p].h(),t=c[p].id;q!=k?(f++,0<m.length&&h(k,m),m=[p],n=[t],k=q):(m.push(p),n.push(t))}0<
m.length&&h(k,m)}};l.Za=function(a,b,c){var d=a.a,e=S(this.a,b),f=this;b=e.d;c=[Nd(c,e.type)];b="SELECT * FROM "+ae(e)+" WHERE "+b+" = ?";var g=P(a)+" SQL: "+b+" PARAMS: "+c;J(this.logger,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=qg(d,e),N(a,d)):(L(f.logger,"success no result: "+g),N(a,void 0))}else L(f.logger,"success no result: "+g),N(a,void 0)},function(b,c){G(f.logger,"error: "+g+" "+c.message);N(a,c,!0);return!1})};
l.Bb=function(a,b,c){function d(b,e){var p=k.d,q=[Nd(c[b],k.type)],t="SELECT * FROM "+ae(k)+" WHERE "+p+" = ?";J(f.logger,"SQL: "+t+" PARAMS: "+q);e.executeSql(t,q,function(e,f){h++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[b]=qg(n,k))}else g[b]=void 0;h==c.length?N(a,g):(n=b+10,n<c.length&&d(n,e))},function(e,k){h++;G(f.logger,"error: "+t+" "+k.message);if(h==c.length)N(a,g);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.a,f=this,g=[],h=0,k=S(this.a,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else L(f.logger,"success"),N(a,[])};
l.Cb=function(a,b){function c(d,h){var n=b[d],p=n.h(),q=S(e.a,p),p=Bd(n),n=q.d,p=[Nd(p,q.type)],t="SELECT * FROM "+ae(q)+" WHERE "+n+" = ?";J(e.logger,"SQL: "+t+" PARAMS: "+p);h.executeSql(t,p,function(h,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=qg(n,q))}else f[d]=void 0;g==b.length?(J(e.logger,"success "+t),N(a,f)):(n=d+10,n<b.length&&c(n,h))},function(b,c){N(a,c,!0);return!1})}var d=a.a,e=this,f=[],g=0;if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h,d);else J(this.logger,
"success"),N(a,[])};
l.Ta=function(a,b){function c(d,g){function h(a){a="ydn.db.me:"+k.getName()+":"+a.getName();a="DELETE FROM  "+Fa(a);J(e.logger,"SQL: "+a);g.executeSql(a,[])}var k=S(e.a,b[d]),m="DELETE FROM  "+ae(k);J(e.logger,"SQL: "+m+" PARAMS: []");g.executeSql(m,[],function(g){d==b.length-1?(J(e.logger,"success "+m),N(a,b.length)):c(d+1,g)},function(b,c){N(a,c,!0);return!1});for(var n=0,p=k.a.length;n<p;n++){var q=k.index(n);q.multiEntry&&h(q)}}var d=a.a,e=this;0<b.length?c(0,d):(J(this.logger,"success"),N(a,
0))};
l.Jb=function(a,b){function c(h){if(h>=b.length)N(a,f,g);else{var k=S(e.a,b[h].h()),m=Nd(b[h].id,k.type),n=" WHERE "+k.d+" = ?",p="DELETE FROM "+ae(k)+n,q=P(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(h)},function(a,b){G(e.logger,"error: "+q+b.message);g=!0;c(h);return!1});h++;for(var p=function(b){b="ydn.db.me:"+k.getName()+":"+b.getName();b="DELETE FROM  "+Fa(b)+n;J(e.logger,P(a)+NaN+b);d.executeSql(b,[m])},t=0,A=k.a.length;t<A;t++){var B=k.index(t);B.multiEntry&&p(B)}}}var d=
a.a,e=this,f=0,g=!1;J(this.logger,P(a)+" removeByKeys: "+b.length+" keys");c(0)};
l.gb=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Fa(b)+k;J(h.logger,P(a)+NaN+b);e.executeSql(b,[g])}var e=a.a,f=S(this.a,b),g=Nd(c,f.type),h=this,k=" WHERE "+f.d+" = ?";b="DELETE FROM "+ae(f)+k;J(this.logger,P(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){N(a,c.rowsAffected)},function(b,c){N(a,c,!0);return!1});b=0;for(c=f.a.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};l.wb=function(a,b,c){ug(this,a,b,void 0,c)};
l.hb=function(a,b,c){ug(this,a,b,void 0,c)};l.Ib=function(a,b,c,d){ug(this,a,b,c,d)};
function ug(a,b,c,d,e){function f(c){c="ydn.db.me:"+h.getName()+":"+c.getName();c="DELETE FROM  "+Fa(c)+n;J(a.logger,P(b)+NaN+c);g.executeSql(c,m)}var g=b.a,h=S(a.a,c);c="DELETE FROM "+ae(h);var k=[],m=[],n="";null!=e&&(u(d)?(d=$d(h,d),Md(d.c,d.type,e,m,k)):Md(h.d,h.type,e,m,k),n=" WHERE "+m.join(" AND "));c+=n;var p=P(b)+" SQL: "+c+" PARAMS: "+k;J(a.logger,p);g.executeSql(c,k,function(c,d){J(a.logger,"success "+p);N(b,d.rowsAffected)},function(c,d){G(a.logger,"error: "+p+d.message);N(b,d,!0);return!1});
e=0;for(d=h.a.length;e<d;e++)c=h.index(e),c.multiEntry&&f(c)}l.Ua=function(a,b){function c(g){var h="SELECT COUNT(*) FROM "+Fa(b[g]);J(e.logger,"SQL: "+h+" PARAMS: []");d.executeSql(h,[],function(d,e){var h=e.rows.item(0);f[g]=parseInt(h["COUNT(*)"],10);g++;g==b.length?N(a,f):c(g)},function(b,c){N(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(J(this.logger,"success"),N(a,0)):c(0)};
l.Fa=function(a,b,c,d,e){var f=[];b=Yd(S(this.a,b),f,6,d,c,!1,e);J(this.logger,P(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d=c.rows.item(0);N(a,Ie(d))},function(b,c){N(a,c,!0);return!1})};
l.O=function(a,b,c,d,e,f,g,h,k,m){var n=this,p=[],q=S(this.a,c),t=q.e,A=q.type,B=A,H=null!=d&&d!==t?$d(q,d):null,I=d||t;H&&(B=H.type);c=[];if(m&&u(m[0])){var K=m[0];H&&u(m[1])?(d=m[1],e=ce(q,b,c,H.getName(),e,K,!0,d,h,k)):e=be(q,b,c,d,e,h,k,K,!0)}else e=Yd(q,c,b,I,e,h,k);y(f)&&(e+=" LIMIT "+f);y(g)&&(e+=" OFFSET "+g);var Y=a+" SQL: "+e+" ;params= "+R(c);J(this.logger,Y);a.a.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=Sd(f[t],A):1==b?p[g]=Sd(f[I],B):
3==b?p[g]=[Sd(f[I],B),Sd(f[t],A)]:null!=f&&(p[g]=qg(f,q));L(n.logger,"success "+a);m&&f&&(m[0]=Sd(f[I],B),m[1]=Sd(f[t],A));N(a,p)},function(b,c){G(n.logger,"error: "+Y+c.message);N(a,c,!0);return!1})};function vg(a,b){this.a=b}C(vg,tg);vg.prototype.logger=F("ydn.db.core.req.WebSql");vg.prototype.b=function(a,b,c,d){c=S(this.a,c);return new og(a,b,c,d)};function wg(a,b){this.b=b;this.d=a;this.a=dg(b)}wg.prototype.logger=F("ydn.db.sql.req.websql.Node");wg.prototype.toJSON=function(){return{sql:this.b.I}};wg.prototype.toString=function(){return"websql.Node:"};function xg(a,b){if(a.a){if(1==a.a.length){if(z(b))return eb(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=eb(b,a.a[d]);return c}return qg(b,a.d)}
wg.prototype.c=function(a,b,c){var d=this,e=[];b.executeSql(this.b.I,c,function(b,c){for(var h=c.rows.length,k=0;k<h;k++){var m=c.rows.item(k);if(z(m))var n=xg(d,m);e.push(n)}a(e)},function(b,c){G(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function yg(a,b){wg.call(this,a,b)}C(yg,wg);yg.prototype.c=function(a,b,c){var d=this;b.executeSql(this.b.I,c,function(b,c){var d=c.rows.length;if(1==d)d=Ie(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new Te;},function(b,c){G(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function nf(a,b){this.a=b}C(nf,vg);nf.prototype.logger=F("ydn.db.sql.req.WebSql");nf.prototype.executeSql=function(a,b,c){var d=Sa(b.b);if(1==d.length){var e=S(this.a,d[0]);if(!e)throw new Ve(d[0]);var f=dg(b);if(f)for(var g=0;g<f.length;g++)if(!ee(e,f[g]))throw new Ve('Index "'+f[g]+'" not found in '+d[0]);var h;b.e?h=new yg(e,b):h=new wg(e,b);h.c(function(b,c){N(a,b,c)},a.a,c)}else throw new Ce(b.I);};function zg(a,b,c,d){lf.call(this,a,b,c,d)}C(zg,Yf);zg.prototype.executeSql=function(a,b){for(var c=new bg(a),d=Sa(c.b),e=0;e<d.length;e++){var f=S(this.b,d[e]);if(!f)throw new E("store: "+f+" not exists.");}L(this.logger,"executeSql: "+a+" params: "+b);var g=this.a.request("sql",Sa(c.b),c.c);O(g,function(){U(this).executeSql(g,c,b||[])},this);return g};function Ag(a,b,c){V.call(this,a,b,c)}C(Ag,ag);Ag.prototype.ka=function(a,b){return new zg(this,this.c,a,b)};Ag.prototype.executeSql=function(a,b){return this.a.executeSql(a,b)};var Bg,Cg,Dg;Dg=Cg=Bg=!1;var Eg=$a;Eg&&(-1!=Eg.indexOf("Firefox")?Bg=!0:-1!=Eg.indexOf("Camino")||-1!=Eg.indexOf("iPad")||-1!=Eg.indexOf("iPhone")||-1!=Eg.indexOf("iPod")||(-1!=Eg.indexOf("Chrome")?Cg=!0:-1!=Eg.indexOf("Android")||-1!=Eg.indexOf("Safari")&&(Dg=!0)));var Fg=Bg,Gg=Cg,Hg=Dg;function Ig(a,b){u(a)&&5242880<a&&Nc(this.logger,Ac,"storage size request ignored, use Quota Management API instead");this.q=null;this.va=b||NaN}l=Ig.prototype;
l.lb=function(a,b){function c(a,c,d){L(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)Jg(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)we(b,c[d])||(a.deleteObjectStore(c[d]),L(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.c?G(e.logger,"database already set."):u(b)?(G(e.logger,b?b.message:"Error received."),e.q=null,f.m(b)):(e.q=a,e.q.onabort=function(a){J(e.logger,e+": abort");e.Oa(a.target.error)},e.q.onerror=
function(a){J(e.logger,e+": error");e.Oa(a.target.error)},e.q.onversionchange=function(a){J(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.q&&(e.q.onabort=null,e.q.onblocked=null,e.q.onerror=null,e.q.onversionchange=null,e.eb(a),!a.defaultPrevented)){e.q.close();e.q=null;var b=Error();b.name=a.type;e.nb(b)}},f.callback(parseFloat(g)))}var e=this,f=new D,g=void 0,h=b.version;Nc(this.logger,Ec,"Opening database: "+a+" ver: "+(b.b?"auto":h));var k;k=u(h)?Vc.open(a,h):Vc.open(a);
k.onsuccess=function(f){var h=f.target.result;u(g)||(g=h.version);Nc(e.logger,Ec,"Database: "+h.name+", ver: "+h.version+" opened.");if(b.b)e.X(function(f){if(b instanceof ze)for(var g=0;g<f.stores.length;g++)we(b,f.stores[g].getName())||Ae(b,f.stores[g].clone());f=xe(b,f,!1,!0);if(0<f.length){Nc(e.logger,Ec,"Schema change require for difference in "+f);var k=y(h.version)?h.version+1:1;if("IDBOpenDBRequest"in r){h.close();var m=Vc.open(a,k);m.onupgradeneeded=function(a){a=a.target.result;Nc(e.logger,
Ec,"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){Nc(e.logger,Ec,e+": fail.");d(null)}}else{var p=h.setVersion(k+"");p.a=function(a){G(e.logger,"migrating from "+h.version+" to "+k+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=I;c(h,p.transaction,!0)};var I=function(){var b=Vc.open(a);b.onsuccess=function(a){a=a.target.result;Nc(e.logger,Ec,e+": OK.");d(a)};b.onerror=function(){Nc(e.logger,Ec,e+": fail.");
d(null)}};null!=p.transaction&&(p.transaction.oncomplete=I)}}else d(h)},void 0,h);else if(b.version>h.version){var k=h.setVersion(b.version);k.a=function(a){G(e.logger,"migrating from "+h.version+" to "+b.version+" failed.");d(null,a)};k.onsuccess=function(){c(h,k.transaction,!0)}}else b.version==h.version?Nc(e.logger,Ec,"database version "+h.version+" ready to go"):G(e.logger,"connected database version "+h.version+" is higher than requested version."),e.X(function(a){a=xe(b,a,!1,!0);0<a.length?
(Nc(e.logger,Ec,a),d(null,new Fe("different schema: "+a))):d(h)},void 0,h)};k.onupgradeneeded=function(a){a=a.target.result;g=NaN;Nc(this.logger,Ec,"upgrade needed for version "+a.version);c(a,k.transaction,!1)};k.onerror=function(c){Oc(e.logger,'open request to database "'+a+'" '+(u(b.version)?" with version "+b.version:"")+" cause error of "+k.error.name);d(null,c)};k.onblocked=function(c){Oc(e.logger,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};y(this.va)&&!isNaN(this.va)&&
setTimeout(function(){"done"!=k.readyState&&(Oc(e.logger,e+": database state is still "+k.readyState),d(null,new Ze("connection timeout after "+e.va)))},this.va);return f};l.va=18E4;l.nb=function(){};l.Oa=function(){};l.eb=function(){};l.Qb=function(){return"indexeddb"};l.Pb=function(){return this.q||null};l.mb=function(){return!!this.q};l.logger=F("ydn.db.con.IndexedDb");l.q=null;l.Rb=function(){return this.q?parseFloat(this.q.version):void 0};
l.X=function(a,b,c){c=c||this.q;if(u(b)){if(null===b){if(0==c.objectStoreNames.length){a(new ue(c.version));return}throw new Ee;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new ue(c.version));return}b=c.transaction(b,Tc)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),k=[],m=0,n=h.indexNames.length;m<n;m++){var p=h.index(h.indexNames[m]);k[m]=new Pd(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Wd(h.name,h.keyPath,h.autoIncrement,void 0,k)}b=new ue(c.version,f);a(b)};
function Jg(a,b,c,d){function e(){var a={autoIncrement:!!d.b};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}Nc(a.logger,Fc,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());Ud(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),Nc(a.logger,Ac,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):da(c.autoIncrement)&&da(d.b)&&c.autoIncrement!=d.b&&(b.deleteObjectStore(d.getName()),
Nc(a.logger,Ac,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,g=0;g<d.a.length;g++){var h=d.index(g);!f.contains(h.getName())&&h.e&&(c.clear(),Nc(a.logger,Ac,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var k=0,m=0,n=0,g=0;g<d.a.length;g++){var h=d.index(g),p=!1;if(f.contains(h.getName())){var q=c.index(h.getName()),t=null!=q.unique&&null!=h.unique&&q.unique!=h.unique,A=null!=q.multiEntry&&null!=h.multiEntry&&q.multiEntry!=
h.multiEntry,q=null!=q.keyPath&&null!=h.keyPath&&!!Ud(q.keyPath,h.keyPath);if(t||A||q)c.deleteIndex(h.getName()),p=!0,k--,n++}else"BLOB"!=h.type&&(p=!0);p&&(h.unique||h.multiEntry?(p={unique:h.unique,multiEntry:h.multiEntry},c.createIndex(h.getName(),h.keyPath,p)):c.createIndex(h.getName(),h.keyPath),k++)}for(g=0;g<f.length;g++)ee(d,f[g])||(c.deleteIndex(f[g]),m++);Nc(a.logger,Fc,"Updated store: "+c.name+", "+k+" index created, "+m+" index deleted, "+n+" modified.")}else{c=e();for(g=0;g<d.a.length;g++)h=
d.index(g),"BLOB"==h.type?Nc(a.logger,Bc,"Index "+h+" of blob data type ignored."):(Nc(a.logger,Fc,"Creating index: "+h),h.unique||h.multiEntry?(p={unique:h.unique,multiEntry:h.multiEntry},c.createIndex(h.getName(),h.keyPath,p)):c.createIndex(h.getName(),h.keyPath));Nc(a.logger,Fc,"Created store: "+c)}}
l.Xa=function(a,b,c,d){var e=this.q;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};l.close=function(){Nc(this.logger,Fc,this+" closing connection");this.q.close()};l.toString=function(){return"IndexedDB:"+(this.q?this.q.name+":"+this.q.version:"")};
pd.push(function(a,b){if(!Vc||b&&"indexeddb"!=b)return null;var c=Vc.deleteDatabase(a),d=new hd("IDBVersionChangeEvent ");c.onblocked=function(a){Rc(d,a)};c.onerror=function(a){d.m(a)};c.onsuccess=function(a){d.callback(a)};return d});function Kg(a,b){this.a=u(a)?a:4194304;this.b=b||"websql"}l=Kg.prototype;
l.lb=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.b?isNaN(f)?1:f+1:c.version;Pc(e.logger,a+": changing version from "+b.version+" to "+g);var h=!1,k=0;b.changeVersion(b.version,g+"",function(a){e.X(function(b){h=!0;for(var d=0;d<c.count();d++){var f=S(b,(c.stores[d]||null).getName()),f=f?fe(f,c.stores[d]||null):null;Lg(e,a,c.stores[d]||null,function(a){a&&k++},f)}for(d=0;d<b.count();d++)f=b.stores[d]||null,we(c,f.getName())||(c instanceof ze?Ae(c,f):(f="DROP TABLE "+
ae(f),L(e.logger,f),a.executeSql(f,[],function(){},function(a,b){throw b;})))},a,b)},function(c){Oc(e.logger,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a);throw c;},function(){if(h){var f=".";k!=c.stores.length&&(f=" but unexpected stores exists.");J(e.logger,a+":"+b.version+" ready"+f);d(b)}else G(e.logger,a+": changing version voided.")})}function d(a,b){u(b)?(e.u=null,g.m(b)):(e.u=a,g.callback(parseFloat(f)))}var e=this,f=NaN,g=new D,h=null;
try{"sqlite"==this.b?r.sqlitePlugin?(h=r.sqlitePlugin.openDatabase(a,"",a,this.a),h.readTransaction||(h.readTransaction=h.transaction),h.changeVersion=function(a,b,c,d,e){h.transaction(c,d,e)}):(G(this.logger,"sqlitePlugin not found."),h=null,this.Pa=Error("sqlitePlugin not found.")):h=r.openDatabase(a,"",a,this.a)}catch(k){if("SECURITY_ERR"==k.name)G(this.logger,"SECURITY_ERR for opening "+a),h=null,this.Pa=new Xe(k);else throw k;}if(h){var f=h.version||"",m="database "+a+(0==f.length?"":" version "+
h.version);null!=b.version&&b.version==h.version?(Pc(e.logger,"Existing "+m+" opened as requested."),d(h)):this.X(function(a){(a=xe(b,a,!0,!1))?(0==f?Pc(e.logger,"New "+m+" created."):b.b?Pc(e.logger,"Existing "+m+" opened and schema change for "+a):Pc(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(Pc(e.logger,"Existing "+m+" with same schema opened."),d(h))},null,h)}else d(null,this.Pa);return g};l.Qb=function(){return this.b};l.Pa=null;l.u=null;
l.Pb=function(){return this.u||null};l.logger=F("ydn.db.con.WebSql");l.nb=function(){};l.Oa=function(){};
function Mg(a){var b=a.l,c="CREATE TABLE IF NOT EXISTS "+ae(a)+" (",d=a.d,c=c+(d+" "+b+" PRIMARY KEY ");a.b&&(c+=" AUTOINCREMENT ");if(!a.ga||!a.keyPath&&0==a.a.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],g=0,h=a.a.length;g<h;g++){var k=a.index(g),m="";if(k.multiEntry){var m="ydn.db.me:"+a.getName()+":"+k.getName(),n=k.unique?" UNIQUE ":"",k="CREATE TABLE IF NOT EXISTS "+Fa(m)+" ("+d+" "+b+", "+k.c+" "+k.g+n+")";e.push(k)}else k.unique&&(m=" UNIQUE "),n=k.c,-1==f.indexOf(n)&&(c+=", "+n+" "+k.g+
m,f.push(n))}e.unshift(c+")");return e}l.Rb=function(){return this.u?parseFloat(this.u.version):void 0};
l.X=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q="sql"in e?e.sql:void 0;J(f.logger,"Parsing table schema from SQL: "+q);for(var t=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),A=void 0,B,q=[],H=!1,I=!1,K=0;K<t.length;K++){var Y=t[K].match(/\w+|"[^"]+"/g),ba=Ma(Y,function(a){return a.toUpperCase()}),Z=Ca(Y[0],
'"'),Y=Qd(ba[1]);if(-1!=ba.indexOf("PRIMARY")&&-1!=ba.indexOf("KEY")){B=Y;if(x(Z)&&!sa(Z)&&"_ROWID_"!=Z){var gb=Z.split(","),A=Z;1<gb.length&&(A=gb,B=void 0)}-1!=ba.indexOf("AUTOINCREMENT")&&(H=!0)}else if("_ROWID_"!=Z)if("_default_"==Z)I=!0;else{var Hd="UNIQUE"==ba[2];0==Z.lastIndexOf(e.tbl_name+"-",0)&&(Z=Z.substr(e.tbl_name.length+1));ba=new Pd(Z,Y,Hd);q.push(ba)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var nb=e.name.split(":");if(3<=nb.length){var Ib=nb[1],A=new Pd(nb[2],Y,Hd,!0),t=Qa(q,function(a){return a.getName()==
nb[2]});0<=t?q[t]=A:q.push(A);t=Qa(h,function(a){return a.getName()===Ib});0<=t?(K=h[t],h[t]=new Wd(K.getName(),K.keyPath,H,B,q,void 0,!I)):h.push(new Wd(Ib,void 0,!1,void 0,[A]));J(f.logger,'multi entry index "'+A.getName()+'" found in '+Ib+(-1==t?"*":""))}else G(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else K=Qa(h,function(a){return a.getName()===e.name}),0<=K?(t=h[K].index(0),q.push(t),h[K]=new Wd(e.name,A,H,B,q,void 0,!I)):(q=new Wd(e.name,A,H,B,q,void 0,!I),h.push(q))}}d=new ue(g,
h);a(d)}}var f=this,g=(c=c||this.u)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.X(a,b,c)},function(a){Oc(f.logger,"opening tx: "+a.message);throw a;},e)};
function Lg(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new We(e,f);})}var g=0,h=Mg(c),k="Create";if(e){e=ke(c,e);if(0==e.length){J(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}k="Modify";G(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+
Fa(c.getName()))}J(a.logger,k+" table: "+c.getName()+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}l.mb=function(){return!!this.u};l.close=function(){this.u=null};
l.Xa=function(a,b,c,d){function e(a){J(h.logger,h+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.u&&(a(null),d("abort",this.Pa));c==Tc?this.u.readTransaction(g,e,f):c==Uc?this.u.changeVersion(this.u.version,this.u.version+1+"",g,e,f):this.u.transaction(g,e,f)};
pd.push(function(a,b){if(ea(r.openDatabase)&&(!b||"websql"==b)){var c=new Kg,d=new ze;L(c.logger,"deleting websql database: "+a);var d=c.lb(a,d),e=function(){var b=c.logger;b&&b.log(Bc,"all tables in "+a+" deleted.",void 0)};d.D(function(){c.Xa(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var k=e.rows.length,m=0,n=0;n<k;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,J(c.logger,"deleting table: "+
p.name),b.executeSql("DROP TABLE "+p.name))}L(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],M,e)});d.sb(function(){G(c.logger,"Connecting "+a+" failed.")})}});Kg.prototype.eb=function(){};Kg.prototype.toString=function(){return"WebSql:"+(this.u?":"+this.u.version:"")};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
Bf.prototype.Va=function(a){return"indexeddb"==a&&(!Vc||Hg?0:Vc)?new Ig(this.i,this.t):"sqlite"==a&&r.sqlitePlugin?new Kg(this.i,"sqlite"):"websql"==a&&ea(r.openDatabase)?new Kg(this.i):null};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
Ag.prototype.executeSql=Ag.prototype.executeSql;zg.prototype.executeSql=zg.prototype.executeSql;function Ng(a,b,c){V.call(this,a,b,c)}C(Ng,Ag);ma("ydn.db.Storage",Ng);function Og(){this.a=la()}var Pg=new Og;Og.prototype.get=function(){return this.a};var Qg=ib("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function Rg(){this.a=Sg}Rg.prototype.ja=!0;Rg.prototype.aa=function(){return""};Rg.prototype.toString=function(){return"Const{}"};function Tg(a){if(a instanceof Rg&&a.constructor===Rg&&a.a===Sg)return"";Ia("expected object of type Const, got '"+a+"'");return"type_error:Const"}var Sg={};function Ug(){this.a="";this.b=Vg}Ug.prototype.ja=!0;var Vg={};Ug.prototype.aa=function(){return this.a};Ug.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function Wg(a){var b=new Ug;b.a=a;return b}var Xg=Wg(""),Yg=/^[-.%_!# a-zA-Z0-9]+$/;function Zg(){this.a=$g}l=Zg.prototype;l.ja=!0;l.aa=function(){return""};l.cb=!0;l.ia=function(){return 1};l.toString=function(){return"SafeUrl{}"};var $g={};function ah(){this.a=bh}l=ah.prototype;l.ja=!0;l.aa=function(){return""};l.cb=!0;l.ia=function(){return 1};l.toString=function(){return"TrustedResourceUrl{}"};var bh={};function ch(){this.a="";this.c=dh;this.b=null}l=ch.prototype;l.cb=!0;l.ia=function(){return this.b};l.ja=!0;l.aa=function(){return this.a};l.toString=function(){return"SafeHtml{"+this.a+"}"};function eh(a){if(a instanceof ch&&a.constructor===ch&&a.c===dh)return a.a;Ia("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}function fh(a){if(a instanceof ch)return a;var b=null;a.cb&&(b=a.ia());return gh(ua(a.ja?a.aa():String(a)),b)}
function hh(a){if(a instanceof ch)return a;a=fh(a);var b;b=eh(a).replace(/  /g," &#160;").replace(/(\r\n|\r|\n)/g,"<br>");return gh(b,a.ia())}var ih=/^[a-zA-Z0-9-]+$/,jh=ib("action","cite","data","formaction","href","manifest","poster","src"),kh=ib("embed","iframe","link","script","style","template");
function lh(a,b,c){if(!ih.test(a))throw Error("Invalid tag name <"+a+">.");if(a.toLowerCase()in kh)throw Error("Tag name <"+a+"> is not allowed for SafeHtml.");var d=null,e="<"+a;if(b)for(var f in b){if(!ih.test(f))throw Error('Invalid attribute name "'+f+'".');var g=b[f];if(null!=g){var h,k=a;h=f;if(g instanceof Rg)g=Tg(g);else if("style"==h.toLowerCase()){if(!z(g))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof g+" given: "+g);if(!(g instanceof
Ug)){var k="",m=void 0;for(m in g){if(!/^[-_a-zA-Z0-9]+$/.test(m))throw Error("Name allows only [-_a-zA-Z0-9], got: "+m);var n=g[m];null!=n&&(n instanceof Rg?n=Tg(n):Yg.test(n)||(Ia("String value allows only [-.%_!# a-zA-Z0-9], got: "+n),n="zClosurez"),k+=m+":"+n+";")}g=k?Wg(k):Xg}g instanceof Ug&&g.constructor===Ug&&g.b===Vg?g=g.a:(Ia("expected object of type SafeStyle, got '"+g+"'"),g="type_error:SafeStyle")}else{if(/^on/i.test(h))throw Error('Attribute "'+h+'" requires goog.string.Const value, "'+
g+'" given.');if(h.toLowerCase()in jh)if(g instanceof ah)g instanceof ah&&g.constructor===ah&&g.a===bh?g="":(Ia("expected object of type TrustedResourceUrl, got '"+g+"'"),g="type_error:TrustedResourceUrl");else if(g instanceof Zg)g instanceof Zg&&g.constructor===Zg&&g.a===$g?g="":(Ia("expected object of type SafeUrl, got '"+g+"'"),g="type_error:SafeUrl");else throw Error('Attribute "'+h+'" on tag "'+k+'" requires goog.html.SafeUrl or goog.string.Const value, "'+g+'" given.');}g.ja&&(g=g.aa());h=h+
'="'+ua(String(g))+'"';e=e+(" "+h)}}u(c)?v(c)||(c=[c]):c=[];!0===Qg[a.toLowerCase()]?e+=">":(d=mh(c),e+=">"+eh(d)+"</"+a+">",d=d.ia());(a=b&&b.dir)&&(/^(ltr|rtl|auto)$/i.test(a)?d=0:d=null);return gh(e,d)}function mh(a){function b(a){v(a)?La(a,b):(a=fh(a),d+=eh(a),a=a.ia(),0==c?c=a:0!=a&&c!=a&&(c=null))}var c=0,d="";La(arguments,b);return gh(d,c)}var dh={};function gh(a,b){var c=new ch;c.a=a;c.b=b;return c}var nh=gh("",0);function oh(a){this.e=a||"";this.f=Pg}oh.prototype.c=!0;oh.prototype.a=!0;oh.prototype.b=!1;function ph(a){a=new Date(a.f);return qh(a.getFullYear()-2E3)+qh(a.getMonth()+1)+qh(a.getDate())+" "+qh(a.getHours())+":"+qh(a.getMinutes())+":"+qh(a.getSeconds())+"."+qh(Math.floor(a.getMilliseconds()/10))}function qh(a){return 10>a?"0"+a:String(a)}function rh(a,b){var c=(a.f-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function sh(a){oh.call(this,a)}C(sh,oh);
sh.prototype.b=!0;sh.prototype.d=function(a){return a?th(this,a).aa():""};
function th(a,b){var c;switch(b.e.value){case yc.value:c="dbg-sh";break;case zc.value:c="dbg-sev";break;case Ac.value:c="dbg-w";break;case Bc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(a.e," ");a.a&&d.push("[",ph(b),"] ");d.push("[",rh(b,a.f.get()),"s] ");d.push("[",b.c,"] ");var d=hh(d.join("")),e=nh;a.b&&b.b&&(e=mh(lh("br"),hh(b.a||"")));var f=hh(b.d);c=lh("span",{"class":c},mh(f,e));return a.c?mh(d,c,lh("br")):mh(d,c)}function uh(a){oh.call(this,a)}C(uh,oh);
uh.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",ph(a),"] ");b.push("[",rh(a,this.f.get()),"s] ");b.push("[",a.c,"] ");b.push(a.d);this.b&&a.b&&b.push("\n",a.a);this.c&&b.push("\n");return b.join("")};function vh(){this.e=ja(this.f,this);this.a=new uh;this.a.a=!1;this.a.b=!1;this.b=this.a.c=!1;this.c="";this.d={}}vh.prototype.f=function(a){if(!this.d[a.c]){var b=this.a.d(a),c=wh;if(c)switch(a.e){case yc:xh(c,"info",b);break;case zc:xh(c,"error",b);break;case Ac:xh(c,"warn",b);break;default:xh(c,"debug",b)}else this.c+=b}};var wh=r.console;function xh(a,b,c){if(a[b])a[b](c);else a.log(c)};var yh=!gc||gc&&9<=pc;!hc&&!gc||gc&&gc&&9<=pc||hc&&nc("1.9.1");gc&&nc("9");function zh(a,b){db(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ah?a.setAttribute(Ah[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ah={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Bh(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||z(f)&&0<f.nodeType?d(f):La(Ch(f)?Sa(f):f,d)}}function Ch(a){if(a&&"number"==typeof a.length){if(z(a))return"function"==typeof a.item||"string"==typeof a.item;if(ea(a))return"function"==typeof a.item}return!1}function Dh(a){this.a=a||r.document||document}
function Eh(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
Dh.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!yh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ua(g.name),'"');if(g.type){f.push(' type="',ua(g.type),'"');var h={};hb(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:v(g)?f.className=g.join(" "):zh(f,g));2<e.length&&Bh(d,f,e);return f};
Dh.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function Fh(a){gc&&u(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"}
;function Gh(a){this.e=ja(this.f,this);this.b=new sh;this.c=this.b.a=!1;this.a=a;this.d=this.a.ownerDocument||this.a.document;a=(a=this.a)?new Dh(9==a.nodeType?a:a.ownerDocument||a.document):qa||(qa=new Dh);var b=null,c=a.a;gc&&c.createStyleSheet?(b=c.createStyleSheet(),Fh(b)):(c=Eh(a,"head")[0],c||(b=Eh(a,"body")[0],c=a.b("head"),b.parentNode.insertBefore(c,b)),b=a.b("style"),Fh(b),c.appendChild(b));this.a.className+=" logdiv"}
Gh.prototype.f=function(a){if(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";a=th(this.b,a);c.innerHTML=eh(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)}};Gh.prototype.clear=function(){this.a&&(this.a.innerHTML=eh(nh))};var Hh=!gc||gc&&9<=pc,Ih=gc&&!nc("9");!ic||nc("528");hc&&nc("1.9b")||gc&&nc("8")||fc&&nc("9.5")||ic&&nc("528");hc&&!nc("8")||gc&&nc("9");function Jh(a){Jh[" "](a);return a}Jh[" "]=function(){};function Kh(a,b){td.call(this,a?a.type:"");this.b=this.target=null;this.clientY=this.clientX=0;this.a=this.state=null;if(a){this.type=a.type;this.target=a.target||a.srcElement;this.b=b;var c=a.relatedTarget;if(c&&hc)try{Jh(c.nodeName)}catch(d){}this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.state=a.state;this.a=a;a.defaultPrevented&&this.preventDefault()}}C(Kh,td);
Kh.prototype.preventDefault=function(){Kh.s.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ih)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Lh=null,Mh=null;F("ydn.debug");ma("ydn.debug.log",function(a,b,c){a=a||"ydn";if(y(b))b=new xc("log",b);else if(x(b)){b=b.toUpperCase();if(!Hc){Hc={};for(var d=0,e;e=Gc[d];d++)Hc[e.value]=e,Hc[e.name]=e}b=Hc[b]||null}else b=Dc;(d=F(a))?d.b=b:window.console.log("logger "+a+" not available.");u(c)?!Mh&&(a=Mh=new Gh(c),1!=a.c&&(c=Mc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.c=!0),a=Mc())&&(a.b=Ac):!Lh&&!Mh&&(a=Lh=new vh,1!=a.b&&(c=Mc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.b=!0),a=Mc())&&(a.b=Ac)});function Nh(a,b){qd.call(this);this.d=b;this.b=[];if(a>this.d)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.b.push(this.a())}C(Nh,qd);Nh.prototype.a=function(){return{}};Nh.prototype.c=function(a){if(z(a))if(ea(a.Wa))a.Wa();else for(var b in a)delete a[b]};Nh.prototype.U=function(){Nh.s.U.call(this);for(var a=this.b;a.length;)this.c(a.pop());delete this.b};function Oh(){this.a=[];this.c=new cc;this.d=new cc;this.f=1;this.e=new Nh(0,4E3);this.e.a=function(){return new Ph};this.g=new Nh(0,50);this.g.a=function(){return new Qh};var a=this;this.b=new Nh(0,2E3);this.b.a=function(){return String(a.f++)};this.b.c=function(){}}F("goog.debug.Trace");function Qh(){this.time=this.count=0}Qh.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Ph(){}
function Rh(a,b,c){var d=[];-1==b?d.push("    "):d.push(Sh(a.b-b));d.push(" ",Th(a.b-0));0==a.a?d.push(" Start        "):1==a.a?(d.push(" Done "),d.push(Sh(a.e-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.d&&d.push("[VarAlloc ",a.d,"] ");return d.join("")}Ph.prototype.toString=function(){return null==this.type?this.c:"["+this.type+"] "+this.c};
Oh.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.a.length;d++){var e=this.a[d];1==e.a&&c.pop();a.push(" ",Rh(e,b,c.join("")));b=e.b;a.push("\n");0==e.a&&c.push("|  ")}if(0!=this.c.yb()){var f=la();a.push(" Unstopped timers:\n");bc(this.c,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Th(b.startTime),")\n")})}b=this.d.sa();for(d=0;d<b.length;d++)c=this.d.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function Sh(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Th(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Oh;var Uh="closure_listenable_"+(1E6*Math.random()|0),Vh=0;function Wh(a,b,c,d,e){this.ba=a;this.a=null;this.src=b;this.type=c;this.Da=!!d;this.Ia=e;this.key=++Vh;this.ma=this.Ca=!1}function Xh(a){a.ma=!0;a.ba=null;a.a=null;a.src=null;a.Ia=null};function Yh(a){this.src=a;this.a={};this.b=0}Yh.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Zh(a,b,d,e);-1<g?(b=a[g],c||(b.Ca=!1)):(b=new Wh(b,this.src,f,!!d,e),b.Ca=c,a.push(b));return b};function $h(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ka(d,b),f;(f=0<=e)&&Ja.splice.call(d,e,1);f&&(Xh(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}
function Zh(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.ma&&f.ba==b&&f.Da==!!c&&f.Ia==d)return e}return-1};var ai="closure_lm_"+(1E6*Math.random()|0),bi={},ci=0;function di(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)di(a,b[f],c,d,e);else c=ei(c),a&&a[Uh]?a.T.add(String(b),c,!1,d,e):fi(a,b,c,!1,d,e)}function fi(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,h=gi(a);h||(a[ai]=h=new Yh(a));c=h.add(b,c,d,e,f);c.a||(d=hi(),c.a=d,d.src=a,d.ba=c,a.addEventListener?a.addEventListener(b.toString(),d,g):a.attachEvent(ii(b.toString()),d),ci++)}
function hi(){var a=ji,b=Hh?function(c){return a.call(b.src,b.ba,c)}:function(c){c=a.call(b.src,b.ba,c);if(!c)return c};return b}function ki(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)ki(a,b[f],c,d,e);else c=ei(c),a&&a[Uh]?a.T.add(String(b),c,!0,d,e):fi(a,b,c,!0,d,e)}
function mi(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)mi(a,b[f],c,d,e);else(c=ei(c),a&&a[Uh])?(a=a.T,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Zh(f,c,d,e),-1<c&&(Xh(f[c]),Ja.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=gi(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Zh(b,c,!!d,e)),(c=-1<a?b[a]:null)&&ni(c))}
function ni(a){if(!y(a)&&a&&!a.ma){var b=a.src;if(b&&b[Uh])$h(b.T,a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.Da):b.detachEvent&&b.detachEvent(ii(c),d);ci--;(c=gi(b))?($h(c,a),0==c.b&&(c.src=null,b[ai]=null)):Xh(a)}}}function ii(a){return a in bi?bi[a]:bi[a]="on"+a}function oi(a,b,c,d){var e=1;if(a=gi(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.Da==c&&!f.ma&&(e&=!1!==pi(f,d))}return Boolean(e)}
function pi(a,b){var c=a.ba,d=a.Ia||a.src;a.Ca&&ni(a);return c.call(d,b)}
function ji(a,b){if(a.ma)return!0;if(!Hh){var c=b||aa("window.event"),d=new Kh(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.b;f;f=f.parentNode)c.push(f);for(var f=a.type,h=c.length-1;0<=h;h--)d.b=c[h],e&=oi(c[h],f,!0,d);for(h=0;h<c.length;h++)d.b=c[h],e&=oi(c[h],f,!1,d)}return e}return pi(a,new Kh(b,this))}function gi(a){a=a[ai];return a instanceof Yh?a:null}
var qi="__closure_events_fn_"+(1E9*Math.random()>>>0);function ei(a){if(ea(a))return a;a[qi]||(a[qi]=function(b){return a.handleEvent(b)});return a[qi]};function ri(){qd.call(this);this.T=new Yh(this);this.b=this;this.a=null}C(ri,qd);ri.prototype[Uh]=!0;ri.prototype.addEventListener=function(a,b,c,d){di(this,a,b,c,d)};ri.prototype.removeEventListener=function(a,b,c,d){mi(this,a,b,c,d)};ri.prototype.U=function(){ri.s.U.call(this);if(this.T){var a=this.T,b=0,c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)++b,Xh(d[e]);delete a.a[c];a.b--}}this.a=null};
function si(a,b,c,d){b=a.T.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.ma&&g.Da==c){var h=g.ba,k=g.Ia||g.src;g.Ca&&$h(a.T,g);e=!1!==h.call(k,d)&&e}}return e&&0!=d.Kb};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function ti(a){a.f||(a.f=new ri);return a.f}Bf.prototype.addEventListener=function(a,b,c,d){if("ready"==a)ki(ti(this),a,b,c,d);else{var e="created error fail ready deleted updated versionchange".split(" "),f=function(a){if(!(0<=Ka(e,a)))throw new E('Invalid event type "'+a+'"');};if(w(a))for(var g=0;g<a.length;g++)f(a[g]);else f(a);di(ti(this),a,b,c,d)}};Bf.prototype.removeEventListener=function(a,b,c,d){mi(ti(this),a,b,c,d)};
Bf.prototype.H=function(a){var b=ti(this),c,d=b.a;if(d)for(c=[];d;d=d.a)c.push(d);b=b.b;d=a.type||a;if(x(a))a=new td(a,b);else if(a instanceof td)a.target=a.target||b;else{var e=a;a=new td(d,b);hb(a,e)}var e=!0,f;if(c)for(var g=c.length-1;0<=g;g--)f=a.b=c[g],e=si(f,d,!0,a)&&e;f=a.b=b;e=si(f,d,!0,a)&&e;e=si(f,d,!1,a)&&e;if(c)for(g=0;g<c.length;g++)f=a.b=c[g],e=si(f,d,!1,a)&&e};Bf.prototype.addEventListener=Bf.prototype.addEventListener;Bf.prototype.removeEventListener=Bf.prototype.removeEventListener;ag.prototype.scan=ag.prototype.pc;ag.prototype.map=ag.prototype.map;ag.prototype.reduce=ag.prototype.reduce;ag.prototype.open=ag.prototype.open;Yf.prototype.scan=Yf.prototype.ob;Yf.prototype.map=Yf.prototype.map;Yf.prototype.reduce=Yf.prototype.reduce;Yf.prototype.open=Yf.prototype.open;Ef.prototype.getKey=Ef.prototype.qc;Ef.prototype.getPrimaryKey=Ef.prototype.p;Ef.prototype.getValue=Ef.prototype.w;Ef.prototype.update=Ef.prototype.update;Ef.prototype.clear=Ef.prototype.clear;
ma("ydn.db.Iterator",W);ma("ydn.db.KeyIterator",Lf);ma("ydn.db.ValueIterator",Nf);ma("ydn.db.IndexIterator",Mf);ma("ydn.db.IndexValueIterator",Of);W.prototype.getState=W.prototype.Yb;W.prototype.getKeyRange=W.prototype.Nb;W.prototype.getIndexName=W.prototype.gc;W.prototype.getStoreName=W.prototype.h;W.prototype.isReversed=W.prototype.Q;W.prototype.isUnique=W.prototype.pa;W.prototype.isKeyIterator=W.prototype.ic;W.prototype.isIndexIterator=W.prototype.Zb;W.prototype.getPrimaryKey=W.prototype.p;
W.prototype.getKey=W.prototype.hc;W.prototype.resume=W.prototype.Ob;W.prototype.reset=W.prototype.ib;W.prototype.reverse=W.prototype.reverse;Lf.where=function(a,b,c,d,e){return new Lf(a,Od(b,c,d,e))};Nf.where=function(a,b,c,d,e){return new Nf(a,Od(b,c,d,e))};Mf.where=function(a,b,c,d,e,f){return new Mf(a,b,Od(c,d,e,f))};Of.where=function(a,b,c,d,e,f){return new Of(a,b,Od(c,d,e,f))};ma("ydn.db.Streamer",Tf);Tf.prototype.push=Tf.prototype.push;Tf.prototype.collect=Tf.prototype.nc;
Tf.prototype.setSink=Tf.prototype.dc;function ui(a,b){Wf.call(this,a,b)}C(ui,Wf);ui.prototype.f=function(){return!1};ui.prototype.c=function(a,b){function c(b){u(a[b])?(e=!1,d[b]=!0):(d[b]=!1,0<=b-1&&c(b-1))}var d=[],e=!0;c(a.length-1);e&&(d=[]);return Xf(this,d,b)};function vi(a,b){Wf.call(this,a,b)}C(vi,Wf);
vi.prototype.c=function(a,b){var c=[],d=b[0];if(null==d)return[];for(var e=!0,f=!1,g=d,h=[],k=1;k<a.length;k++)if(null!=b[k]){var m=od(d,b[k]);h[k]=m;this.b?-1==m?e=!1:1==m&&(e=!1,f=!0,-1==od(b[k],g)&&(g=b[k])):1==m?e=!1:-1==m&&(e=!1,f=!0,1==od(b[k],g)&&(g=b[k]))}else e=!1,f=!0;if(e)for(f=0;f<a.length;f++)null!=b[f]&&(c[f]=!0);else if(f)for(f=0;f<a.length;f++)null!=b[f]&&(this.b?-1==od(g,b[f])&&(c[f]=g):1==od(g,b[f])&&(c[f]=g));else for(k=this.b?-1:1,f=1;f<a.length;f++)h[f]===k&&(c[f]=d);return e?
(this.e++,this.a&&this.a.push(g),c):{continuePrimary:c}};function wi(a,b){Wf.call(this,a,b)}C(wi,Wf);wi.prototype.logger=F("ydn.db.algo.ZigzagMerge");
wi.prototype.c=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}function d(a){return a[a.length-1]}var e=[];if(0==a.length||null==a[0]||null==a[0])return[];for(var f=!0,g=0,h=d(a[g]),k=[],m=1;m<a.length;m++)if(null!=a[m]){var n=d(a[m]),p=od(h,n);k[m]=p;this.b?-1==p?f=!1:1==p&&(f=!1,h=n,g=1):1==p?f=!1:-1==p&&(f=!1,h=n,g=1)}else return[];m=this.b?-1:1;if(f){for(f=0;f<a.length;f++)null!=a[f]&&(e[f]=!0);this.a&&(this.d?this.a.push(b[0],h):this.a.push(b[0]));return e}if(0==
g)for(f=1;f<a.length;f++)k[f]==m&&(e[f]=c(a[f],h));else for(f=0;f<a.length;f++)f!=g&&null!=a[f]&&od(h,d(a[f]))===m&&(e[f]=c(a[f],h));return{"continue":e}};ma("ydn.db.algo.NestedLoop",ui);ma("ydn.db.algo.ZigzagMerge",wi);ma("ydn.db.algo.SortedMerge",vi);function xi(a){this.b=a||[]}xi.prototype.a=function(a){return-1==this.b.indexOf(a)?a:null};function yi(){}
yi.prototype.a=function(a){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};a=a.toLowerCase();var d,e,f=a;if(3>a.length)return a;var g,h;a=a.substr(0,1);"y"==a&&(f=a.toUpperCase()+f.substr(1));g=/^(.+?)(ss|i)es$/;e=/^(.+?)([^s])s$/;
g.test(f)?f=f.replace(g,"$1$2"):e.test(f)&&(f=f.replace(e,"$1$2"));g=/^(.+?)eed$/;e=/^(.+?)(ed|ing)$/;g.test(f)?(e=g.exec(f),g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(e[1])&&(g=/.$/,f=f.replace(g,""))):e.test(f)&&(e=e.exec(f),d=e[1],e=/^([^aeiou][^aeiouy]*)?[aeiouy]/,e.test(d)&&(f=d,e=/(at|bl|iz)$/,h=/([^aeiouylsz])\1$/,d=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,e.test(f)?f+="e":h.test(f)?(g=/.$/,f=f.replace(g,"")):d.test(f)&&(f+="e")));g=/^(.+?)y$/;g.test(f)&&(e=g.exec(f),
d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy]/,g.test(d)&&(f=d+"i"));g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+b[e]));g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+c[e]));g=
/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;e=/^(.+?)(s|t)(ion)$/;g.test(f)?(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d)):e.test(f)&&(e=e.exec(f),d=e[1]+e[2],e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,e.test(d)&&(f=d));g=/^(.+?)e$/;g.test(f)&&(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,
e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,h=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,g.test(d)||e.test(d)&&!h.test(d))&&(f=d);g=/ll$/;e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/;g.test(f)&&e.test(f)&&(g=/.$/,f=f.replace(g,""));"y"==a&&(f=a.toLowerCase()+f.substr(1));return f};function zi(a){this.b=a}
zi.prototype.a=function(a){a=a.toLowerCase();a=a.replace(/([^c])\1/g,"$1");a=function(a){return a.match(/^(kn|gn|pn|ae|wr)/)?a.substr(1,a.length-1):a}(a);a=a.replace(/mb$/,"m");a=a.replace(/ck/g,"k");a=function(a){a=a.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();a=a.replace(/cia/g,"xia");a=a.replace(/c(i|e|y)/g,"s$1");return a=a.replace(/c/g,"k")}(a);a=function(a){a=a.replace(/d(ge|gy|gi)/g,"j$1");return a=a.replace(/d/g,"t")}(a);a=function(a){a=a.replace(/gh(^$|[^aeiou])/g,"h$1");return a=a.replace(/g(n|ned)$/g,
"$1")}(a);a=function(a){a=a.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");a=a.replace(/gg/g,"g");return a=a.replace(/g/g,"k")}(a);a=a.replace(/([aeiou])h([^aeiou])/g,"$1$2");a=a.replace(/ph/g,"f");a=a.replace(/q/g,"k");a=a.replace(/s(h|io|ia)/g,"x$1");a=function(a){a=a.replace(/^x/,"s");return a=a.replace(/x/g,"ks")}(a);a=function(a){a=a.replace(/t(ia|io)/g,"x$1");return a=a.replace(/th/,"0")}(a);a=a.replace(/tch/g,"ch");a=a.replace(/v/g,"f");a=a.replace(/^wh/,"w");a=a.replace(/w([^aeiou]|$)/g,"$1");a=a.replace(/y([^aeiou]|$)/g,
"$1");a=a.replace(/z/,"s");a=a.charAt(0)+a.substr(1,a.length).replace(/[aeiou]/g,"");a.length>=this.b&&(a=a.substring(0,this.b));return a=a.toUpperCase()};var Ai=new zi(32),Bi=new yi,Ci=new xi("a a's able about above according accordingly across actually after afterwards again against ain't all allow allows almost alone along already also although always am among amongst an and another any anybody anyhow anyone anything anyway anyways anywhere apart appear appreciate appropriate are aren't around as aside ask asking associated at available away awfully b be became because become becomes becoming been before beforehand behind being believe below beside besides best better between beyond both brief but by c c'mon c's came can can't cannot cant cause causes certain certainly changes clearly co com come comes concerning consequently consider considering contain containing contains corresponding could couldn't course currently d definitely described despite did didn't different do does doesn't doing don't done down downwards during e each edu eg eight either else elsewhere enough entirely especially et etc even ever every everybody everyone everything everywhere ex exactly example except f far few fifth first five followed following follows for former formerly forth four from further furthermore g get gets getting given gives go goes going gone got gotten greetings h had hadn't happens hardly has hasn't have haven't having he he's hello help hence her here here's hereafter hereby herein hereupon hers herself hi him himself his hither hopefully how howbeit however i i'd i'll i'm i've ie if ignored immediate in inasmuch inc indeed indicate indicated indicates inner insofar instead into inward is isn't it it'd it'll it's its itself j just k keep keeps kept know knows known l last lately later latter latterly least less lest let let's like liked likely little look looking looks ltd m mainly many may maybe me mean meanwhile merely might more moreover most mostly much must my myself n name namely nd near nearly necessary need needs neither never nevertheless new next nine no nobody non none noone nor normally not nothing novel now nowhere o obviously of off often oh ok okay old on once one ones only onto or other others otherwise ought our ours ourselves out outside over overall own p particular particularly per perhaps placed please plus possible presumably probably provides q que quite qv r rather rd re really reasonably regarding regardless regards relatively respectively right s said same saw say saying says second secondly see seeing seem seemed seeming seems seen self selves sensible sent serious seriously seven several shall she should shouldn't since six so some somebody somehow someone something sometime sometimes somewhat somewhere soon sorry specified specify specifying still sub such sup sure t t's take taken tell tends th than thank thanks thanx that that's thats the their theirs them themselves then thence there there's thereafter thereby therefore therein theres thereupon these they they'd they'll they're they've think third this thorough thoroughly those though three through throughout thru thus to together too took toward towards tried tries truly try trying twice two u un under unfortunately unless unlikely until unto up upon us use used useful uses using usually uucp v value various very via viz vs w want wants was wasn't way we we'd we'll we're we've welcome well went were weren't what what's whatever when whence whenever where where's whereafter whereas whereby wherein whereupon wherever whether which while whither who who's whoever whole whom whose why will willing wish with within without won't wonder would wouldn't x y yes yet you you'd you'll you're you've your yours yourself yourselves z zero".split(" "));function Di(a){this.data=a;this.a=0}Di.prototype.next=function(a){for(var b=this.a,c=this.data[b],c=1,d=0;0<=b&&b<this.data.length;){c=this.data[b];if(c instanceof Array)if(a<c[0])c=-1;else if(a>c[1])c=1;else return this.a=b,!0;else{if(c==a)return this.a=b,!0;c=a<c?-1:1}if(0==d)d=c;else if(d!=c)break;b+=c;if(b>this.data.length||0>b)break}return!1};
function Ei(a,b){for(var c=0,d=0,e=a.length,f=0;f<e;++f){a:{var d=a.charCodeAt(f),g=new Di(categ_letters_numbers_data);if(y(d))d=g.next(d);else{for(var h=0,k=d.length;h<k;++h)if(!1===g.next(d[h])){d=!1;break a}d=!0}}d||((d=f-c)&&b(c,d),c=f+1)}(d=e-c)&&b(c,d)};function Fi(a,b){this.f=b;this.value=a}Fi.prototype.w=function(){return this.value};Fi.prototype.c=function(){return 1};var Gi=Gg||Fg;Fi.prototype.qb=function(){return this.value};Fi.prototype.toString=function(){return"Entry:"+this.value};function Hi(a,b,c,d,e,f){Fi.call(this,d,e);this.a=a;this.d=b;this.e=c;this.Ma=f||[]}C(Hi,Fi);l=Hi.prototype;l.wa=function(){return{k:this.f,v:this.value.toLowerCase(),id:this.qb(),loc:this.Ma}};l.qb=function(){var a=[this.a,this.e,this.d,this.value];return Gi?a:Zc(a)};l.h=function(){return this.a};l.p=function(){return this.e};l.toString=function(){return["IndexEntry",this.a,this.e,this.value].join(":")};function Ii(a,b,c,d,e){Fi.call(this,b,c);this.g=d;this.a=e;this.type=a;this.ub=1}C(Ii,Fi);Ii.prototype.c=function(){return this.a*this.type*this.ub};Ii.prototype.qb=function(){return this.value+"|"+this.g};function Ji(a,b){Hi.call(this,b.h(),b.d,b.p(),b.w(),b.f,[]);this.i=a;this.b=[b]}C(Ji,Hi);Ji.prototype.count=function(){return this.b.length};function Ki(a,b){for(var c=b.b[0],d=0;d<a.b.length;d++)if(a.b[d].d==c.d&&a.b[d].value==c.value)return;a.b.push(c)}Ji.prototype.c=function(){for(var a=0,b=0;b<this.b.length;b++)var c=this.b[b],d=se(this.i,c.h(),c.d),c=c.c(),a=a+c*d.c;return a};function Za(a,b){var c=a.c(),d=b.c();return c<=d?1:-1}
Ji.prototype.wa=function(){for(var a={value:this.value,primaryKey:this.e,storeName:this.a,score:this.c(),tokens:[]},b=0;b<this.b.length;b++)a.tokens[b]=this.b[b].wa();return a};Ji.prototype.toString=function(){return["RankEntry",this.a,this.e,this.value].join(":")+"["+this.b.length+"]"};function Li(a){var b=[],c;a=a.split(/\s+/);for(var d=0;d<a.length;d++){c=a[d];for(var e=c.length-1,f=Array(e),g=0;g<e;g++)f[g]=c.substring(g,g+2);c=f;b.push.apply(b,c)}return b};function uf(a,b,c,d,e,f,g){Hi.call(this,b,c,d,e,f,g);this.b=a}C(uf,Hi);uf.prototype.c=function(){var a,b=this.value;a=Li(this.b.value.toLowerCase().replace(/^\s+|\s+$/g,""));var b=Li(b.toLowerCase().replace(/^\s+|\s+$/g,"")),c=0,d=a.length+b.length,e,f,g,h;for(e=0;e<a.length;e++)for(g=a[e],f=0;f<b.length;f++)if(h=b[f],g==h){c++;delete b[f];break}a=2*c/d;b=Math.log(this.Ma.length+1);c=this.b.c();return b*a*c};uf.prototype.wa=function(){return{keyPath:this.d,value:this.value,loc:this.Ma.slice()}};
uf.prototype.toString=function(){return["ResultEntry",this.a,this.e,this.value].join(":")};function Mi(a,b){this.a=a;this.b=b;this.d=[];this.c=0}function tf(a,b){for(var c,d,e=a.a.getName(),f=0;f<a.b.length;f++){var g=a.b[f],h=g.type;.4==h||.6==h?(d="v",c=g.w().toLowerCase(),c=Id(c)):(d="v",c=g.w().toLowerCase(),c=Q.only(c));b(e,d,c,g);a.c++;.6==h&&(d="k",c=g.f,c=Q.only(c),b(e,d,c,g),a.c++)}}function sf(a){for(var b=[a.a.getName()],c=0;c<a.a.count();c++){var d=a.a.index(c).h();-1==b.indexOf(d)&&b.push(d)}return b}
Mi.prototype.e=function(){for(var a=[],b=[],c=0;c<this.d.length;c++){var d=this.d[c];if(0==d.b.type)-1==Qa(b,function(a){return a.p()==d.p()&&a.h()==d.h()})&&b.push(d);else{var e=new Ji(this.a,d),f=Qa(a,function(a){return a.p()==e.p()&&a.h()==e.h()});if(0<=f){var g=a[f];Ja.splice.call(a,f,1);Ki(g,e);e=g}Ya(a,e)}}for(f=0;f<b.length;f++)for(g=b[f],c=a.length-1;0<=c;--c){var h=a[c];if(g.p()==h.p()&&g.h()==h.h()){a.splice(f,1);break}}return a.map(function(a){return a.wa()})};function Ni(a){this.a=a;if("en"==a.c){a=a.d||["stop","stemmer","metaphone"];for(var b=[],c=0;c<a.length;c++)if("metaphone"==a[c])b.push(Ai);else if("stemmer"==a[c])b.push(Bi);else if("stop"==a[c])b.push(Ci);else throw Error('Invalid normalizer "'+a[c]+'" for English lang');a=b}else a=[];this.b=a}function Oi(a,b){for(var c=0;c<a.b.length;c++){var d=a.b[c].a(b);if(d)b=d;else return null}return b}
function Pi(a,b){var c=[],d=[];Ei(b,function(a,e){c.push(b.substr(a,e));d.push(a)});for(var e=[],f=0;f<c.length;f++)e[f]=Oi(a,c[f]);for(var g=[],h=0,f=0;f<c.length;f++){var k=c[f],m=e[f],n="*"==b.charAt(d[f]+k.length),p=n?d[f]+k.length+1:d[f]+k.length,p='"'==b.charAt(d[f]-1)&&'"'==b.charAt(p),q="-"==b.charAt(p?d[f]-2:d[f]-1),t=.8;n?t=.4:p?t=1:q?t=0:null!=m&&(t=.6);k=new Ii(t,k,m,d[f],1/(f+2));g.push(k);h+=k.c()}for(f=0;f<g.length;++f)g[f].ub=1/h;return g}
function Qi(a,b,c,d){var e=[],f=[];Ei(b,function(a,c){e.push(b.substr(a,c));f.push(a)});for(var g=[],h=0;h<e.length;h++)g[h]=Oi(a,e[h]);a=c.h();c=c.b;for(var k=[],h=0;h<e.length;h++){var m=e[h],n=g[h];if(null!=n){var p=Pa(k,function(a){return a.w()==m});p||(p=new Hi(a,c,d,m,n),k.push(p));p.Ma.push(f[h])}}return k}function Ri(a,b,c,d){for(var e=[],f=0;f<a.a.count();f++){var g=a.a.index(f);if(g.h()==b){var h=Wc(d,g.b);x(h)&&(e=e.concat(Qi(a,h,g,c)))}}return e};V.prototype.tb=function(a,b){var c=this;b.a=new Ni(b);me(a,function(d,e){function f(e){var f=a.getName();Cd(e)&&md(d,function(a,g,h){if(g)h(a,g);else{Rc(d,a);var k=Fd(Q.bound([f,e],[f,e,"\uffff"])),B=b.getName();wf(c.a,B,k).ha(function(){h(a,g)})}})}function g(b){var e=a.getName();md(d,function(a,f,g){f?g(a,f):(Rc(d,a),b&&(b=Fd(Q.bound([e,b.lower],[e,b.upper,"\uffff"]))),wf(c.a,e,b).ha(function(){g(a,f)}))})}function h(e,f){var g=a.getName();md(d,function(a,h,k){Rc(d,a);if(h)k(a,h);else{var B=b.getName();
v(a)||(a=[a]);for(var H=0;H<a.length;H++){var I=a[H];if(Cd(I)){if(f){var K=Fd(Q.bound([g,I],[g,I,"\uffff"]));wf(c.a,B,K)}I=Ri(b.a,g,I,e[H]).map(function(a){return a.wa()});I=vf(c.a,B,I);H==a.length-1&&I.ha(function(){k(a,h)})}}}})}var k=d.l;"put"==k?h([e[1]],!0):"put:array"==k?h(e[1],!0):"add"==k?h([e[1]],!1):"add:array"==k?h(e[1],!1):"rm:iter"==k||"clear"==k?g(e[1]):"rm"==k&&f(e[1])})};
V.prototype.F=function(a,b){var c=ye(this.c,a);if(!c)throw new E('full text index catalog "'+a+'" not found.');var c=c.a,d=Pi(c,b),c=0==d.length?null:new Mi(c.a,d);return c?rf(this.a,c):(this.logger.log(Ec,'query "'+b+'" contains only noise and search is ignored',void 0),nd("search",null))};V.prototype.search=V.prototype.F;Mi.prototype.collect=Mi.prototype.e;function Si(a,b,c){this.db=a;this.b=b;this.type=c||0;this.c=null};function Ti(a,b,c,d){this.d=a;this.a=b||null;this.f=!!c;this.e=!!d;this.b=[];this.c=[]}function Ui(a,b){for(var c=b.length-1;0<=c;c--)if(b[c]==a.b[a.b.length-1])b=b.slice(0,c);else break;a.c=b;return null}function Vi(a,b){if((0!=a.b.length||0!=a.c.length)&&Wi(a)&&!Xi(a))throw new Re('Require index "'+a.b.concat(a.c).join(", ")+'" not found in store "'+a.d.getName()+'"');var c=new W(a.d.getName(),Yi(a),a.a,a.f,a.e,!!b);c.r=a.b.length;return c}l=Ti.prototype;l.h=function(){return this.d.getName()};
l.clone=function(){var a=new Ti(this.d,this.a,this.f,this.e);a.c=this.c.slice();a.b=this.b.slice();return a};function Xi(a){var b=a.b.concat(a.c),c=de(a.d,b);return c||b[b.length-1]==a.d.keyPath&&(c=de(a.d,b.slice(0,b.length-1)))?c:null}function Yi(a){return(a=Xi(a))?a.getName():void 0}l.reverse=function(){var a=this.clone();a.f=!this.f;return a};l.unique=function(a){var b=this.clone();b.e=!!a;return b};function Wi(a){return 0<a.b.length?!0:1==a.c.length?a.c[0]!=a.d.keyPath:1<a.c.length?!0:!1}
l.n=function(a,b,c,d,e){c=Od(b,c,d,e);if(0<this.b.length)if(this.a)if(null!=this.a.lower&&null!=this.a.upper&&0==od(this.a.lower,this.a.upper))a=v(this.a.lower)?this.a.lower.slice().push(b):[this.a.lower,b],d=null!=d?d:"\uffff",c=v(this.a.upper)?this.a.upper.slice().push(d):[this.a.upper,d],this.a=Od(b,a,d,c);else if(1==this.b.length&&this.b[0]==a||v(a)&&Va(this.b,a))this.a=this.a.Y(c);else return"cannot use where clause with existing filter";else return"cannot use where clause with existing filter";
else this.b=v(a)?a:[a],this.a=this.a?this.a.Y(c):c;return null};function Zi(a,b,c,d){Si.call(this,a,b,c);this.a=d}C(Zi,Si);Zi.prototype.open=function(){var a={push:function(){}},a=$i(this)?new wi(a):new vi(a);return this.db.ob(a,aj(this),M)};function aj(a){for(var b=[],c=0;c<a.a.length;c++)b[c]=Vi(a.a[c]);return b}function $i(a){for(var b=0;b<a.a.length;b++)if(0<a.a[b].b.length)return!0;return!1}Zi.prototype.$a=function(){return this.a.slice()};Zi.prototype.select=function(){throw Error("not impl");};
Zi.prototype.reverse=function(){var a=this.a.map(function(a){return a.reverse()});return new Zi(this.db,this.b,this.type,a)};function X(a,b,c,d){Si.call(this,a,b,c);this.a=d}C(X,Si);l=X.prototype;l.lc=function(){return new X(this.db,this.b,this.type,this.a.clone())};l.reverse=function(){var a=this.a.reverse();return new X(this.db,this.b,this.type,a)};l.unique=function(a){if(!da(a))throw new E("unique value must be a boolean, but "+typeof a+" found");a=this.a.unique(a);return new X(this.db,this.b,this.type,a)};
l.L=function(a){var b=x(a)?[a]:a;a=this.a.clone();if(b=Ui(a,b))throw Error(b);return new X(this.db,this.b,this.type,a)};l.n=function(a,b,c,d,e){if(Yi(this.a)&&Yi(this.a)!=a){var f=Od(b,c,d,e),f=new Ti(S(this.b,this.a.h()),f,this.a.f,this.a.e);return this.Y(new X(this.db,this.b,this.type,f))}if(!Yi(this.a)&&!ee(S(this.b,this.a.h()),a))throw new E('index "'+a+'" not exists in '+this.a.h());f=this.a.clone();if(a=f.n(a,b,c,d,e))throw new E(a);return new X(this.db,this.b,this.type,f)};
l.select=function(a){var b=S(this.b,this.a.h()),c=x(a)?[a]:a,d=this.type;a=this.a.clone();d=Yi(this.a);if(1==c.length)if(d=c[0],"_ROWID_"==d||d==b.keyPath)d=2;else if(d&&"*"!=d)if(ee(b,d)){if(b=Ui(a,c))throw new E(b);d=1}else throw new E('Invalid select "'+d+'", index not found in store "'+b.getName()+'"');else d=4;else if(2==c.length){if(!d)throw new E("Only primary key can be selected for this query.");for(var e=0;2>e;e++){var f;if(f="_ROWID_"!=c[e]){f=b;var g=c[e];f=!(u(f.keyPath)&&(1==f.f.length?
f.keyPath===g:w(g)&&Va(f.f,g)))}if(f&&c[e]!=d)throw new E('select field name must be "'+d+'", but "'+c[e]+'" found.');}d=3}else throw new E("Selecting more than 2 field names is not supported, but "+c.length+" fields selected.");return new X(this.db,this.b,d,a)};l.mc=function(a){a=a||100;var b=4,c=bj(this);this.c&&this.c[0]&&(c=c.Ob(this.c[0],this.c[1]));if(2==this.type||3==this.type||1==this.type)b=this.type;a=$f(this.db,b,c,a);a.D(function(){"rest"==c.d&&(this.c=[c.g,c.p()])},this);return a};
l.$a=function(){return[this.a.clone()]};function bj(a){return Vi(a.a,!(2==a.type||3==a.type||1==a.type))}
l.ac=function(a,b){var c=bj(this);c.a&&(c=new W(c.e,c.c,c.b,c.Q(),c.pa(),!1,c.f));if(1>arguments.length)throw new E("too few arguments");if(2==arguments.length){if(!x(a)&&v(a)){if(!v(b))throw new E("an array is expected for second argument but, "+pe(b)+" of type "+typeof b+" found");if(a.length!=b.length)throw new E("length of two input arguments must be equal but, "+a.length+" and "+b.length+" found");}}else if(1==arguments.length){if(!z(a))throw new E("an object is expected but, "+pe(a)+" of type "+
typeof a+" found");}else throw new E("too many arguments");var d=this.db.open(function(c){var f=c.w();if(x(a))Xc(f,a,b);else if(v(a))for(var g=0;g<a.length;g++)Xc(f,a[g],b[g]);else if(z(a))for(g in a)a.hasOwnProperty(g)&&(f[g]=a[g]);Pb(d,c.update(f))},c,M,this);return d};l.open=function(a,b){return this.db.open(a,bj(this),M,b)};l.count=function(){return Wi(this.a)?this.a.e?this.db.count(Vi(this.a)):this.db.count(this.a.h(),Yi(this.a),this.a.a):this.db.count(this.a.h(),this.a.a)};
l.clear=function(){return Wi(this.a)?this.db.clear(this.a.h(),Yi(this.a),this.a.a):this.db.clear(this.a.h(),this.a.a)};l.Y=function(a){a=a.$a().concat(this.$a());return new Zi(this.db,this.b,this.type,a)};
ag.prototype.K=function(a,b,c,d,e){if(!x(a))throw new TypeError('store name "'+a+'"');if(!we(this.c,a))throw new E('Store "'+a+'" not found.');var f=null;if(u(b)){if(!u(c))throw new E("boundary value must be defined.");f=Od(b,c,d,e)}else if(u(d))throw new E("second boundary must not be defined.");a=new Ti(S(this.c,a),f);return new X(this.a,this.c,null,a)};
Yf.prototype.K=function(a,b,c,d,e){if(!x(a))throw new TypeError('store name "'+a+'"');if(!we(this.b,a))throw new E('Store "'+a+'" not found.');var f=null;if(u(b)){if(!u(c))throw new E("boundary value must be defined.");f=Od(b,c,d,e)}else if(u(d))throw new E("second boundary must not be defined.");a=new Ti(S(this.b,a),f);return new X(this,this.b,null,a)};F("ydn.db.query.ConjunctionCursor");X.prototype.copy=X.prototype.lc;X.prototype.count=X.prototype.count;X.prototype.list=X.prototype.mc;X.prototype.order=X.prototype.L;X.prototype.patch=X.prototype.ac;X.prototype.reverse=X.prototype.reverse;X.prototype.unique=X.prototype.unique;X.prototype.where=X.prototype.n;ag.prototype.from=ag.prototype.K;Yf.prototype.from=Yf.prototype.K; 
var categ_letters_numbers_data=[[48,57],[65,90],[97,122],170,[178,179],181,[185,186],[188,190],[192,214],[216,246],[248,705],[710,721],[736,740],748
	,750,[880,884],[886,887],[890,893],902,[904,906],908,[910,929],[931,1013],[1015,1153],[1162,1319],[1329,1366],1369
	,[1377,1415],[1488,1514],[1520,1522],[1568,1610],[1632,1641],[1646,1647],[1649,1747],1749,[1765,1766],[1774,1788],1791
	,1808,[1810,1839],[1869,1957],1969,[1984,2026],[2036,2037],2042,[2048,2069],2074,2084,2088,[2112,2136],2208,[2210,2220]
	,[2308,2361],2365,2384,[2392,2401],[2406,2415],[2417,2423],[2425,2431],[2437,2444],[2447,2448],[2451,2472],[2474,2480]
	,2482,[2486,2489],2493,2510,[2524,2525],[2527,2529],[2534,2545],[2548,2553],[2565,2570],[2575,2576],[2579,2600]
	,[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2649,2652],2654,[2662,2671],[2674,2676],[2693,2701],[2703,2705]
	,[2707,2728],[2730,2736],[2738,2739],[2741,2745],2749,2768,[2784,2785],[2790,2799],[2821,2828],[2831,2832],[2835,2856]
	,[2858,2864],[2866,2867],[2869,2873],2877,[2908,2909],[2911,2913],[2918,2927],[2929,2935],2947,[2949,2954],[2958,2960]
	,[2962,2965],[2969,2970],2972,[2974,2975],[2979,2980],[2984,2986],[2990,3001],3024,[3046,3058],[3077,3084],[3086,3088]
	,[3090,3112],[3114,3123],[3125,3129],3133,[3160,3161],[3168,3169],[3174,3183],[3192,3198],[3205,3212],[3214,3216]
	,[3218,3240],[3242,3251],[3253,3257],3261,3294,[3296,3297],[3302,3311],[3313,3314],[3333,3340],[3342,3344],[3346,3386]
	,3389,3406,[3424,3425],[3430,3445],[3450,3455],[3461,3478],[3482,3505],[3507,3515],3517,[3520,3526],[3585,3632]
	,[3634,3635],[3648,3654],[3664,3673],[3713,3714],3716,[3719,3720],3722,3725,[3732,3735],[3737,3743],[3745,3747],3749
	,3751,[3754,3755],[3757,3760],[3762,3763],3773,[3776,3780],3782,[3792,3801],[3804,3807],3840,[3872,3891],[3904,3911]
	,[3913,3948],[3976,3980],[4096,4138],[4159,4169],[4176,4181],[4186,4189],4193,[4197,4198],[4206,4208],[4213,4225],4238
	,[4240,4249],[4256,4293],4295,4301,[4304,4346],[4348,4680],[4682,4685],[4688,4694],4696,[4698,4701],[4704,4744]
	,[4746,4749],[4752,4784],[4786,4789],[4792,4798],4800,[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954]
	,[4969,4988],[4992,5007],[5024,5108],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5870,5872],[5888,5900]
	,[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6000],[6016,6067],6103,6108,[6112,6121],[6128,6137],[6160,6169]
	,[6176,6263],[6272,6312],6314,[6320,6389],[6400,6428],[6470,6509],[6512,6516],[6528,6571],[6593,6599],[6608,6618]
	,[6656,6678],[6688,6740],[6784,6793],[6800,6809],6823,[6917,6963],[6981,6987],[6992,7001],[7043,7072],[7086,7141]
	,[7168,7203],[7232,7241],[7245,7293],[7401,7404],[7406,7409],[7413,7414],[7424,7615],[7680,7957],[7960,7965]
	,[7968,8005],[8008,8013],[8016,8023],8025,8027,8029,[8031,8061],[8064,8116],[8118,8124],8126,[8130,8132],[8134,8140]
	,[8144,8147],[8150,8155],[8160,8172],[8178,8180],[8182,8188],[8304,8305],[8308,8313],[8319,8329],[8336,8348],8450,8455
	,[8458,8467],8469,[8473,8477],8484,8486,8488,[8490,8493],[8495,8505],[8508,8511],[8517,8521],8526,[8528,8585]
	,[9312,9371],[9450,9471],[10102,10131],[11264,11310],[11312,11358],[11360,11492],[11499,11502],[11506,11507],11517
	,[11520,11557],11559,11565,[11568,11623],11631,[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710]
	,[11712,11718],[11720,11726],[11728,11734],[11736,11742],11823,[12293,12295],[12321,12329],[12337,12341],[12344,12348]
	,[12353,12438],[12445,12447],[12449,12538],[12540,12543],[12549,12589],[12593,12686],[12690,12693],[12704,12730]
	,[12784,12799],[12832,12841],[12872,12879],[12881,12895],[12928,12937],[12977,12991],13312,19893,19968,40908
	,[40960,42124],[42192,42237],[42240,42508],[42512,42539],[42560,42606],[42623,42647],[42656,42735],[42775,42783]
	,[42786,42888],[42891,42894],[42896,42899],[42912,42922],[43000,43009],[43011,43013],[43015,43018],[43020,43042]
	,[43056,43061],[43072,43123],[43138,43187],[43216,43225],[43250,43255],43259,[43264,43301],[43312,43334],[43360,43388]
	,[43396,43442],[43471,43481],[43520,43560],[43584,43586],[43588,43595],[43600,43609],[43616,43638],43642,[43648,43695]
	,43697,[43701,43702],[43705,43709],43712,43714,[43739,43741],[43744,43754],[43762,43764],[43777,43782],[43785,43790]
	,[43793,43798],[43808,43814],[43816,43822],[43968,44002],[44016,44025],44032,55203,[55216,55238],[55243,55291]
	,[63744,64109],[64112,64217],[64256,64262],[64275,64279],64285,[64287,64296],[64298,64310],[64312,64316],64318
	,[64320,64321],[64323,64324],[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140]
	,[65142,65276],[65296,65305],[65313,65338],[65345,65370],[65382,65470],[65474,65479],[65482,65487],[65490,65495]
	,[65498,65500],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786]
	,[65799,65843],[65856,65912],65930,[66176,66204],[66208,66256],[66304,66334],[66336,66339],[66352,66378],[66432,66461]
	,[66464,66499],[66504,66511],[66513,66517],[66560,66717],[66720,66729],[67584,67589],67592,[67594,67637],[67639,67640]
	,67644,[67647,67669],[67672,67679],[67840,67867],[67872,67897],[67968,68023],[68030,68031],68096,[68112,68115]
	,[68117,68119],[68121,68147],[68160,68167],[68192,68222],[68352,68405],[68416,68437],[68440,68466],[68472,68479]
	,[68608,68680],[69216,69246],[69635,69687],[69714,69743],[69763,69807],[69840,69864],[69872,69881],[69891,69926]
	,[69942,69951],[70019,70066],[70081,70084],[70096,70105],[71296,71338],[71360,71369],[73728,74606],[74752,74850]
	,[77824,78894],[92160,92728],[93952,94020],94032,[94099,94111],[110592,110593],[119648,119665],[119808,119892]
	,[119894,119964],[119966,119967],119970,[119973,119974],[119977,119980],[119982,119993],119995,[119997,120003]
	,[120005,120069],[120071,120074],[120077,120084],[120086,120092],[120094,120121],[120123,120126],[120128,120132],120134
	,[120138,120144],[120146,120485],[120488,120512],[120514,120538],[120540,120570],[120572,120596],[120598,120628]
	,[120630,120654],[120656,120686],[120688,120712],[120714,120744],[120746,120770],[120772,120779],[120782,120831]
	,[126464,126467],[126469,126495],[126497,126498],126500,126503,[126505,126514],[126516,126519],126521,126523,126530
	,126535,126537,126539,[126541,126543],[126545,126546],126548,126551,126553,126555,126557,126559,[126561,126562],126564
	,[126567,126570],[126572,126578],[126580,126583],[126585,126588],126590,[126592,126601],[126603,126619],[126625,126627]
	,[126629,126633],[126635,126651],[127232,127242],131072,173782,173824,177972,177984,178205,[194560,195101]];
;

//# sourceMappingURL=ydn.db-is-sql-e-cur-qry-text-dev.js.map
return ydn;}, (this || {}));
            