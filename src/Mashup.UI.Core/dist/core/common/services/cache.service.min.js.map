{"version":3,"file":"cache.service.min.js","sources":["cache.service.js"],"names":["mashupApp","service","$http","$q","$log","utility","detectService","sessionService","dbCache","ydn","db","Storage","dbCacheReady","onReady","console","log","isCacheStale","cacheName","minutes","deferred","defer","result","ageToleranceMilliseconds","envSession","batteryLevel","currentDateMilliseconds","Date","getTime","wait","executeSql","then","record","recordCount","length","durationMilliseconds","updatedDate","resolve","e","setTimeout","promise","updateCacheAge","cacheJSON","id","put","name","keyPath","getCache","minutesInOneWeek","clear","logObject","getLogObject","getHeartBeatUrl","webApiUrl","useHeartBeatConvention","heartBeatUrl","getHeartBeatUrlByConvention","warn","parseUrl","parts","exec","putCache","schema","data","reason","reject","getData","staleMinutes","heartBeatName","cacheIsStale","webApiAvailable","detect","get","withCredentials","success","err","error","indexedDB","deleteDatabase","failed"],"mappings":"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"}